# 不花钱也能畅享转录！用Python脚本解锁ElevenLabs的隐藏用法~[可导出带时间戳的SRT字幕] - 资源荟萃 / 资源荟萃, Lv1 - LINUX DO
[不花钱也能畅享转录！用Python脚本解锁ElevenLabs的隐藏用法~[可导出带时间戳的SRT字幕] - 资源荟萃 / 资源荟萃, Lv1 - LINUX DO](https://linux.do/t/topic/665831/14) 

  不花钱也能畅享转录！用Python脚本解锁ElevenLabs的隐藏用法~\[可导出带时间戳的SRT字幕\] - 资源荟萃 / 资源荟萃, Lv1 - LINUX DO                                                 

[跳到主要内容](#main-container)

 [![](https://linux.do/uploads/default/original/3X/9/d/9dd49731091ce8656e94433a26a3ef36062b3994.png)](/) 

[不花钱也能畅享转录！用Python脚本解锁ElevenLabs的隐藏用法~\[可导出带时间戳的SRT字幕\]](/t/topic/665831)


===========================================================================

[资源荟萃](/c/resource/14)

[资源荟萃, Lv1](/c/resource/resource-lv1/83)

[人工智能](/tag/人工智能)

,[薅羊毛](/tag/薅羊毛)

,[NSFW](/tag/nsfw)

*   ​

*    ![](https://linux.do/letter_avatar/niyan2025/96/5_d44a9b381edc88181525e3c8350177ca.png) 

*   [话题](/latest "所有话题")
*   [我的帖子](/u/niyan2025/activity/drafts "我的未发布草稿")
*   [关于](/about "关于此网站的更多详细信息")
*   [即将到来的活动](/upcoming-events "即将到来的活动")
*   更多

外部链接

*   [Status](https://status.linux.do)
*   [T-Shirt](https://shanwaiyoushan.taobao.com)
*   [Connect](https://connect.linux.do)
*   [Webmail](https://webmail.linux.do)
*   [Channel](https://t.me/linux_do_channel)
*   [Telegram](https://t.me/ja_netfilter_group)

类别

*   [开发调优](/c/develop/4 "此版块包含开发、测试、调试、部署、优化、安全等方面的内容")
*   [资源荟萃](/c/resource/14 "包括软件分享、开源仓库、视频课程、书籍等分享")
*   [文档共建](/c/wiki/42 "佬友化身翰林学士，一起来编书了。")
*   [跳蚤市场](/c/trade/10 "交易相关的版块，包含实体和虚拟物品供求、拼车等等")
*   [非我莫属](/c/job/27 "学成文武艺，货与帝王家。招聘/求职分类，只能发此类信息。")
*   [读书成诗](/c/reading/32 "跟着佬友们一起在论坛读完一本书是什么体验？")
*   [扬帆起航](/c/startup/46 "扬帆起航，目标是星辰大海！")
*   [前沿快讯](/c/news/34 "前沿快讯，不出门能知天下事。")
*   [网络记忆](/c/feeds/92 "网络是有记忆的，确信！")
*   [福利羊毛](/c/welfare/36 "正经人谁花那个钱啊～ 此版块供羊毛、抽奖等福利使用。")
*   [搞七捻三](/c/gossip/11 "闲聊吹水的板块。不得讨论政治、色情等违规内容。")
*   [运营反馈](/c/feedback/2 "有关此站点、其组织、运作方式以及如何改进的讨论。")
*   [深海幽域](/c/muted/45 "冰山下的深海。帖子不会上信息流、不会被论坛搜索。")
*   [所有类别](/categories)

标签

*   [人工智能](/tag/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD)
*   [公告](/tag/%E5%85%AC%E5%91%8A)
*   [快问快答](/tag/%E5%BF%AB%E9%97%AE%E5%BF%AB%E7%AD%94)
*   [抽奖](/tag/%E6%8A%BD%E5%A5%96)
*   [精华神帖](/tag/%E7%B2%BE%E5%8D%8E%E7%A5%9E%E5%B8%96)
*   [所有标签](/tags)

消息

*   [收件箱](/u/niyan2025/messages)

*   [我的消息串](/chat/threads "我的消息串")

频道

*   [常规频道](/chat/c/general/2 "🈲 禁止在聊天频道里发送 打卡 等无意义信息，被举报会喜提 禁言1小时 。")

直接消息

*    [![](https://linux.do/user_avatar/linux.do/wenjuhe/48/672301_2.png)  奇妙进化小河马🦛   ![](https://linux.do/images/emoji/twemoji/hippopotamus.png?v=14)](/chat/c/%E5%A5%87%E5%A6%99%E8%BF%9B%E5%8C%96%E5%B0%8F%E6%B2%B3%E9%A9%AC%F0%9F%A6%9B/45968 "与 奇妙进化小河马🦛 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/xronus/48/130867_2.png)  Anivix](/chat/c/anivix/32458 "与 Anivix 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/huan/48/293194_2.png)  焕昭君](/chat/c/%E7%84%95%E6%98%AD%E5%90%9B/43057 "与 焕昭君 聊天") 

聊天

Default

​ ​ ​

**真诚**、**友善**、**团结**、**专业**，共建你我引以为荣之社区。[《常见问题解答》](/faq)

[

❤️ 再忍不住，也不要做这种事啊 ❤️

](https://linux.do/t/topic/482293)

不花钱也能畅享转录！用Python脚本解锁ElevenLabs的隐藏用法~\[可导出带时间戳的SRT字幕\]
======================================================

[资源荟萃](/c/resource/14)

[资源荟萃, Lv1](/c/resource/resource-lv1/83)

[人工智能](/tag/人工智能)

,[薅羊毛](/tag/薅羊毛)

,[NSFW](/tag/nsfw)

您已选择 **0** 个帖子。

全选

取消选择

172 浏览量 38 赞 12 用户

 [![](https://linux.do/user_avatar/linux.do/fuxiaomoke/96/546443_2.png)
 3](/u/fuxiaomoke "fuxiaomoke") 

 [![](https://linux.do/user_avatar/linux.do/koast18/96/462744_2.png)
 2](/u/koast18 "koast18")

 [![](https://linux.do/user_avatar/linux.do/ivanhanloth/96/673656_2.png)
 2](/u/IvanHanloth "IvanHanloth") 

 [![](https://linux.do/letter_avatar/lejile/96/5_d44a9b381edc88181525e3c8350177ca.png)](/u/lejile "lejile") 

 [![](https://linux.do/user_avatar/linux.do/ddgg/96/534837_2.png)](/u/ddgg "ddgg") 

阅读时间 7 分钟

​

[5月 21 日](/t/topic/665831/1 "跳到第一个帖子")

13 / 16

5月 21 日

[1 小时](/t/topic/665831/17)

​

[![](https://linux.do/user_avatar/linux.do/fuxiaomoke/96/546443_2.png)
](/u/fuxiaomoke)

[浮霄默客](/u/fuxiaomoke)

[fuxiaomoke](/u/fuxiaomoke)

2

[5 小时](/t/topic/665831?u=niyan2025 "发布日期")

> 观前速览：对 ElevenLabs 流畅的语音转录服务感兴趣，却又希望有更经济的选择？通过经典的F12大法，配合简单的Python脚本，让你不花钱也能畅享高质量转录API。喜欢薅羊毛的佬友们快去试试吧！
> -----------------------------------------------------------------------------------------------------

* * *

从这里继续讨论：

![](https://linux.do/user_avatar/linux.do/fuxiaomoke/48/546443_2.png)
[同人音声转录小工具分享(支持导出带时间戳的SRT)&关于STT的回顾与展望](https://linux.do/t/topic/601303/1)

> 不过，通过Scribe和Gemini 2.5 Pro的使用，可以确定的是，传统转录+大模型理解优化这个模式还是非常正确的，就是目前来看，成本和道德审核是个比较大的问题。
> 
> 总之，期待一手未来吧，希望STT模型能够再创新高。
> 
> **PS：有没有佬去搞一下elevenlabs网页端免费api的脚本啊，我果然还是想白嫖**

我果然还是想白嫖，所以…

自己动手，丰衣足食，开搞！！！

先简单的看一下官网免费api的调用过程。

经典F12看控制台，然后上传测试音频文件。

[![](https://linux.do/uploads/default/optimized/4X/4/5/3/453d0f5f110beb605bbc6323bd2db7610b1f3906_2_517x254.png)

截图11865×918 187 KB

](https://linux.do/uploads/default/original/4X/4/5/3/453d0f5f110beb605bbc6323bd2db7610b1f3906.png "截图1")

因为测试音频很短，所以结果很快就出来了。

[![](https://linux.do/uploads/default/optimized/4X/0/4/1/0416af05a8738ffc63711a9759355ead3abe264f_2_517x192.png)

截图21295×483 64.5 KB

](https://linux.do/uploads/default/original/4X/0/4/1/0416af05a8738ffc63711a9759355ead3abe264f.png "截图2")

[NSFW](/tag/NSFW)

检查网络，非常清晰明了的POST请求。

[![](https://linux.do/uploads/default/optimized/4X/3/f/f/3ff29c59a9d3fb2242626cdf2f011c4153bbe9f6_2_690x56.png)

截图31920×156 15.6 KB

](https://linux.do/uploads/default/original/4X/3/f/f/3ff29c59a9d3fb2242626cdf2f011c4153bbe9f6.png "截图3")

再看一眼请求标头和荷载，好像也没有什么复杂的秘钥，就靠一个“allow\_unauthenticated=1”的样子…（合理怀疑是靠ip来限制使用次数的）

[![](https://linux.do/uploads/default/original/4X/8/5/b/85be2a2e0e34a6989e9745c89bdb7a2755cf75e2.png)

截图4969×508 15.7 KB

](https://linux.do/uploads/default/original/4X/8/5/b/85be2a2e0e34a6989e9745c89bdb7a2755cf75e2.png "截图4")

[![](https://linux.do/uploads/default/original/4X/d/8/9/d897fb61ccdacdebedc80eb7a96cde23e2590860.png)

截图5445×249 5.92 KB

](https://linux.do/uploads/default/original/4X/d/8/9/d897fb61ccdacdebedc80eb7a96cde23e2590860.png "截图5")

难道说…？

[![](https://linux.do/uploads/default/original/4X/f/c/0/fc06ec736691931111bc1a7b7c2246f6104d9956.png)

截图61010×493 11.2 KB

](https://linux.do/uploads/default/original/4X/f/c/0/fc06ec736691931111bc1a7b7c2246f6104d9956.png "截图6")

不是割们，这就给我了？那我也不客气了。

[](#p-6040157-h-1)哈基米，启动！！
==========================

```


`import requests
import json
import os
import time
from mutagen import File as MutagenFile # 用于读取音频时长 (需要先 pip install mutagen)
import wave # 导入内置的wave模块
import random # 用于随机选择请求头

# --- API 配置 ---
API_URL = "https://api.elevenlabs.io/v1/speech-to-text"
PARAMS = {
    "allow_unauthenticated": "1" 
}

# --- 内置的默认请求头列表 ---
DEFAULT_USER_AGENTS = [
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:126.0) Gecko/20100101 Firefox/126.0",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:125.0) Gecko/20100101 Firefox/125.0",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:126.0) Gecko/20100101 Firefox/126.0",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:125.0) Gecko/20100101 Firefox/125.0",
    "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36",
    "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:124.0) Gecko/20100101 Firefox/124.0",
    "Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",
    "Mozilla/5.0 (iPhone; CPU iPhone OS 17_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.4.1 Mobile/15E148 Safari/604.1",
    "Mozilla/5.0 (Linux; Android 14; Pixel 8 Pro) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Mobile Safari/537.36",
    "Mozilla/5.0 (Linux; Android 13; SM-S918U1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.6261.70 Mobile Safari/537.36",
    "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Mobile Safari/537.36",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Edg/124.0.2478.80",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Edge/123.0.2420.97",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Version/17.4.1 Safari/605.1.15",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Safari/605.1.15",
    "Mozilla/5.0 (iPad; CPU OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",
    "Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 Safari/537.36",
    "Mozilla/5.0 (iPhone; CPU iPhone OS 16_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6.1 Mobile/15E148 Safari/604.1",
    "Mozilla/5.0 (Linux; Android 12; SM-A525F) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0 Mobile Safari/537.36",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 11_7_10) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36",
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/115.0",
    "Mozilla/5.0 (iPhone; CPU iPhone OS 15_8 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.6.4 Mobile/15E148 Safari/604.1",
    "Mozilla/5.0 (Linux; Android 11; CPH2239) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Mobile Safari/537.36",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1.2 Safari/605.1.15",
    "Mozilla/5.0 (Windows NT 10.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36 Edg/121.0.2277.128",
    "Mozilla/5.0 (X11; CrOS x86_64 14541.0.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.5735.0 Safari/537.36"
]

DEFAULT_ACCEPT_LANGUAGES = [
    "en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7,ja;q=0.6",
    "zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,ja;q=0.5",
    "en-GB,en;q=0.9,en-US;q=0.8,de;q=0.7,fr;q=0.6",
    "ja-JP,ja;q=0.9,en-US;q=0.8,en;q=0.7",
    "de-DE,de;q=0.9,en-US;q=0.8,en;q=0.7,fr;q=0.6",
    "fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7,es;q=0.6",
    "es-ES,es;q=0.9,en;q=0.8,pt;q=0.7",
    "ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7,ja;q=0.6",
    "ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7",
    "it-IT,it;q=0.9,en-US;q=0.8,en;q=0.7,de;q=0.6",
    "pt-BR,pt;q=0.9,en-US;q=0.8,en;q=0.7,es;q=0.6",
    "en-CA,en;q=0.9,fr-CA;q=0.8",
    "en-AU,en;q=0.9,en-GB;q=0.8",
    "zh-TW,zh;q=0.9,en-US;q=0.8,en;q=0.7,ja;q=0.6",
    "ar-SA,ar;q=0.9,en-US;q=0.8,en;q=0.7",
    "hi-IN,hi;q=0.9,en-US;q=0.8,en;q=0.7",
    "nl-NL,nl;q=0.9,en-US;q=0.8,en;q=0.7,de;q=0.6",
    "sv-SE,sv;q=0.9,en-US;q=0.8,en;q=0.7,fi;q=0.6",
    "fi-FI,fi;q=0.9,en-US;q=0.8,en;q=0.7,sv;q=0.6",
    "pl-PL,pl;q=0.9,en-US;q=0.8,en;q=0.7,de;q=0.6",
    "tr-TR,tr;q=0.9,en-US;q=0.8,en;q=0.7",
    "cs-CZ,cs;q=0.9,en-US;q=0.8,en;q=0.7,sk;q=0.6",
    "hu-HU,hu;q=0.9,en-US;q=0.8,en;q=0.7,de;q=0.6",
    "el-GR,el;q=0.9,en-US;q=0.8,en;q=0.7",
    "id-ID,id;q=0.9,en-US;q=0.8,en;q=0.7"
]

# --- 函数定义 ---
def get_audio_info(audio_file_path):
    """获取并显示音频文件的时长和大小。"""
    try:
        file_size_bytes = os.path.getsize(audio_file_path)
        file_size_mb = file_size_bytes / (1024 * 1024)
        print(f"  文件大小: {file_size_mb:.2f} MB")

        duration_seconds = None
        audio_info = MutagenFile(audio_file_path)
        if audio_info and hasattr(audio_info, 'info') and hasattr(audio_info.info, 'length'):
            duration_seconds = audio_info.info.length
        elif audio_file_path.lower().endswith(".wav"):
            print("  Mutagen未能获取WAV时长, 尝试使用wave模块...")
            try:
                with wave.open(audio_file_path, 'rb') as wf:
                    frames = wf.getnframes()
                    rate = wf.getframerate()
                    if rate > 0:
                        duration_seconds = frames / float(rate)
                    else:
                        print("  警告：WAV 文件帧率无效 (wave模块)。")
            except Exception as e_wave:
                print(f"  使用wave模块读取WAV时长错误: {e_wave}")
        
        if duration_seconds is not None:
            minutes = int(duration_seconds // 60)
            seconds = int(duration_seconds % 60)
            milliseconds = int((duration_seconds - (minutes * 60) - seconds) * 1000)
            print(f"  音频时长: {minutes:02d}分{seconds:02d}秒{milliseconds:03d}毫秒 ({duration_seconds:.3f}秒)")
        else:
            print("  警告：未能获取音频时长。")
            
    except Exception as e:
        print(f"  获取音频信息时发生错误: {e}")

# 修改函数签名，tag_audio_events_param 默认值为 "true"
def transcribe_audio_elevenlabs(audio_file_path, num_speakers_param=None, tag_audio_events_param="true"):
    """
    上传音频文件到ElevenLabs进行转录，并返回完整的JSON响应。
    """
    if not os.path.exists(audio_file_path):
        print(f"错误：音频文件 '{audio_file_path}' 未找到。")
        return None

    print(f"\n正在处理文件: {os.path.basename(audio_file_path)}")
    get_audio_info(audio_file_path)

    headers = {
        "accept": "*/*",
        "accept-encoding": "gzip, deflate, br, zstd",
        "accept-language": random.choice(DEFAULT_ACCEPT_LANGUAGES),
        "origin": "https://elevenlabs.io",
        "referer": "https://elevenlabs.io/",
        "user-agent": random.choice(DEFAULT_USER_AGENTS),
        "sec-fetch-dest": "empty",
        "sec-fetch-mode": "cors",
        "sec-fetch-site": "same-site",
        # "xi-api-key": "YOUR_ELEVENLABS_API_KEY", 
    }

    payload_data = {
        "model_id": "scribe_v1",
        "tag_audio_events": tag_audio_events_param, # 直接使用传入的参数，其默认值为"true"
        "diarize": "true"
    }
    if num_speakers_param is not None:
        payload_data["num_speakers"] = str(num_speakers_param)
    
    try:
        with open(audio_file_path, 'rb') as f_audio:
            file_extension = os.path.splitext(audio_file_path)[1].lower()
            mime_type_map = {
                ".mp3": "audio/mpeg", ".wav": "audio/wav", ".flac": "audio/flac",
                ".m4a": "audio/mp4", ".ogg": "audio/ogg", ".opus": "audio/opus",
                ".aac": "audio/aac", ".webm": "audio/webm", ".mp4": "video/mp4",
                ".mov": "video/quicktime"
            }
            mime_type = mime_type_map.get(file_extension, 'application/octet-stream')
            if mime_type == 'application/octet-stream':
                print(f"  警告：未知的音频文件扩展名 '{file_extension}'，使用通用MIME类型 '{mime_type}'。")
            
            files_data = { "file": (os.path.basename(audio_file_path), f_audio, mime_type) }
            
            print(f"\n开始上传并请求转录...")
            start_time = time.perf_counter()
            response = requests.post(API_URL, params=PARAMS, headers=headers, data=payload_data, files=files_data, timeout=600)
            end_time = time.perf_counter()
            api_call_duration = end_time - start_time
            print(f"转录请求完成，耗时: {api_call_duration:.2f} 秒")
            
            response.raise_for_status() 

            response_json = response.json()
            print("成功从API获取并解析JSON响应。")
            return response_json 

    except requests.exceptions.Timeout:
        print(f"请求超时：API调用在设定的超时时间内未完成。")
    except requests.exceptions.RequestException as e:
        print(f"请求过程中发生网络或HTTP错误: {e}")
        if hasattr(e, 'response') and e.response is not None:
            print(f"  服务器响应状态码: {e.response.status_code}")
            print(f"  服务器响应内容: {e.response.text}")
    except json.JSONDecodeError:
        print("错误：无法解析服务器返回的JSON响应。")
        print(f"  原始响应文本: {response.text if 'response' in locals() else 'N/A'}")
    except Exception as e:
        print(f"处理过程中发生其他未知错误: {e}")
    
    return None

if __name__ == "__main__":
    print("ElevenLabs 音频转录工具")
    print("=========================")
    
    input_audio_path = input("\n请输入音频文件的完整路径: ").strip()
    
    if not input_audio_path:
        print("未提供音频文件路径，脚本退出。")
    elif not os.path.exists(input_audio_path):
        print(f"错误: 文件 '{input_audio_path}' 不存在，请检查路径。")
    else:
        num_speakers_to_send = None
        while True:
            num_speakers_input = input("请输入预计的说话人数量 (数字，如1, 2...；若留空或输入0，则由API自动检测): ").strip()
            if not num_speakers_input or num_speakers_input == '0': 
                num_speakers_to_send = None
                print("  将由API自动检测说话人数量 (不发送 num_speakers 参数)。")
                break
            try:
                num_speakers_val = int(num_speakers_input)
                if num_speakers_val > 0:
                    num_speakers_to_send = num_speakers_val
                    print(f"  将指定说话人数量为: {num_speakers_to_send}")
                    break
                else: 
                    print("  说话人数量必须是正整数。请重新输入，或留空/输入0以自动检测。")
            except ValueError:
                print("  输入无效。请输入一个数字，或留空/输入0以自动检测。")

        # 获取 tag_audio_events 设置 (恢复到总是发送 true 或 false)
        tag_audio_events_to_send_str = "true" # 默认启用
        while True:
            tag_choice = input("是否标记音频事件 (tag_audio_events)? (y/n，直接回车默认为'yes'): ").strip().lower()
            if not tag_choice or tag_choice in ['y', 'yes']:
                tag_audio_events_to_send_str = "true"
                print("  将启用音频事件标记 (tag_audio_events=true)。")
                break
            elif tag_choice in ['n', 'no']:
                tag_audio_events_to_send_str = "false"
                print("  将禁用音频事件标记 (tag_audio_events=false)。")
                break
            else:
                print("  输入无效，请输入 'y' 或 'n' (或直接回车)。")

        full_transcription_data = transcribe_audio_elevenlabs(
            input_audio_path, 
            num_speakers_param=num_speakers_to_send,
            tag_audio_events_param=tag_audio_events_to_send_str 
        )
        
        if full_transcription_data:
            if not isinstance(full_transcription_data, dict):
                print("错误：API返回的数据不是预期的JSON对象格式。")
                print("实际收到的数据：", full_transcription_data)
            else:
                default_output_filename = f"{os.path.splitext(os.path.basename(input_audio_path))[0]}_transcript.json"
                output_json_filename = input(f"请输入保存转录结果的JSON文件名 (直接回车则默认为: {default_output_filename}): ").strip()
                if not output_json_filename:
                    output_json_filename = default_output_filename
                
                try:
                    with open(output_json_filename, 'w', encoding='utf-8') as outfile:
                        json.dump(full_transcription_data, outfile, indent=4, ensure_ascii=False)
                    print(f"\n完整的转录结果已成功保存到: {os.path.abspath(output_json_filename)}")
                    print("文件内容应包含 'text', 'words', 以及API返回的其他信息。")
                except IOError as e:
                    print(f"保存文件时发生错误: {e}")
        else:
            print("\n未能成功获取或保存转录结果。")` 
```

[](#p-6040157-api-2)**测试一下免费转录API的额度和限制↓**
------------------------------------------

See the Pen <a href="https://codepen.io/fuxiaomoke/pen/QwweKWj"> Untitled</a> by 浮霄 (<a href="https://codepen.io/fuxiaomoke">@fuxiaomoke</a>) on <a href="https://codepen.io">CodePen</a>.

* * *

### [](#p-6040157-h-3)结果分析

*   MP3格式音频转录速度普遍快于WAV格式音频（相同时长下）
*   MP3格式因其更高的压缩率，即使音频时长较长，其转录效率仍相对较高
*   音频大小对转录时间有显著影响，格式相同的情况下，文件越大转录时间越长
*   转录时间与音频时长呈正相关关系，但增长率不是线性的
*   文件大小超过300MB的WAV文件（如20分钟WAV）无法转录，API有文件大小限制
*   (补充)在累计测试了总时长约5~6个小时，大小约1.5G左右的音频后，出现下面的提示，大概率是测试的ip到上限了，换节点之后可以继续使用
    *   Thanks for trying out our speech synthesis! You have reached the limit of available requests on the landing page. You can continue, for free, by signing-up to the platform.

[](#p-6040157-h-4)结论&注意事项
-------------------------

*   优先选择MP3格式的音频，控制文件大小在300MB以下，极限情况下大概可以一次性转录2个小时多的音频，其转录时间一般不超过3分钟。如果你特别能薅，薅到(当日?周?月?)上限了，请换一个节点，然后就能接着薅了。

* * *

关于后续如何导出具体的转录内容，如果只需要转录文本，那你把json文件打开之后，把"text"的值复制下来就是了；如果你想要导出带精准时间戳的字幕文件，那可以用我之前做的那个叫"治幕"的小工具。

![](https://linux.do/user_avatar/linux.do/fuxiaomoke/48/546443_2.png)
[同人音声字幕优化导出小工具分享~\[语义&时间戳优化\]](https://linux.do/t/topic/640985/1)

> 这次再分享一个可以配合使用的音声字幕优化小工具↓↓↓
> 
> [![](https://linux.do/uploads/default/optimized/4X/5/1/0/5108c44f5985211f4cb10fcdd508a087419ea37d_2_592x500.jpeg)
> 
> 界面展示1024×864 81.6 KB
> 
> ](https://linux.do/uploads/default/original/4X/5/1/0/5108c44f5985211f4cb10fcdd508a087419ea37d.jpeg "界面展示")
> 
> [GitHub - fuxiaomoke/heal-jimaku: json->srt，基于 PyQt6 和 DeepSeek api 的同人音声字幕优化导出GUI小工具。](https://github.com/fuxiaomoke/heal-jimaku)
> 
> 本来一开始，是没打算做这个的小工具的，但是…

我回头再加一个白嫖按钮，到时候就可以直接用这个免费的api生成json，然后一键优化导出字幕了。

  

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

22

​ ​ 回复

172 浏览量 38 赞 12 用户

 [![](https://linux.do/user_avatar/linux.do/fuxiaomoke/96/546443_2.png)
 3](/u/fuxiaomoke "fuxiaomoke") 

 [![](https://linux.do/user_avatar/linux.do/koast18/96/462744_2.png)
 2](/u/koast18 "koast18")

 [![](https://linux.do/user_avatar/linux.do/ivanhanloth/96/673656_2.png)
 2](/u/IvanHanloth "IvanHanloth") 

 [![](https://linux.do/letter_avatar/lejile/96/5_d44a9b381edc88181525e3c8350177ca.png)](/u/lejile "lejile") 

 [![](https://linux.do/user_avatar/linux.do/ddgg/96/534837_2.png)](/u/ddgg "ddgg") 

阅读时间 7 分钟

[![](https://linux.do/user_avatar/linux.do/ivanhanloth/96/673656_2.png)
](/u/IvanHanloth)

[𝗡𝗲𝗼𝗮𝗻𝗱𝗮](/u/IvanHanloth)

[IvanHanloth](/u/IvanHanloth) ![](https://linux.do/images/emoji/twemoji/panda.png?v=14) 

[5 小时](/t/topic/665831/3?u=niyan2025 "发布日期")

虽然但是，佬为什么会有nsfw的标签

  

2 个回复

1

​ ​ 回复

[![](https://linux.do/letter_avatar/fengchris/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/fengchris)

[fengchris](/u/fengchris)

[5 小时](/t/topic/665831/4?u=niyan2025 "发布日期")

大佬V5

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/fuxiaomoke/96/546443_2.png)
](/u/fuxiaomoke)

[浮霄默客](/u/fuxiaomoke)

[fuxiaomoke](/u/fuxiaomoke)

 ![](https://linux.do/user_avatar/linux.do/ivanhanloth/48/673656_2.png)
 𝗡𝗲𝗼𝗮𝗻𝗱𝗮

[5 小时](/t/topic/665831/5?u=niyan2025 "发布日期")

因为测试音频的内容是 [NSFW](/tag/NSFW)

![](https://linux.do/uploads/default/original/3X/9/4/949d4d71290d75c51e81e4fc70d23246e4a9214c.png?v=14)

  

![](https://linux.do/images/emoji/twemoji/laughing.png?v=14)

laughing

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/zyf/96/539889_2.png)
](/u/zyf)

[Kosjd](/u/zyf)

[zyf](/u/zyf)一元复始 ![](https://linux.do/images/emoji/twemoji/speech_balloon.png?v=14) 

[5 小时](/t/topic/665831/6?u=niyan2025 "发布日期")

坐等捞完善 ![](https://linux.do/images/emoji/twemoji/+1.png?v=14)
 太牛啦，现在还在用deepgram白嫖呢

  

1

​ ​ 回复

[![](https://linux.do/letter_avatar/sakurawen/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/sakurawen)

[guo](/u/sakurawen)

[sakurawen](/u/sakurawen)

[4 小时](/t/topic/665831/7?u=niyan2025 "发布日期")

感谢佬的测试,测试的非常齐全~~把常见的问题都测试到了,非常感谢~

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/xdd/96/44857_2.png)
](/u/xdd)

[xdd](/u/xdd)

 ![](https://linux.do/images/emoji/twemoji/speech_balloon.png?v=14) 

[4 小时](/t/topic/665831/8?u=niyan2025 "发布日期")

感谢大佬，最近在也在研究这个，现在方案是嫖 gemini

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/pleasure1234/96/673795_2.png)
](/u/Pleasure1234)

[Pleasure1234](/u/Pleasure1234)

活跃用户 ![](https://linux.do/images/emoji/twemoji/zany_face.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/ivanhanloth/48/673656_2.png)
 𝗡𝗲𝗼𝗮𝗻𝗱𝗮

[4 小时](/t/topic/665831/9?u=niyan2025 "发布日期")

你不会是看到了nsfw就进来了吧 ![](https://linux.do/images/emoji/twemoji/face_with_hand_over_mouth.png?v=14)

  

1 个回复

​ ​ 回复

[![](https://linux.do/letter_avatar/lejile/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/lejile)

[liu](/u/lejile)

[lejile](/u/lejile)

[4 小时](/t/topic/665831/10?u=niyan2025 "发布日期")

感谢佬，要是能在这个基础上部署成网页应用就好了

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/handsome/96/477777_2.png)
](/u/handsome)

[大帅哥](/u/handsome)

[handsome](/u/handsome)种子用户 ![](https://linux.do/images/emoji/twemoji/rage.png?v=14) 

[4 小时](/t/topic/665831/11?u=niyan2025 "发布日期")

感谢大佬

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ivanhanloth/96/673656_2.png)
](/u/IvanHanloth)

[𝗡𝗲𝗼𝗮𝗻𝗱𝗮](/u/IvanHanloth)

[IvanHanloth](/u/IvanHanloth) ![](https://linux.do/images/emoji/twemoji/panda.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/pleasure1234/48/673795_2.png)
 Pleasure1234

[4 小时](/t/topic/665831/12?u=niyan2025 "发布日期")

可恶，被发现了

  

![](https://linux.do/images/emoji/twemoji/clap.png?v=14)

clap

![](https://linux.do/images/emoji/twemoji/laughing.png?v=14)

laughing

2

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/koast18/96/462744_2.png)
](/u/koast18)

[量子咸鱼K](/u/koast18)

[koast18](/u/koast18)活跃用户

[4 小时](/t/topic/665831/13?u=niyan2025 "发布日期")

这个的质量和whisper比起来如何？比如Groq提供的这个免费whisper模型。

[![](https://linux.do/uploads/default/optimized/4X/7/6/e/76e4f6f9e981f72b8be3bdbe71966afa9d0ad4db_2_690x94.png)

image2253×309 22.4 KB

](https://linux.do/uploads/default/original/4X/7/6/e/76e4f6f9e981f72b8be3bdbe71966afa9d0ad4db.png "image")

一个号每小时能转录两个小时，一天能转录八个小时。

可以用域名邮箱注册，然后拿uni-api负载均衡，所以基本上也是无限制的。

缺点就是免费账号的api一次转录传文件的话需要小于25MB，但是可以配合Cloudflare R2绕过。（先传到Cloudflare R2， 等完事了再删掉就行， A类操作一个月100w次肯定够用。或者传到其他能公开访问的地方都行。）  

[![](https://linux.do/uploads/default/optimized/4X/4/a/1/4a15453b5b598b1d589d8a4b39e726d77c91c06e_2_665x500.png)

image1047×787 66.9 KB

](https://linux.do/uploads/default/original/4X/4/a/1/4a15453b5b598b1d589d8a4b39e726d77c91c06e.png "image")

  

1 个回复

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/fuxiaomoke/96/546443_2.png)
](/u/fuxiaomoke)

[浮霄默客](/u/fuxiaomoke)

[fuxiaomoke](/u/fuxiaomoke)

 ![](https://linux.do/user_avatar/linux.do/koast18/48/462744_2.png)
 量子咸鱼K

[3 小时](/t/topic/665831/14?u=niyan2025 "发布日期")

之前的帖子里写过带时间戳的情况下转录模型效果：

![](https://linux.do/user_avatar/linux.do/fuxiaomoke/48/546443_2.png)
[基于讯飞语音转写API获取带时间戳字幕的实践](https://linux.do/t/topic/652527/1)

> 结合最近几天的了解和测试，给一个整体性结论。截至今年5月，全球顶尖的语音转录模型效果（算上时间戳）排名大致如下：
> 
> [aiOla Jargonic V2【企业级模型，拉表很恐怖，存疑】](https://aiola.ai/)
> 
> \> [elevenlabs-scribe](https://elevenlabs.io/)
> 
> \> [aistudio-gemini2.5pro](https://aistudio.google.com/)
> 
> \> whisper各种牛逼的微调 > [assemblyai](https://www.assemblyai.com/)
> 
> \>= [deepgram nova3](https://deepgram.com/)
> 
> 一些值得关注的特定领域识别效果不错的模型：
> 
> [MyMeet](https://mymeet.ai/)
> 
>   
> [Speechmatics](https://www.speechmatics.com/)
> 
>   
> [Gladia](https://www.gladia.io/)
> 
>   
> [Amazon Transcribe](https://aws.amazon.com/cn/pm/transcribe/)

所以普通的whisper-large-v3在带时间戳的情况下肯定是干不过上面那几个大哥的。

至于不带时间戳的话，elevenlabs的scribe依旧优于whisper-large-v3。

上述顶尖模型在行业标准的转录语音数据集的测试中的综合表现如下：

[![](https://linux.do/uploads/default/optimized/4X/8/f/d/8fded5df74061382d5ddc3e1aa3fc75a82e65342_2_690x235.jpeg)

image1464×499 89.8 KB

](https://linux.do/uploads/default/original/4X/8/f/d/8fded5df74061382d5ddc3e1aa3fc75a82e65342.jpeg "image")

  
![](https://linux.do/uploads/default/optimized/4X/1/4/2/14250bcf15cd1453ec6a8ff8603ccafeb7412a9c_2_690x41.png)

以英语为例，在以下几个行业标准的转录语音数据集的测试中的综合表现如下图所示。

*   **LibriSpeech** (EN Clean & Noisy)
*   **TEDLIUM V3** (TED Talks)
*   **AMI Meeting Corpus** (Conversational Meetings)

**\[WER越低，越准确\]**  

[![](https://linux.do/uploads/default/optimized/4X/1/a/0/1a06aa4e8bdc2869c411e7fad5ea99518a212718_2_690x369.jpeg)

image958×513 48.5 KB

](https://linux.do/uploads/default/original/4X/1/a/0/1a06aa4e8bdc2869c411e7fad5ea99518a212718.jpeg "image")

[![](https://linux.do/uploads/default/optimized/4X/d/1/c/d1ca36d8484fa469f782d8d26b2b573b7d5eeb69_2_690x442.jpeg)

image958×614 75.3 KB

](https://linux.do/uploads/default/original/4X/d/1/c/d1ca36d8484fa469f782d8d26b2b573b7d5eeb69.jpeg "image")

在日语方面，同样是elevenlabs的scribe优于whisper-large-v3。

在这2个日语语音数据集的测试中的综合表现如下图所示

*   **CommonVoice v.13** – 一个用于测试通用语音识别能力的标准数据集。
*   **ReazonSpeech** – 从地面电视流中收集的多样化自然日语语音集。

**\[CER越低，越准确\]**  

[![](https://linux.do/uploads/default/original/4X/6/2/b/62bbae57f081588ad334e6cbcefcd942ce627e33.jpeg)

image768×492 37.9 KB

](https://linux.do/uploads/default/original/4X/6/2/b/62bbae57f081588ad334e6cbcefcd942ce627e33.jpeg "image")

[![](https://linux.do/uploads/default/original/4X/6/a/0/6a0b1630c58bb353db5ed51b81f88c852e9bbd76.jpeg)

image768×492 37.6 KB

](https://linux.do/uploads/default/original/4X/6/a/0/6a0b1630c58bb353db5ed51b81f88c852e9bbd76.jpeg "image")

  

1 个回复

2

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/koast18/96/462744_2.png)
](/u/koast18)

[量子咸鱼K](/u/koast18)

[koast18](/u/koast18)活跃用户

 ![](https://linux.do/user_avatar/linux.do/fuxiaomoke/48/546443_2.png)
 浮霄默客

[2 小时](/t/topic/665831/15?u=niyan2025 "发布日期")

哇，很详细，感谢佬

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ddgg/96/534837_2.png)
](/u/ddgg)

[猫国王](/u/ddgg)

[ddgg](/u/ddgg)蛇来运转

[2 小时](/t/topic/665831/16?u=niyan2025 "发布日期")

非常需要带时间戳的音频转录，期待大佬更新。

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/1-debtor/96/324608_2.png)
](/u/1-debtor)

[1-debtor](/u/1-debtor)

蛇来运转

[1 小时](/t/topic/665831/17?u=niyan2025 "发布日期")

感谢 mark一下

  

1

​ ​ 回复

### 此话题将在最后一个回复的1 个月后关闭。

分享 加入书签 举报

回复

已取消置顶

​

此话题已对您取消置顶；它将以常规顺序显示

常规 您会在别人 @ 您或回复您时收到通知。

  

[

👕 岂曰无衣？与子同袍 👕️

](https://linux.do/t/topic/585559)

*   推荐
*   相关

### 新话题和未读话题

话题列表，带有按钮的列标题可以排序。
| 话题 | 回复 | 浏览量 | 活动 |
| --- | --- | --- | --- |
| [年轻人的第一台 VPS 代理服务器](/t/topic/333976/266)

 [21](/t/topic/333976/266 "您在此话题中有 21 个未读帖子")

[资源荟萃, Lv1](/c/resource/resource-lv1/83)

[软件开发](/tag/软件开发)

,[精华神帖](/tag/精华神帖)





 | [282](/t/topic/333976/1) | 11.8k | [1 天](/t/topic/333976/286) |
| [\[域名邮箱寄了\]cursor-auto-free更新了（已更新0.4.3整合包）](/t/topic/335823/345)

 [150](/t/topic/335823/345 "您在此话题中有 150 个未读帖子")

[资源荟萃, Lv1](/c/resource/resource-lv1/83)

[人工智能](/tag/人工智能)





 | [486](/t/topic/335823/1) | 19.3k | [16 天](/t/topic/335823/494) |
| [【总结踩坑】cursor-auto-free 自动化注册 cursor 0.45.x 版本使用总结](/t/topic/411698/119)

 [21](/t/topic/411698/119 "您在此话题中有 21 个未读帖子")

[资源荟萃, Lv1](/c/resource/resource-lv1/83)

[人工智能](/tag/人工智能)

,[Cursor](/tag/cursor)





 | [132](/t/topic/411698/1) | 6.1k | [3月 31 日](/t/topic/411698/139) |
| [![](https://linux.do/images/emoji/twemoji/fire.png?v=14)
【动漫汇总每天更新】丨【主题修改次数上限 正常更新中 可到新主题查看】](/t/topic/419831/38)

 [188](/t/topic/419831/38 "您在此话题中有 188 个未读帖子")

[资源荟萃, Lv1](/c/resource/resource-lv1/83)

[AFF](/tag/aff "该标签用于提醒他人本话题中存在aff链接，含有aff的链接仍需显著标明")

,[夸克网盘](/tag/夸克网盘)

,[百度网盘](/tag/百度网盘)

,[动漫](/tag/动漫)

,[移动云盘](/tag/移动云盘)

,[UC网盘](/tag/uc网盘)





 | [212](/t/topic/419831/1) | 6.4k | [3月 26 日](/t/topic/419831/225) |
| [Anthropic Docs - AskAI2API](/t/topic/428507/54)

 [20](/t/topic/428507/54 "您在此话题中有 20 个未读帖子")

[资源荟萃, Lv1](/c/resource/resource-lv1/83)

[人工智能](/tag/人工智能)





 | [72](/t/topic/428507/1) | 2.0k | [2月 16 日](/t/topic/428507/73) |

### 有 [65 个未读](/unread)

话题 和 [174 个新](/new)

话题， 或浏览[资源荟萃, Lv1](/c/resource/resource-lv1/83)

中的其他话题

Invalid date Invalid date

Settings
========

🏷️ UTags - Add usertags to links

Other Extensions
----------------

[🔗 Links Helper](https://greasyfork.org/en/scripts/464541-links-helper)

[V2EX.REP - 专注提升 V2EX 主题回复浏览体验](https://greasyfork.org/en/scripts/466589-v2ex-rep-%E4%B8%93%E6%B3%A8%E6%8F%90%E5%8D%87-v2ex-%E4%B8%BB%E9%A2%98%E5%9B%9E%E5%A4%8D%E6%B5%8F%E8%A7%88%E4%BD%93%E9%AA%8C)

[v2ex.min - V2EX Minimalist (极简风格)](https://greasyfork.org/en/scripts/463552-v2ex-min-v2ex-%E6%9E%81%E7%AE%80%E9%A3%8E%E6%A0%BC)

[Replace Ugly Avatars](https://greasyfork.org/en/scripts/472616-replace-ugly-avatars)

↑↓⇔⇧⇩