# 【Claude Code】使用 claude-code-router 快速配置第三方模型 - 开发调优 - LINUX DO
[【Claude Code】使用 claude-code-router 快速配置第三方模型 - 开发调优 - LINUX DO](https://linux.do/t/topic/787270) 

  【Claude Code】使用 claude-code-router 快速配置第三方模型 - 开发调优 - LINUX DO                                               

[跳到主要内容](#main-container)

 [![](https://linux.do/uploads/default/original/3X/9/d/9dd49731091ce8656e94433a26a3ef36062b3994.png)](/) 

[【Claude Code】使用 claude-code-router 快速配置第三方模型](/t/topic/787270)
===============================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[软件开发](/tag/软件开发)

*   ​

*    ![](https://linux.do/letter_avatar/niyan2025/96/5_d44a9b381edc88181525e3c8350177ca.png)
       [ 1 ](# "1 个未读通知") 

*   [话题](/latest "所有话题")
*   [我的帖子](/u/niyan2025/activity/drafts "我的未发布草稿")
*   [我的消息](/u/niyan2025/messages "我的个人信息")
*   [关于](/about "关于此网站的更多详细信息")
*   [即将到来的活动](/upcoming-events "即将到来的活动")
*   更多

外部链接

*   [2048](https://2048.linux.do)
*   [Status](https://status.linux.do)
*   [T-Shirt](https://shanwaiyoushan.taobao.com)
*   [Connect](https://connect.linux.do)
*   [Webmail](https://webmail.linux.do)
*   [Channel](https://t.me/linux_do_channel)
*   [Telegram](https://t.me/ja_netfilter_group)

类别

*   [开发调优](/c/develop/4 "此版块包含开发、测试、调试、部署、优化、安全等方面的内容")
*   [资源荟萃](/c/resource/14 "包括软件分享、开源仓库、视频课程、书籍等分享")
*   [文档共建](/c/wiki/42 "佬友化身翰林学士，一起来编书了。")
*   [非我莫属](/c/job/27 "学成文武艺，货与帝王家。招聘/求职分类，只能发此类信息。")
*   [读书成诗](/c/reading/32 "跟着佬友们一起在论坛读完一本书是什么体验？")
*   [扬帆起航](/c/startup/46 "扬帆起航，目标是星辰大海！")
*   [前沿快讯](/c/news/34 "前沿快讯，不出门能知天下事。")
*   [网络记忆](/c/feeds/92 "网络是有记忆的，确信！")
*   [福利羊毛](/c/welfare/36 "正经人谁花那个钱啊～ 此版块供羊毛、抽奖等福利使用。")
*   [搞七捻三](/c/gossip/11 "闲聊吹水的板块。不得讨论政治、色情等违规内容。")
*   [运营反馈](/c/feedback/2 "有关此站点、其组织、运作方式以及如何改进的讨论。")
*   [深海幽域](/c/muted/45 "冰山下的深海。帖子不会上信息流、不会被论坛搜索。")
*   [所有类别](/categories)

标签

*   [人工智能](/tag/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD)
*   [公告](/tag/%E5%85%AC%E5%91%8A)
*   [快问快答](/tag/%E5%BF%AB%E9%97%AE%E5%BF%AB%E7%AD%94)
*   [抽奖](/tag/%E6%8A%BD%E5%A5%96)
*   [精华神帖](/tag/%E7%B2%BE%E5%8D%8E%E7%A5%9E%E5%B8%96)
*   [所有标签](/tags)

*   [我的消息串](/chat/threads "我的消息串")

频道

*   [常规频道](/chat/c/general/2 "🈲 禁止在聊天频道里发送 打卡 等无意义信息，被举报会喜提 禁言1小时 。")

直接消息

*    [![](https://linux.do/user_avatar/linux.do/xronus/48/130867_2.png)  𝒜𝓃𝒾𝓋𝒾𝓍](/chat/c/%F0%9D%92%9C%F0%9D%93%83%F0%9D%92%BE%F0%9D%93%8B%F0%9D%92%BE%F0%9D%93%8D/32458 "与 𝒜𝓃𝒾𝓋𝒾𝓍 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/huan/48/293194_2.png)  焕昭君](/chat/c/%E7%84%95%E6%98%AD%E5%90%9B/43057 "与 焕昭君 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/wenjuhe/48/672301_2.png)  奇妙进化小河马🦛   ![](https://linux.do/images/emoji/twemoji/hippopotamus.png?v=14)](/chat/c/%E5%A5%87%E5%A6%99%E8%BF%9B%E5%8C%96%E5%B0%8F%E6%B2%B3%E9%A9%AC%F0%9F%A6%9B/45968 "与 奇妙进化小河马🦛 聊天") 

聊天

Default

​ ​ ​

**真诚**、**友善**、**团结**、**专业**，共建你我引以为荣之社区。[《常见问题解答》](/faq)

[

❤️ 再忍不住，也不要做这种事啊 ❤️

](https://linux.do/t/topic/482293)

[【Claude Code】使用 claude-code-router 快速配置第三方模型](/t/topic/787270)
===============================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[软件开发](/tag/软件开发)

您已选择 **0** 个帖子。

全选

取消选择

​

[7月 15 日](/t/topic/787270/1 "跳到第一个帖子")

1 / 48

7月 15 日

[12 分钟](/t/topic/787270/48)

​

[![](https://linux.do/user_avatar/linux.do/cassianvale/96/803522_2.png)
](/u/Cassianvale)

[长秋](/u/Cassianvale)[Cassianvale](/u/Cassianvale)一元复始

5

[12 小时](/t/topic/787270?u=niyan2025 "发布日期")

[](#p-7250132-claude-code-router-1)`claude-code-router` 项目地址
------------------------------------------------------------

[github.com](https://github.com/musistudio/claude-code-router)

![](https://linux.do/uploads/default/optimized/4X/7/2/0/7209557dfafec2dfaa51bebcacbdf1da998fa864_2_690x344.png)

### [GitHub - musistudio/claude-code-router: Use Claude Code as the foundation for coding...](https://github.com/musistudio/claude-code-router)

Use Claude Code as the foundation for coding infrastructure, allowing you to decide how to interact with the model while enjoying updates from Anthropic.

[](#p-7250132-h-2)使用步骤
----------------------

### [](#p-7250132-h-1-claude-3)1\. 安装 Claude 代码

```


`npm install -g @anthropic-ai/claude-code` 
```

### [](#p-7250132-h-2-claude-code-router-4)2\. 安装 claude-code-router

```


`npm install -g @musistudio/claude-code-router` 
```

### [](#p-7250132-h-3-5)3\. 生成初始配置

```


`ccr start` 
```

**提示：**  暂时随意输入值，因为我们将在下一步直接编辑配置文件，完成后按 `Ctrl+C` 退出终端。

### [](#p-7250132-h-4-6)4\. 编辑配置文件

打开配置文件(可以直接copy我的配置)

*   **linux/mac:** `~/.claude-code-router/config.json`
*   **Windows:** `C:/User/用户/.claude-code-router/config.json`

这是一个 Moonshot (Kimi k2) 官方模型和 siliconflow硅基流动 的简单配置示例:

```


`{
  "LOG": false,
  "OPENAI_API_KEY": "",
  "OPENAI_BASE_URL": "",
  "OPENAI_MODEL": "",
  "Providers": [
    {
      "name": "siliconflow",
      "api_base_url": "https://api.siliconflow.cn/v1/chat/completions",
      "api_key": "sk-xxx",
      "models": [
        "moonshotai/Kimi-K2-Instruct"
      ],
      "transformer": {
        "use": [
          [
            "maxtoken",
            {
              "max_tokens": 8192
            }
          ]
        ]
      }
    },
    {
      "name": "moonshot",
      "api_base_url": "https://api.moonshot.cn/v1/chat/completions",
      "api_key": "sk-xxx",
      "models": [
        "kimi-k2-0711-preview"
      ],
      "transformer": {
        "use": [
          "openrouter"
        ]
      }
    }
  ],
  "Router": {
    "default": "siliconflow,moonshotai/Kimi-K2-Instruct"
  }
}` 
```

### [](#p-7250132-h-6-7)6\. 启动

配置完成后，使用 ccr code 命令替代原来的 claude 命令来启动您的项目

```


`ccr code` 
```

**注意：** 

*   `transformer` 是一个关键参数，用于解决不同 LLM 提供商之间 API 格式的兼容性问题。
*   **更多参数可以去项目中查看**

配置起来很方便，分享给佬友们 ![](https://linux.do/images/emoji/twemoji/grin.png?v=14)

* * *

[@musistudio](/u/musistudio) 这个是作者 ![](https://linux.do/images/emoji/twemoji/laughing.png?v=14)

  

1 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

15

​ ​ 回复

723 浏览量 20 赞 1 链接 17 用户

 [![](https://linux.do/user_avatar/linux.do/cassianvale/96/803522_2.png)
 15](/u/Cassianvale "Cassianvale") 

 [![](https://linux.do/user_avatar/linux.do/bard/96/160432_2.png)
 6](/u/bard "bard")

 [![](https://linux.do/user_avatar/linux.do/leon_yuan/96/614757_2.png)
 6](/u/leon_yuan "leon_yuan") 

 [![](https://linux.do/letter_avatar/musistudio/96/5_d44a9b381edc88181525e3c8350177ca.png)
 5](/u/musistudio "musistudio") 

 [![](https://linux.do/user_avatar/linux.do/marre/96/690827_2.png)
 2](/u/marre "marre") 

阅读时间 4 分钟

[![](https://linux.do/user_avatar/linux.do/llllllll/96/49513_2.png)
](/u/llllllll)

[llllllll](/u/llllllll)种子用户

[12 小时](/t/topic/787270/2?u=niyan2025 "发布日期")

k2 官方能直接接入， 并不需要 claude-code router

  

2 个回复

![](https://linux.do/images/emoji/twemoji/laughing.png?v=14)

laughing

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

3

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ru_sirius/96/535903_2.png)
](/u/RU_Sirius)

[RU\_Sirius](/u/RU_Sirius)

[12 小时](/t/topic/787270/3?u=niyan2025 "发布日期")

claude code好用吗![](https://linux.do/images/emoji/twemoji/eyes.png?v=14)

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cassianvale/96/803522_2.png)
](/u/Cassianvale)

[长秋](/u/Cassianvale)[Cassianvale](/u/Cassianvale)一元复始

 ![](https://linux.do/user_avatar/linux.do/llllllll/48/49513_2.png)
 llllllll

[12 小时](/t/topic/787270/4?u=niyan2025 "发布日期")

啊 ![](https://linux.do/images/emoji/twemoji/rofl.png?v=14)
 我还不知道

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/wusix/96/713542_2.png)
](/u/WuSix)

[WuSix](/u/WuSix)

 ![](https://linux.do/user_avatar/linux.do/llllllll/48/49513_2.png)
 llllllll

[11 小时](/t/topic/787270/5?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/llllllll/48/49513_2.png)
 llllllll:

> 接接入， 并不需要 claude-code router

这个可以帮助用硅基流动的K2了，还是有好处的

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/horrah/96/589430_2.png)
](/u/horrah)

[horrah](/u/horrah)Regular

[11 小时](/t/topic/787270/6?u=niyan2025 "发布日期")

kimi k2的key是免费的（2api那个）还是得自己单独买呀

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cassianvale/96/803522_2.png)
](/u/Cassianvale)

[长秋](/u/Cassianvale)[Cassianvale](/u/Cassianvale)一元复始

 ![](https://linux.do/user_avatar/linux.do/horrah/48/589430_2.png)
 horrah

[11 小时](/t/topic/787270/7?u=niyan2025 "发布日期")

k2我用的是自己买的官方key

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/suxiaomi/96/537233_2.png)
](/u/suxiaomi)

[我爱Java](/u/suxiaomi)[suxiaomi](/u/suxiaomi)海纳百川 ![](https://linux.do/images/emoji/twemoji/hamburger.png?v=14) 

[11 小时](/t/topic/787270/8?u=niyan2025 "发布日期")

transformer这个配置是干嘛的

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/bard/96/160432_2.png)
](/u/bard)

[bard](/u/bard) ![](https://linux.do/uploads/default/original/3X/f/3/f33334f696ccb1c1376b2d4eb38e79e86d192b26.png?v=14) 

[11 小时](/t/topic/787270/9?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/cassianvale/48/803522_2.png)
 长秋:

> ```null
> "transformer": {
>         "use": ["openrouter"]
>       }
> 
> ```

这句话是做什么用的？

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cassianvale/96/803522_2.png)
](/u/Cassianvale)

[长秋](/u/Cassianvale)[Cassianvale](/u/Cassianvale)一元复始

 ![](https://linux.do/user_avatar/linux.do/bard/48/160432_2.png)
 bard

[11 小时](/t/topic/787270/10?u=niyan2025 "发布日期")

我也不太明白，不加这个就会报400

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/bard/96/160432_2.png)
](/u/bard)

[bard](/u/bard) ![](https://linux.do/uploads/default/original/3X/f/3/f33334f696ccb1c1376b2d4eb38e79e86d192b26.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/cassianvale/48/803522_2.png)
 长秋

[11 小时](/t/topic/787270/11?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/cassianvale/48/803522_2.png)
 长秋:

> 不加这个就会报400

我看项目demo 只写了一句。 不是很明白 ![](https://linux.do/images/emoji/twemoji/joy.png?v=14)
 。

  

2 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cassianvale/96/803522_2.png)
](/u/Cassianvale)

[长秋](/u/Cassianvale)[Cassianvale](/u/Cassianvale)一元复始

 ![](https://linux.do/user_avatar/linux.do/bard/48/160432_2.png)
 bard

[11 小时](/t/topic/787270/12?u=niyan2025 "发布日期")

我昨天测试了好久才测试出来，必须得加这玩意 ![](https://linux.do/images/emoji/twemoji/smiling_face_with_tear.png?v=14)

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cassianvale/96/803522_2.png)
](/u/Cassianvale)

[长秋](/u/Cassianvale)[Cassianvale](/u/Cassianvale)一元复始

 ![](https://linux.do/user_avatar/linux.do/bard/48/160432_2.png)
 bard

[11 小时](/t/topic/787270/13?u=niyan2025 "发布日期")

[![](https://linux.do/uploads/default/original/4X/6/e/8/6e8235e24007ba306196df31f209395213d546e6.png)

image1290×821 76.9 KB

](https://linux.do/uploads/default/original/4X/6/e/8/6e8235e24007ba306196df31f209395213d546e6.png "image")

  
应该是这部分，相当于一个格式转换器，解决不同 LLM 提供商之间的 API 格式兼容性问题

Claude Code 请求 → Transformer → LLM 提供商 API  
LLM 提供商响应 → Transformer → Claude Code 期望格式

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/bard/96/160432_2.png)
](/u/bard)

[bard](/u/bard) ![](https://linux.do/uploads/default/original/3X/f/3/f33334f696ccb1c1376b2d4eb38e79e86d192b26.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/cassianvale/48/803522_2.png)
 长秋

[10 小时](/t/topic/787270/14?u=niyan2025 "发布日期")

嗯 看起来我也得试试了。虽然他写了一段。 具体参数还是不明白。  
谢谢

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cassianvale/96/803522_2.png)
](/u/Cassianvale)

[长秋](/u/Cassianvale)[Cassianvale](/u/Cassianvale)一元复始

 ![](https://linux.do/user_avatar/linux.do/bard/48/160432_2.png)
 bard

[10 小时](/t/topic/787270/15?u=niyan2025 "发布日期")

[@musistudio](/u/musistudio)/llms 在这个包里面实现的

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cassianvale/96/803522_2.png)
](/u/Cassianvale)

[长秋](/u/Cassianvale)[Cassianvale](/u/Cassianvale)一元复始

 ![](https://linux.do/user_avatar/linux.do/suxiaomi/48/537233_2.png)
 我爱Java

[10 小时](/t/topic/787270/16?u=niyan2025 "发布日期")

是个转换器

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/bard/96/160432_2.png)
](/u/bard)

[bard](/u/bard) ![](https://linux.do/uploads/default/original/3X/f/3/f33334f696ccb1c1376b2d4eb38e79e86d192b26.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/cassianvale/48/803522_2.png)
 长秋

[10 小时](/t/topic/787270/17?u=niyan2025 "发布日期")

嗯 我想可能如果都是使用OAI的API 应该不考虑这问题。这看起来更像是厂商间不同的转换。

等我遇到问题再看代码 ![](https://linux.do/images/emoji/twemoji/joy.png?v=14)
。

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/handsome/96/736205_2.png)
](/u/handsome)

[大帅哥](/u/handsome)[handsome](/u/handsome)种子用户 ![](https://linux.do/images/emoji/twemoji/rage.png?v=14) 

[10 小时](/t/topic/787270/18?u=niyan2025 "发布日期")

感谢大佬

  

​ ​ 回复

[![](https://linux.do/letter_avatar/musistudio/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/musistudio)

[musistudio](/u/musistudio)

 ![](https://linux.do/user_avatar/linux.do/bard/48/160432_2.png)
 bard

[10 小时](/t/topic/787270/19?u=niyan2025 "发布日期")

即使是兼容oai不同的厂商不同的模型也会有区别，比如同样是deepseek v3 0324的模型你用官网api的话max\_tokens在8k左右，而你用火山引擎的话max\_tokens的值会会大很多。  
transformer就是提供个接口去动态调整这些参数，还有响应的格式

  

2 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/suxiaomi/96/537233_2.png)
](/u/suxiaomi)

[我爱Java](/u/suxiaomi)[suxiaomi](/u/suxiaomi)海纳百川 ![](https://linux.do/images/emoji/twemoji/hamburger.png?v=14) 

 ![](https://linux.do/letter_avatar/musistudio/48/5_d44a9b381edc88181525e3c8350177ca.png)
 musistudio

[10 小时](/t/topic/787270/20?u=niyan2025 "发布日期")

文档里面可以加上说明和选项吗大佬

  

1 个回复

​ ​ 回复

Invalid date Invalid date

↑↓⇔⇧⇩