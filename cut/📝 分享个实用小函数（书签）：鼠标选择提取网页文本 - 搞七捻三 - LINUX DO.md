# 📝 分享个实用小函数（书签）：鼠标选择提取网页文本 - 搞七捻三 - LINUX DO
[📝 分享个实用小函数（书签）：鼠标选择提取网页文本 - 搞七捻三 - LINUX DO](https://linux.do/t/topic/896599) 

  📝 分享个实用小函数（书签）：鼠标选择提取网页文本 - 搞七捻三 - LINUX DO                                                             

Constants loaded at 2025-08-25T20:20:56.509Z

  

[跳到主要内容](#main-container)

子系统

*   [Connect](https://connect.linux.do "LINUX DO Connect 账号连接系统。")
*   [Webmail](https://webmail.linux.do/ "LINUX DO Mail 系统。")
*   [Lottery](https://lottery.linux.do/ "LINUX DO 抽奖系统。")

元宇宙

*   [导航站](https://nav.linux.do "LINUX DO 相关服务导航站。")
*   [Wiki站](https://wiki.linux.do "LINUX DO Wiki 系统。")
*   [分发站](https://cdk.linux.do "LINUX DO 分发站，福利多多。")

其他

*   [2048](https://2048.linux.do "一起来挑战、打榜经典2048小游戏。")
*   [T-Shirt](https://shanwaiyoushan.taobao.com "LINUX DO元气T+POLO：社交新名片。")

 [![](https://linux.do/uploads/default/original/4X/c/c/d/ccd8c210609d498cbeb3d5201d4c259348447562.png)](/) 

 [![](https://linux.do/images/emoji/twemoji/memo.png?v=14)
 分享个实用小函数（书签）：鼠标选择提取网页文本](/t/topic/896599)  
=======================================================================================================

[搞七捻三](/c/gossip/11)

[人工智能](/tag/人工智能),[Chrome](/tag/chrome),[JavaScript](/tag/javascript)

*   ​

*    ![](https://linux.do/letter_avatar/niyan2025/144/5_d44a9b381edc88181525e3c8350177ca.png)
       [ 5 ](# "5 个未读通知") 

*   [话题](/latest "所有话题")
*   [我的帖子](/u/niyan2025/activity/drafts "我的未发布草稿")
*   [我的消息](/u/niyan2025/messages "我的个人消息")
*   [关于](/about "关于此网站的更多详细信息")
*   [近期活动](/upcoming-events "近期活动")
*   更多

类别

*   [开发调优](/c/develop/4 "此版块包含开发、测试、调试、部署、优化、安全等方面的内容。")
*   [资源荟萃](/c/resource/14 "包括软件分享、开源仓库、视频课程、书籍等分享。")
*   [网盘资源](/c/resource/cloud-asset/94 "网盘资源专用类别，主帖不限时编辑。")
*   [文档共建](/c/wiki/42 "佬友化身翰林学士，一起来编书了。")
*   [非我莫属](/c/job/27 "学成文武艺，货与帝王家。招聘/求职分类，只能发此类信息。")
*   [读书成诗](/c/reading/32 "跟着佬友们一起在论坛读完一本书是什么体验？")
*   [扬帆起航](/c/startup/46 "扬帆起航，目标是星辰大海！此为推广版块。")
*   [前沿快讯](/c/news/34 "前沿快讯，不出门能知天下事。")
*   [网络记忆](/c/feeds/92 "网络是有记忆的，确信！")
*   [福利羊毛](/c/welfare/36 "正经人谁花那个钱啊～ 此版块供羊毛、抽奖等福利使用。")
*   [搞七捻三](/c/gossip/11 "闲聊吹水的板块。不得讨论政治、色情等违规内容。")
*   [运营反馈](/c/feedback/2 "有关此网站、其组织、运作方式以及如何改进的讨论。")
*   [深海幽域](/c/muted/45 "冰山下的深海。帖子不会上信息流、不会被论坛搜索。")
*   [所有类别](/categories)

标签

*   [人工智能](/tag/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD)
*   [公告](/tag/%E5%85%AC%E5%91%8A)
*   [原创](/tag/%E5%8E%9F%E5%88%9B "高质量原创帖子（非AI生成、润色内容，非洗稿、搬运内容）可用。")
*   [快问快答](/tag/%E5%BF%AB%E9%97%AE%E5%BF%AB%E7%AD%94)
*   [抽奖](/tag/%E6%8A%BD%E5%A5%96)
*   [精华神帖](/tag/%E7%B2%BE%E5%8D%8E%E7%A5%9E%E5%B8%96)
*   [集中帖](/tag/%E9%9B%86%E4%B8%AD%E5%B8%96 "这里是一些社区开启的专题集中帖。&lt;br&gt;存在集中帖时，在帖子集中讨论，不要另开新帖。")
*   [所有标签](/tags)

*   [我的消息串](/chat/threads "我的消息串")

频道

*   [常规频道](/chat/c/general/2 "🈲 禁止在聊天频道里发送 打卡 等无意义信息，被举报会喜提 禁言1小时 。")

直接消息

*    [![](https://linux.do/user_avatar/linux.do/daster/72/898540_2.png)  Daster](/chat/c/daster/78035 "与 Daster 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/xronus/72/130867_2.png)  𝒜𝓃𝒾𝓋𝒾𝓍](/chat/c/%F0%9D%92%9C%F0%9D%93%83%F0%9D%92%BE%F0%9D%93%8B%F0%9D%92%BE%F0%9D%93%8D/32458 "与 𝒜𝓃𝒾𝓋𝒾𝓍 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/huan/72/864820_2.png)  焕昭君](/chat/c/%E7%84%95%E6%98%AD%E5%90%9B/43057 "与 焕昭君 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/wenjuhe/72/672301_2.png)  奇妙进化小河马🦛   ![](https://linux.do/images/emoji/twemoji/hippopotamus.png?v=14)](/chat/c/%E5%A5%87%E5%A6%99%E8%BF%9B%E5%8C%96%E5%B0%8F%E6%B2%B3%E9%A9%AC%F0%9F%A6%9B/45968 "与 奇妙进化小河马🦛 聊天") 

聊天

Default

​ ​ ​

**真诚**、**友善**、**团结**、**专业**，共建你我引以为荣之社区。[《常见问题解答》](/faq)

 [![](https://linux.do/images/emoji/twemoji/memo.png?v=14)
 分享个实用小函数（书签）：鼠标选择提取网页文本](/t/topic/896599) 
======================================================================================================

[搞七捻三](/c/gossip/11)

[人工智能](/tag/人工智能),[Chrome](/tag/chrome),[JavaScript](/tag/javascript)

您已选择 **0** 个帖子。

全选

取消选择

206 浏览量 27 赞 12 用户

 [![](https://linux.do/letter_avatar/ccy/144/5_d44a9b381edc88181525e3c8350177ca.png)
 2](/u/ccy "ccy") 

 [![](https://linux.do/user_avatar/linux.do/qiner/144/908142_2.png)
 2](/u/Qiner "Qiner")

 [![](https://linux.do/user_avatar/linux.do/showyoubetter/144/306149_2.png)](/u/showyoubetter "showyoubetter") 

 [![](https://linux.do/user_avatar/linux.do/pluto233/144/895705_2.png)](/u/pluto233 "pluto233") 

 [![](https://linux.do/user_avatar/linux.do/howecc/144/845765_2.png)](/u/howecc "howecc") 

​

[8月 24 日](/t/topic/896599/1 "跳到第一个帖子")

1 / 14

8月 24 日

[3 小时](/t/topic/896599/14)

​

 [![](https://linux.do/user_avatar/linux.do/qiner/144/908142_2.png)](/u/qiner) 

[林黛玉倒拔垂杨柳](/u/qiner) [Qiner](/u/qiner) 无所不知

[17 小时](/t/topic/896599?u=niyan2025 "发布日期")

(\\ \_ /)  
( ･-･)  
/っ ![](https://linux.do/images/emoji/twemoji/hot_beverage.png?v=14)
   就刚才的工作使用场景，觉得还挺实用。![](https://linux.do/images/emoji/twemoji/down_left_arrow.png?v=14)

[![](https://linux.do/uploads/default/optimized/4X/9/f/e/9fe84444636bf48f03a007da4623ea05c41cb5ee_2_690x462.jpeg)

PixPin\_2025-08-25\_10-54-091154×774 217 KB

](https://linux.do/uploads/default/original/4X/9/f/e/9fe84444636bf48f03a007da4623ea05c41cb5ee.jpeg "PixPin_2025-08-25_10-54-09")

↑ 简而言之我想把整个列表投喂给 AI 让帮起名，虽然栏目都是文本但不好拖拽点中即跳转、滚动截屏也能但稍微麻烦点而且 OCR 处理奇怪颜文字那些也容易有误差。

所以点一下这个书签，会进入鼠标选择状态：

[![](https://linux.do/uploads/default/optimized/4X/3/e/b/3ebb079fc36921d129a6e7d0e65496751505963b_2_335x500.png)

PixPin\_2025-08-25\_10-54-39383×571 58.5 KB

](https://linux.do/uploads/default/original/4X/3/e/b/3ebb079fc36921d129a6e7d0e65496751505963b.png "PixPin_2025-08-25_10-54-39")

 

[![](https://linux.do/uploads/default/optimized/4X/7/f/e/7fef2150b2a4f2121c3cc37eb25d9de651eb8ccb_2_335x500.png)

PixPin\_2025-08-25\_10-54-48383×571 55.9 KB

](https://linux.do/uploads/default/original/4X/7/f/e/7fef2150b2a4f2121c3cc37eb25d9de651eb8ccb.png "PixPin_2025-08-25_10-54-48")

光标置于不同 DOM 会实时显示范围，所见范围就是整个 DOM（包括不可见的 Scrollbar 下面）的文本捕获。

左键点击后就可以复制到剪贴板：

[![](https://linux.do/uploads/default/original/4X/0/7/3/073de1f006a2dec5e8049cceea959dfeb61641b3.png)

PixPin\_2025-08-25\_10-55-20160×345 4.31 KB

](https://linux.do/uploads/default/original/4X/0/7/3/073de1f006a2dec5e8049cceea959dfeb61641b3.png "PixPin_2025-08-25_10-55-20")

(\\ \_ /)  
( ･-･)  
/っ ![](https://linux.do/images/emoji/twemoji/watermelon.png?v=14)
   就是这样。源码 ↓

```


``javascript半角冒号(function(){let removeDuplicates=true;let selectedElement=null;let overlay=null;function createOverlay(){overlay=document.createElement('div');overlay.style.cssText='position:fixed;top:0;left:0;width:100%;height:100%;z-index:999999;pointer-events:none;';document.body.appendChild(overlay)}function highlightElement(element){if(!element)return;const rect=element.getBoundingClientRect();overlay.style.cssText+=`border:2px solid red;background:rgba(255,0,0,0.1);top:${rect.top+window.scrollY}px;left:${rect.left+window.scrollX}px;width:${rect.width}px;height:${rect.height}px;position:absolute;pointer-events:none;z-index:999999;`}function getTextNodes(element){let textNodes=removeDuplicates?new Set():[];let walker=document.createTreeWalker(element,NodeFilter.SHOW_TEXT,null,false);let node;while(node=walker.nextNode()){if(node.textContent.trim()){if(removeDuplicates){textNodes.add(node.textContent.trim())}else{textNodes.push(node.textContent.trim())}}}return removeDuplicates?Array.from(textNodes):textNodes}function copyToClipboard(text){const textarea=document.createElement(%27textarea%27);textarea.value=text;document.body.appendChild(textarea);textarea.select();document.execCommand(%27copy%27);document.body.removeChild(textarea)}function handleClick(e){e.preventDefault();e.stopPropagation();selectedElement=e.target;const textNodes=getTextNodes(selectedElement);const content=textNodes.join(%27\n%27);copyToClipboard(content);if(overlay)overlay.remove();document.removeEventListener(%27click%27,handleClick,true);document.removeEventListener(%27mouseover%27,handleMouseOver,true);alert(%27Text content copied to clipboard!%27)}function handleMouseOver(e){highlightElement(e.target)}createOverlay();document.addEventListener(%27click%27,handleClick,true);document.addEventListener(%27mouseover%27,handleMouseOver,true);})();`` 
```

↑ 手动把半角冒号改回 `:` 因为直接写发帖会 403。

存 Chrome 书签，需要用的时候点一下就行，书签名随意 ![](https://linux.do/images/emoji/twemoji/down_left_arrow.png?v=14)

[![](https://linux.do/uploads/default/optimized/4X/8/3/2/832aec84333f6319da14674d177599f74d149d9f_2_487x500.png)

PixPin\_2025-08-25\_10-56-31526×540 31.2 KB

](https://linux.do/uploads/default/original/4X/8/3/2/832aec84333f6319da14674d177599f74d149d9f.png "PixPin_2025-08-25_10-56-31")

> 函数开头的 `removeDuplicates` 是去重开关，因为 HTML 列表结构经常有不可见的那些重复声明。不需要去重的话把这个参数值改为 false 即可。

  

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

15

​

​ ​ 回复

206 浏览量 27 赞 12 用户

 [![](https://linux.do/letter_avatar/ccy/144/5_d44a9b381edc88181525e3c8350177ca.png)
 2](/u/ccy "ccy") 

 [![](https://linux.do/user_avatar/linux.do/qiner/144/908142_2.png)
 2](/u/Qiner "Qiner")

 [![](https://linux.do/user_avatar/linux.do/showyoubetter/144/306149_2.png)](/u/showyoubetter "showyoubetter") 

 [![](https://linux.do/user_avatar/linux.do/pluto233/144/895705_2.png)](/u/pluto233 "pluto233") 

 [![](https://linux.do/user_avatar/linux.do/howecc/144/845765_2.png)](/u/howecc "howecc") 

 [![](https://linux.do/user_avatar/linux.do/handsome/144/736205_2.png)](/u/handsome) 

[大帅哥](/u/handsome) [handsome](/u/handsome) 种子用户  ![](https://linux.do/images/emoji/twemoji/rage.png?v=14)       

[17 小时](/t/topic/896599/2?u=niyan2025 "发布日期")

你也太强了！

  

![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14)

tieba\_087

1

​

​ ​ 回复

 [![](https://linux.do/user_avatar/linux.do/zsfxs/144/242973_2.png)](/u/zsfxs) 

[龙小云](/u/zsfxs) [zsfxs](/u/zsfxs)  ![](https://linux.do/uploads/default/original/3X/7/2/72ba0e5d31173adbe60ad1a37639bae16be1eec6.png?v=14)       

[17 小时](/t/topic/896599/3?u=niyan2025 "发布日期")

确实好用 ![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

  

![](https://linux.do/images/emoji/twemoji/clap.png?v=14)

clap

1

​

​ ​ 回复

 [![](https://linux.do/user_avatar/linux.do/pluto233/144/895705_2.png)](/u/pluto233)  

[pluto233](/u/pluto233)

[16 小时](/t/topic/896599/4?u=niyan2025 "发布日期")

感谢分享喵~

  

1

​

​ ​ 回复

 [![](https://linux.do/user_avatar/linux.do/howecc/144/845765_2.png)](/u/howecc) 

[howecc](/u/howecc) 一元复始

[15 小时](/t/topic/896599/5?u=niyan2025 "发布日期")

谢谢分享

  

1

​

​ ​ 回复

 [![](https://linux.do/letter_avatar/supersonic_ai/144/5_d44a9b381edc88181525e3c8350177ca.png)](/u/supersonic_ai)  

[超音速](/u/supersonic_ai) [supersonic\_ai](/u/supersonic_ai)

[15 小时](/t/topic/896599/6?u=niyan2025 "发布日期")

谢谢大佬 分享

  

1

​

​ ​ 回复

 [![](https://linux.do/user_avatar/linux.do/illiteracy/144/431943_2.png)](/u/illiteracy) 

[zx](/u/illiteracy) [illiteracy](/u/illiteracy) 活跃用户  ![](https://linux.do/images/emoji/twemoji/soccer_ball.png?v=14)       

[14 小时](/t/topic/896599/7?u=niyan2025 "发布日期")

我之前都是开发者模式用鼠标去找。。。。

  

1 个回复

​

​ ​ 回复

 [![](https://linux.do/user_avatar/linux.do/qiner/144/908142_2.png)](/u/qiner) 

[林黛玉倒拔垂杨柳](/u/qiner) [Qiner](/u/qiner) 无所不知

 ![](https://linux.do/user_avatar/linux.do/illiteracy/72/431943_2.png)
 zx 

[14 小时](/t/topic/896599/8?u=niyan2025 "发布日期")

![](https://linux.do/uploads/default/original/3X/3/3/3339b15ea7c025039809fab82a3b3e4d31f80b80.png?v=14)
 F12 检查元素要清理标签 ~当然连标签也一起投喂也不是不行就是臃肿点~

  

​

​ ​ 回复

 [![](https://linux.do/user_avatar/linux.do/nomad/144/278825_2.png)](/u/nomad)  

[Nomad](/u/nomad)

[14 小时](/t/topic/896599/9?u=niyan2025 "发布日期")

好用, 第一次知道可以添加脚本到书签里面, 感谢佬友

  

1

​

​ ​ 回复

 [![](https://linux.do/letter_avatar/cheyne/144/5_d44a9b381edc88181525e3c8350177ca.png)](/u/cheyne)  

[Cheyne](/u/cheyne)

[14 小时](/t/topic/896599/10?u=niyan2025 "发布日期")

更新js书签功能：

1.  保留排版结构位置
2.  把文本超链接的内容，以markdown的格式附在该粘贴文本后面。

```


``javascript替换为冒号void function(){const e="  ";let t=null,o=null;function n(l,d){let s="";if(l.nodeType===Node.ELEMENT_NODE){const a=window.getComputedStyle(l);if("none"===a.display||"hidden"===a.visibility)return"";if(["SCRIPT","STYLE","NOSCRIPT"].includes(l.tagName.toUpperCase()))return""}if(l.nodeType===Node.TEXT_NODE){const r=l.textContent.trim();return r?r:""}let i="";l.childNodes&&l.childNodes.length>0&&l.childNodes.forEach(a=>{i+=n(a,d+1)});const c=l.tagName?l.tagName.toUpperCase():"";return"A"===c&&l.href?s+=`[${i.trim()}](${l.href})`:function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e).display;return["block","flex","grid","list-item","table"].includes(t)}(l)&&i.trim()?s+="\n"+e.repeat(d)+i.trim()+"\n":"LI"===c?s+="\n"+e.repeat(d)+"- "+i.trim():s+=i,s.replace(/\n\s*\n/g,"\n")}function l(){(t=document.createElement("div")).style.cssText="position:absolute;box-sizing:border-box;border:2px solid #007bff;background:rgba(0,123,255,.1);z-index:999999;pointer-events:none;transition:all .1s ease-in-out",(o=document.createElement("div")).style.cssText="position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background-color:#333;color:white;padding:10px 20px;border-radius:5px;z-index:1000000;font-family:sans-serif;font-size:14px",o.textContent="移动鼠标选择元素，单击复制，按 ESC 取消",document.body.appendChild(t),document.body.appendChild(o)}function d(){t&&t.remove(),o&&o.remove(),document.removeEventListener("click",i,!0),document.removeEventListener("mouseover",s,!0),document.removeEventListener("keydown",a,!0)}function s(e){(function(e){if(!e||!t)return;const o=e.getBoundingClientRect();t.style.top=`${o.top+window.scrollY}px`,t.style.left=`${o.left+window.scrollX}px`,t.style.width=`${o.width}px`,t.style.height=`${o.height}px`})(e.target)}function i(e){e.preventDefault(),e.stopPropagation();const l=e.target,a=n(l,0).trim();a?navigator.clipboard.writeText(a).then(()=>{t&&(t.style.display="none"),o.textContent="✅ 已复制到剪贴板！",setTimeout(d,1200)}).catch(e=>{o.textContent=`❌ 复制失败: ${e}`,setTimeout(d,2e3)}):(o.textContent="❌ 未找到可复制的文本内容。",setTimeout(d,2e3))}function a(e){"Escape"===e.key&&d()}l(),document.addEventListener("click",i,!0),document.addEventListener("mouseover",s,!0),document.addEventListener("keydown",a,!0)}();`` 
```

使用仍然把“替换为冒号”改为:

  

1 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

3

​

​ ​ 回复

分享 加入书签 举报

回复

跟踪 由于您[阅读过此话题](/u/niyan2025/preferences/notifications)，您将看到新回复的数量。

  

*   推荐
*   相关

### 新话题和未读话题

话题列表，带有按钮的列标题可以排序。
| 话题 | 回复 | 浏览量 | 活动 |
| --- | --- | --- | --- |
| [【论文精听】利用NotebookLM制作学术播客](/t/topic/797477/10)  [59](/t/topic/797477/10 "您在此话题中有 59 个未读帖子")

[搞七捻三](/c/gossip/11)

[人工智能](/tag/人工智能)



 | [67](/t/topic/797477/1) | 1.6k | [9 小时](/t/topic/797477/68) |
| [Gemini api被盗刷](/t/topic/894503/43)  [18](/t/topic/894503/43 "您在此话题中有 18 个未读帖子")

[搞七捻三](/c/gossip/11)

[人工智能](/tag/人工智能)



 | [59](/t/topic/894503/1) | 1.3k | [11 小时](/t/topic/894503/60) |
| [分享一个自用沉浸式翻译prompt（更新）](/t/topic/776678/41)  [73](/t/topic/776678/41 "您在此话题中有 73 个未读帖子")

[搞七捻三](/c/gossip/11)

[人工智能](/tag/人工智能)



 | [112](/t/topic/776678/1) | 3.4k | [2 天](/t/topic/776678/113) |
| [AI放大了穷人富人之间的分水岭.](/t/topic/891292/7)  [50](/t/topic/891292/7 "您在此话题中有 50 个未读帖子")

[搞七捻三](/c/gossip/11)

[纯水](/tag/纯水),[人工智能](/tag/人工智能)



 | [54](/t/topic/891292/1) | 2.2k | [3 天](/t/topic/891292/56) |
| [各位佬友，我想让ChatGPT帮我预习和复习，能给我一些建议吗？](/t/topic/858165/15)  [11](/t/topic/858165/15 "您在此话题中有 11 个未读帖子")

[搞七捻三](/c/gossip/11)

[快问快答](/tag/快问快答),[人工智能](/tag/人工智能),[ChatGPT](/tag/chatgpt),[OpenAI](/tag/openai)



 | [24](/t/topic/858165/1) | 267 | [3 天](/t/topic/858165/25) |

### 有 [169 个未读](/unread)话题 和 [158 个新](/new)话题， 或浏览[搞七捻三](/c/gossip/11)中的其他话题

LINUX DO

Where possible begins.

新人必读

*   [注册须知](/t/topic/545650 "写给即将成为佬友的佬友们")
*   [萌新指南](/t/topic/26306 "萌新论坛指南")
*   [社区LOGO](/t/topic/120845 "【最终帖】关于新LOGO你想知道的都在这里")

信任等级

*   [等级概述](/t/topic/2460 "【新人请看】了解Discourse信任度")
*   [等级权限](/t/topic/18797 "Discourse 论坛权限等级表")

社区路线

*   [向左向右](https://linux.do/t/topic/188585 "向左还是向右的路线问题")
*   [数字花园](https://linux.do/t/topic/847468 "《秘密花园园丁邀请函》")

版块之四

*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")

版块之五

*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")

版块之六

*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")

[Privacy](/privacy) [ToS](/tos) [About](/about) [Status](https://status.linux.do)

Invalid date Invalid date

翻至末尾↑↓⇔⇧⇩