# 微信竟然还能这么玩？AI自动回复+群聊秒响应，朋友以为我开了挂！ - 开发调优 - LINUX DO
[微信竟然还能这么玩？AI自动回复+群聊秒响应，朋友以为我开了挂！ - 开发调优 - LINUX DO](https://linux.do/t/topic/745813/7) 

  微信竟然还能这么玩？AI自动回复+群聊秒响应，朋友以为我开了挂！ - 开发调优 - LINUX DO                                              

[跳到主要内容](#main-container)

 [![](https://linux.do/uploads/default/original/3X/9/d/9dd49731091ce8656e94433a26a3ef36062b3994.png)](/) 

[微信竟然还能这么玩？AI自动回复+群聊秒响应，朋友以为我开了挂！](/t/topic/745813)


=====================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能)

,[AFF](/tag/aff "该标签用于提醒他人本话题中存在aff链接，含有aff的链接仍需显著标明")

*   ​

*    ![](https://linux.do/letter_avatar/niyan2025/96/5_d44a9b381edc88181525e3c8350177ca.png) 

*   [话题](/latest "所有话题")
*   [我的帖子](/u/niyan2025/activity/drafts "我的未发布草稿")
*   [关于](/about "关于此网站的更多详细信息")
*   [即将到来的活动](/upcoming-events "即将到来的活动")
*   更多

外部链接

*   [2048](https://2048.linux.do)
*   [Status](https://status.linux.do)
*   [T-Shirt](https://shanwaiyoushan.taobao.com)
*   [Connect](https://connect.linux.do)
*   [Webmail](https://webmail.linux.do)
*   [Channel](https://t.me/linux_do_channel)
*   [Telegram](https://t.me/ja_netfilter_group)

类别

*   [开发调优](/c/develop/4 "此版块包含开发、测试、调试、部署、优化、安全等方面的内容")
*   [资源荟萃](/c/resource/14 "包括软件分享、开源仓库、视频课程、书籍等分享")
*   [文档共建](/c/wiki/42 "佬友化身翰林学士，一起来编书了。")
*   [非我莫属](/c/job/27 "学成文武艺，货与帝王家。招聘/求职分类，只能发此类信息。")
*   [读书成诗](/c/reading/32 "跟着佬友们一起在论坛读完一本书是什么体验？")
*   [扬帆起航](/c/startup/46 "扬帆起航，目标是星辰大海！")
*   [前沿快讯](/c/news/34 "前沿快讯，不出门能知天下事。")
*   [网络记忆](/c/feeds/92 "网络是有记忆的，确信！")
*   [福利羊毛](/c/welfare/36 "正经人谁花那个钱啊～ 此版块供羊毛、抽奖等福利使用。")
*   [搞七捻三](/c/gossip/11 "闲聊吹水的板块。不得讨论政治、色情等违规内容。")
*   [运营反馈](/c/feedback/2 "有关此站点、其组织、运作方式以及如何改进的讨论。")
*   [深海幽域](/c/muted/45 "冰山下的深海。帖子不会上信息流、不会被论坛搜索。")
*   [所有类别](/categories)

标签

*   [人工智能](/tag/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD)
*   [公告](/tag/%E5%85%AC%E5%91%8A)
*   [快问快答](/tag/%E5%BF%AB%E9%97%AE%E5%BF%AB%E7%AD%94)
*   [抽奖](/tag/%E6%8A%BD%E5%A5%96)
*   [精华神帖](/tag/%E7%B2%BE%E5%8D%8E%E7%A5%9E%E5%B8%96)
*   [所有标签](/tags)

消息

*   [收件箱](/u/niyan2025/messages)

*   [我的消息串](/chat/threads "我的消息串")

频道

*   [常规频道](/chat/c/general/2 "🈲 禁止在聊天频道里发送 打卡 等无意义信息，被举报会喜提 禁言1小时 。")

直接消息

*    [![](https://linux.do/user_avatar/linux.do/xronus/48/130867_2.png)  𝒜𝓃𝒾𝓋𝒾𝓍](/chat/c/%F0%9D%92%9C%F0%9D%93%83%F0%9D%92%BE%F0%9D%93%8B%F0%9D%92%BE%F0%9D%93%8D/32458 "与 𝒜𝓃𝒾𝓋𝒾𝓍 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/huan/48/293194_2.png)  焕昭君](/chat/c/%E7%84%95%E6%98%AD%E5%90%9B/43057 "与 焕昭君 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/wenjuhe/48/672301_2.png)  奇妙进化小河马🦛   ![](https://linux.do/images/emoji/twemoji/hippopotamus.png?v=14)](/chat/c/%E5%A5%87%E5%A6%99%E8%BF%9B%E5%8C%96%E5%B0%8F%E6%B2%B3%E9%A9%AC%F0%9F%A6%9B/45968 "与 奇妙进化小河马🦛 聊天") 

聊天

Default

​ ​ ​

**真诚**、**友善**、**团结**、**专业**，共建你我引以为荣之社区。[《常见问题解答》](/faq)

[

❤️ 再忍不住，也不要做这种事啊 ❤️

](https://linux.do/t/topic/482293)

[微信竟然还能这么玩？AI自动回复+群聊秒响应，朋友以为我开了挂！](/t/topic/745813)


=====================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能)

,[AFF](/tag/aff "该标签用于提醒他人本话题中存在aff链接，含有aff的链接仍需显著标明")

您已选择 **0** 个帖子。

全选

取消选择

236 浏览量 14 赞 4 链接 7 用户

 [![](https://linux.do/user_avatar/linux.do/obito_ei/96/769520_2.png)
 4](/u/Obito_ei "Obito_ei") 

 [![](https://linux.do/user_avatar/linux.do/pla81/96/93669_2.png)
 2](/u/PLA81 "PLA81")

 [![](https://linux.do/user_avatar/linux.do/nulluser/96/306885_2.png)](/u/NullUser "NullUser") 

 [![](https://linux.do/user_avatar/linux.do/578382239/96/226770_2.png)](/u/578382239 "578382239") 

 [![](https://linux.do/user_avatar/linux.do/junw/96/366896_2.png)](/u/junw "junw") 

​

[6月 23 日](/t/topic/745813/1 "跳到第一个帖子")

7 / 11

6月 23 日

[8 分钟 前](/t/topic/745813/11)

​

[![](https://linux.do/user_avatar/linux.do/obito_ei/96/769520_2.png)
](/u/Obito_ei)

[A流派](/u/Obito_ei)

[Obito\_ei](/u/Obito_ei)

[22 分钟](/t/topic/745813?u=niyan2025 "发布日期")

[](#p-6802419-reference-article-1)![](https://linux.do/images/emoji/twemoji/paperclip.png?v=14)
 **Reference Article**
======================================================================================================================

*   [https://n8n.io/](https://n8n.io/)
    
*   [GitHub - n8n-io/n8n: Fair-code workflow automation platform with native AI capabilities. Combine visual building with custom code, self-host or cloud, 400+ integrations.](https://github.com/n8n-io/n8n)
    
*   [GitHub - Obito-404/RuoYuBot: 若愚bot是n8n对接个人微信](https://github.com/Obito-404/RuoYuBot)
    
*   [手把手教你搭建智能工作流基础篇，n8n+Deepseek大模型保姆级教程 - AI-人工智能-1ai.net](https://www.1ai.net/33168.html#google_vignette)
    
*   [n8n 中文教程：AI 代理（AI Agent） – 翔宇工作流](https://xiangyugongzuoliu.com/n8n-chinese-tutorial-ai-agent/#Memory)
    
*   [docker 安装Redis （全网最详细：附带配置文件）-CSDN博客](https://blog.csdn.net/javaxueba/article/details/134800960)
    
*   [Docker安装PostgreSQL数据库 - 极客子羽 - 博客园](https://www.cnblogs.com/kendoziyu/p/15778778.html)
    

[](#p-6802419-thrust-2)![](https://linux.do/images/emoji/twemoji/memo.png?v=14)
 **Thrust**
===========================================================================================

博客教程  
[微信竟然还能这么玩？AI自动回复+群聊秒响应，朋友以为我开了挂！ | Obito’s Blog](https://zerotrue.xyz/article/1f9484d9-4c67-8038-81f1-dd0caaa52b9e)

[](#p-6802419-h-3)效果图
=====================

[![](https://linux.do/uploads/default/original/4X/8/2/c/82ce699f63e2ce13d8df93048025e6963182661e.png)

92a22917-00f9-4fb8-b433-bc5f9089ce6a632×469 20.5 KB

](https://linux.do/uploads/default/original/4X/8/2/c/82ce699f63e2ce13d8df93048025e6963182661e.png "92a22917-00f9-4fb8-b433-bc5f9089ce6a")

[](#p-6802419-h-4)流程
====================

好友发送信息→微信机器人监听→发送回调地址→n8n监听→ai大模型处理→n8n发送http请求→微信机器人发回好友

[](#p-6802419-h-5)注意
====================

不添加memory，ai是没有上下文记忆的，需要自行添加数据库如redis或postgresql，我也会在下面演示。

[](#p-6802419-h-6)微信
====================

[](#p-6802419-h-1-7)1.安装微信
--------------------------

微信版本需要是3.9.x，微信版本4.0不支持。

微信3.9.11.17地址：

![](https://linux.do/uploads/default/original/4X/9/6/4/964bce7b52ef83892e6aa7f2f23458d083ab89d4.png)
 [pan.quark.cn](https://pan.quark.cn/s/0d1748e36eb2)

### [夸克网盘分享](https://pan.quark.cn/s/0d1748e36eb2)

夸克网盘是夸克推出的一款云服务产品，功能包括云存储、高清看剧、文件在线解压、PDF一键转换等。通过夸克网盘可随时随地管理和使用照片、文档、手机资料，目前支持Android、iOS、PC、iPad。

[](#p-6802419-h-2-8)2.登陆微信
--------------------------

必须先登录微信号后运行RuoYuBot

[](#p-6802419-h-3-9)3.取消自动更新微信
------------------------------

[](#p-6802419-n8n-10)N8N
========================

[](#p-6802419-h-1install-n8n-11)1.Install N8N
---------------------------------------------

官网默认是必须使用ssl加密，可以使用参数`N8N_SECURE_COOKIE=false`

```


`docker volume create n8n_data
docker network create n8n_network
#取消强制加密，使用http访问
docker run -d -e N8N_SECURE_COOKIE=false --name n8n -p 5678:5678 -v n8n_data:/home/node/.n8n n8nio/n8n
docker run -d \
  -e N8N_SECURE_COOKIE=false \
  -e N8N_HOST="私网或公网ip或域名，为了让内部工作流互相调用" \
  --name n8n \
  --hostname n8n \
  --network n8n_network \
  --restart=always \
  -p 5678:5678 \
  -v n8n_data:/home/node/.n8n \
  n8nio/n8n` 
```

[](#p-6802419-h-2access-the-editor-12)2.Access the editor
---------------------------------------------------------

[http://localhost:5678](http://localhost:5678/)

[](#p-6802419-ruoyubot-13)RuoYuBot
==================================

[](#p-6802419-h-1ruoyubot-14)1.下载RuoYuBot
-----------------------------------------

[github.com](https://github.com/Obito-404/RuoYuBot)

![](https://linux.do/uploads/default/optimized/4X/2/e/f/2ef28a23cf91193f54eb6fb7154527e128998f94_2_690x344.png)

### [GitHub - Obito-404/RuoYuBot: 若愚bot是n8n对接个人微信](https://github.com/Obito-404/RuoYuBot)

若愚bot是n8n对接个人微信

运行后会在当前目录生成一个`config.ini`文件

```


`[DEFAULT]
listen_list = 好友名称或备注,群名称
webhook_urls = [http://ip](http://ip/):port
port = 5000
retry_count = 3
retry_delay = 5
log_level = INFO
api_token =` 
```

[![](https://linux.do/uploads/default/optimized/4X/1/8/a/18afa822652d339b6557817513b0039e21af7577_2_644x500.jpeg)

image879×682 72.5 KB

](https://linux.do/uploads/default/original/4X/1/8/a/18afa822652d339b6557817513b0039e21af7577.jpeg "image")

[![](https://linux.do/uploads/default/optimized/4X/1/4/9/1493160ee92df1375ab773ca37e5c070bb772b48_2_479x500.png)

image897×936 99 KB

](https://linux.do/uploads/default/original/4X/1/4/9/1493160ee92df1375ab773ca37e5c070bb772b48.png "image")

[](#p-6802419-n8n-15)n8n
========================

[](#p-6802419-h-16)方式一：上传配置文件
-----------------------------

工作流导入后，需要自己对一些凭证参数进行调整

AI\_Wechat.json

[](#p-6802419-n8nai-17)方式二：手动创建n8n的ai工作流
----------------------------------------

### [](#p-6802419-h-1webhook-18)1.创建webhook监听

[![](https://linux.do/uploads/default/optimized/4X/3/8/c/38c78e75b36f13524a3c60d004d14756f5164a17_2_690x265.png)

image1373×528 54.7 KB

](https://linux.do/uploads/default/original/4X/3/8/c/38c78e75b36f13524a3c60d004d14756f5164a17.png "image")

### [](#p-6802419-h-2test-url-19)2.复制test url

[![](https://linux.do/uploads/default/optimized/4X/3/7/f/37f4e583e587b305432828c251e86df1d0908c99_2_465x500.jpeg)

image834×896 70.1 KB

](https://linux.do/uploads/default/original/4X/3/7/f/37f4e583e587b305432828c251e86df1d0908c99.jpeg "image")

### [](#p-6802419-h-3ai-agent-20)3.创建AI Agent

[![](https://linux.do/uploads/default/optimized/4X/5/b/b/5bb0cb206aa35a723cafa9a9970dc861ea985495_2_690x290.png)

image1265×532 44.3 KB

](https://linux.do/uploads/default/original/4X/5/b/b/5bb0cb206aa35a723cafa9a9970dc861ea985495.png "image")

### [](#p-6802419-h-4ai-agentai-21)4.点击AI Agent，这里定义ai收到的信息字段

选择Define below，选择Expression，输入prompt`{{ $json.body.message }}`

[![](https://linux.do/uploads/default/optimized/4X/6/1/8/61831f11d4d27be793c0b24366e13a68c4549198_2_385x500.jpeg)

image606×787 43.9 KB

](https://linux.do/uploads/default/original/4X/6/1/8/61831f11d4d27be793c0b24366e13a68c4549198.jpeg "image")

### [](#p-6802419-h-5chat-model-22)5.点击Chat Model，选择你想接入的大模型提供商

[![](https://linux.do/uploads/default/optimized/4X/9/3/e/93ebdfd901910f1f36eae659f2d430324f4f5489_2_639x500.jpeg)

image1097×858 140 KB

](https://linux.do/uploads/default/original/4X/9/3/e/93ebdfd901910f1f36eae659f2d430324f4f5489.jpeg "image")

### [](#p-6802419-h-6api-23)6.创建凭证，需要获取对应的api

[![](https://linux.do/uploads/default/optimized/4X/1/d/8/1d842cc7c60c597f688f504bc5e42519362ec603_2_338x500.png)

image447×660 45.5 KB

](https://linux.do/uploads/default/original/4X/1/d/8/1d842cc7c60c597f688f504bc5e42519362ec603.png "image")

[![](https://linux.do/uploads/default/optimized/4X/b/d/7/bd73dac4e85397ef74f1a2e4a3c3ccd85e841d0c_2_689x302.png)

image1206×529 65 KB

](https://linux.do/uploads/default/original/4X/b/d/7/bd73dac4e85397ef74f1a2e4a3c3ccd85e841d0c.png "image")

### [](#p-6802419-h-7ai-24)7.选择使用的ai模型

[![](https://linux.do/uploads/default/optimized/4X/2/4/1/2414af1f041f2fa914a63ef5b43cac89b94b5d25_2_336x499.png)

image481×714 41.2 KB

](https://linux.do/uploads/default/original/4X/2/4/1/2414af1f041f2fa914a63ef5b43cac89b94b5d25.png "image")

### [](#p-6802419-h-8codeai-25)8.创建Code，目的转换ai回复信息的特殊字符

[![](https://linux.do/uploads/default/optimized/4X/1/5/a/15ab8a19d8888feb1e01a89e3a07debcbdf99079_2_690x441.jpeg)

image1185×759 102 KB

](https://linux.do/uploads/default/original/4X/1/5/a/15ab8a19d8888feb1e01a89e3a07debcbdf99079.jpeg "image")

```


`// 输入项中的文本数据
const textData = $input.first().json.output;

// 清理文本以适应JSON格式的函数
function cleanTextForJson(text) {
    // 使用JSON.stringify来转义所有必要的字符，并去除两端的引号
    let cleanedText = JSON.stringify(text).slice(1, -1);
    
    // 替换不可见字符（如换行符、制表符等）
    cleanedText = cleanedText.replace(/\n/g, '\\n').replace(/\t/g, '\\t');
    
    return cleanedText;
}

// 示例输入数据
const exampleInput = $input.first().json.output

// 使用函数清理文本
const cleanedText = cleanTextForJson(exampleInput);

// 将清理后的文本放入输出对象
return { cleanedText };` 
```

[![](https://linux.do/uploads/default/optimized/4X/e/d/4/ed47f564484603ff8cc4b4317a6dc6762179d19f_2_613x499.jpeg)

image990×807 85.9 KB

](https://linux.do/uploads/default/original/4X/e/d/4/ed47f564484603ff8cc4b4317a6dc6762179d19f.jpeg "image")

### [](#p-6802419-h-9http-request-26)9.创建HTTP Request

[![](https://linux.do/uploads/default/optimized/4X/a/3/5/a35857ff3aa57d3f0c2d7a9d16eae83b3cdfe1f2_2_648x500.png)

image741×571 69.7 KB

](https://linux.do/uploads/default/original/4X/a/3/5/a35857ff3aa57d3f0c2d7a9d16eae83b3cdfe1f2.png "image")

### [](#p-6802419-h-10-27)10.修改配置

修改请求方式和url

```


`Method: post
URL: http://ruoyubot-ip:7777/webhook` 
```

[![](https://linux.do/uploads/default/optimized/4X/0/5/c/05c857c373e8232c7464df7e680a1502a559320a_2_690x358.jpeg)

image1627×846 143 KB

](https://linux.do/uploads/default/original/4X/0/5/c/05c857c373e8232c7464df7e680a1502a559320a.jpeg "image")

[![](https://linux.do/uploads/default/optimized/4X/8/4/e/84e1fa9795cf8bbb1c312e595655ae73cffefd29_2_690x416.png)

image839×507 90.4 KB

](https://linux.do/uploads/default/original/4X/8/4/e/84e1fa9795cf8bbb1c312e595655ae73cffefd29.png "image")

```


`#认证方式
Authentication：Generic Credential Type
Generic Auth Type：Header Auth
Header Auth：Create new credential
#下面Authorization的value格式为Bearer+空格+api token，api token在RuoYuBot上面自定义` 
```

创建凭证

[![](https://linux.do/uploads/default/optimized/4X/7/4/6/74687be273d3d70181287db1d527e442c71be945_2_690x347.png)

image1182×596 109 KB

](https://linux.do/uploads/default/original/4X/7/4/6/74687be273d3d70181287db1d527e442c71be945.png "image")

修改body

json参数可以自己从左边拖拉到json表达式

```


`**Send Body**:
{
  "target_user": "{{ $('Webhook').item.json.body.target_user }}",
  "message": "{{ $json.body.message }}",
  "is_group": "{{ $json.body.is_group }}"
}

#发送消息格式说明
#{
#    "target_user": "群聊名称/好友名称",
#    "message": "要发送的消息",
#    "is_group": true/false,
#    "at_list": ["要@的成员列表"]
#}` 
```

[![](https://linux.do/uploads/default/optimized/4X/b/a/5/ba5c796bac6f95c9cb51194b58c6c1ef1e96bbba_2_640x500.jpeg)

image1091×852 101 KB

](https://linux.do/uploads/default/original/4X/b/a/5/ba5c796bac6f95c9cb51194b58c6c1ef1e96bbba.jpeg "image")

### [](#p-6802419-h-11ruoyubot-28)11.更新RuoYubot的配置文件

**#回调测试地址**: [http://n8n-ip:5678/webhook-test/xxxxx](http://n8n-ip:5678/webhook-test/xxxxx)

**回调地址**: [http://n8n-ip:5678/webhook/xxxxx](http://n8n-ip:5678/webhook/xxxxx)

**API Token**: 自定义

**本地端口**： 自定义

**监听对象**： 好友名或群名

[![](https://linux.do/uploads/default/optimized/4X/8/1/8/8182035480ae429264bc257d7123841ea8c9f09f_2_472x500.jpeg)

image872×922 111 KB

](https://linux.do/uploads/default/original/4X/8/1/8/8182035480ae429264bc257d7123841ea8c9f09f.jpeg "image")

### [](#p-6802419-h-12-29)12.测试工作流

点击测试

[![](https://linux.do/uploads/default/optimized/4X/0/8/1/08124406584480a0235c123faaa8f721671463fb_2_629x500.png)

image686×545 51.3 KB

](https://linux.do/uploads/default/original/4X/0/8/1/08124406584480a0235c123faaa8f721671463fb.png "image")

### [](#p-6802419-h-13-30)13.启用工作流

[![](https://linux.do/uploads/default/optimized/4X/b/6/2/b6273b18f2a3c1abd838e1a13accefc93fe7ac58_2_690x408.png)

image1041×617 70 KB

](https://linux.do/uploads/default/original/4X/b/6/2/b6273b18f2a3c1abd838e1a13accefc93fe7ac58.png "image")

### [](#p-6802419-h-14-31)14.更新回调地址

把webhook-test变成webhook

[![](https://linux.do/uploads/default/optimized/4X/b/6/2/b6273b18f2a3c1abd838e1a13accefc93fe7ac58_2_690x408.png)

image1041×617 70 KB

](https://linux.do/uploads/default/original/4X/b/6/2/b6273b18f2a3c1abd838e1a13accefc93fe7ac58.png "image")

[](#p-6802419-redis-32)Redis
============================

[](#p-6802419-h-1-33)1.创建配置文件
-----------------------------

```


`#新建文件夹
mkdir -p /data/dockerData/redis/conf
cd /data/dockerData/redis/conf
 
#创建文件
touch redis.config
 
#编写文件内容  （进入后 i 子母键插入，黏贴下面配置，:wq! 保存并退出）
vim redis.config` 
```

```


`# Redis服务器配置 
 
# 绑定IP地址
#解除本地限制 注释bind 127.0.0.1 
#bind 127.0.0.1 
 
# 服务器端口号 
port 6379 
 
#配置密码，不要可以删掉
requirepass password
  
 
#这个配置不要会和docker -d 命令 冲突
# 服务器运行模式，Redis以守护进程方式运行,默认为no，改为yes意为以守护进程方式启动，可后台运行，除非kill进程，改为yes会使配置文件方式启动redis失败，如果后面redis启动失败，就将这个注释掉
daemonize no
 
#当Redis以守护进程方式运行时，Redis默认会把pid写入/var/run/redis.pid文件，可以通过pidfile指定(自定义)
#pidfile /data/dockerData/redis/run/redis6379.pid 
 
#默认为no，redis持久化，可以改为yes
appendonly yes
 
 
#当客户端闲置多长时间后关闭连接，如果指定为0，表示关闭该功能
timeout 60
# 服务器系统默认配置参数影响 Redis 的应用
maxclients 10000
tcp-keepalive 300
 
#指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合（分别表示900秒（15分钟）内有1个更改，300秒（5分钟）内有10个更改以及60秒内有10000个更改）
save 900 1
save 300 10
save 60 10000
 
# 按需求调整 Redis 线程数
tcp-backlog 511
 
# 设置数据库数量，这里设置为16个数据库 
databases 16
 
# 启用 AOF, AOF常规配置
appendonly yes
appendfsync everysec
no-appendfsync-on-rewrite no
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb
 
 
# 慢查询阈值
slowlog-log-slower-than 10000
slowlog-max-len 128
 
 
# 是否记录系统日志，默认为yes 
syslog-enabled yes  
 
#指定日志记录级别，Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose
loglevel notice
  
# 日志输出文件，默认为stdout，也可以指定文件路径 
logfile stdout
 
# 日志文件
#logfile /var/log/redis/redis-server.log
 
 
# 系统内存调优参数 
# 按需求设置
hash-max-ziplist-entries 512
hash-max-ziplist-value 64
list-max-ziplist-entries 512
list-max-ziplist-value 64
set-max-intset-entries 512
zset-max-ziplist-entries 128
zset-max-ziplist-value 64` 
```

[](#p-6802419-h-2-34)2.**运行容器，使用上面配置文件启动**
------------------------------------------

```


`docker run -p 6379:6379 --hostname redis --network n8n_network --restart=always --name redis6.2.6 -v /data/dockerData/redis/conf/redis.config:/etc/redis/redis.conf -v /data/dockerData/redis/data:/data -v /data/dockerData/redis/logs:/logs -d redis:6.2.6 redis-server /etc/redis/redis.conf` 
```

上面命令参数解释

```


`–privileged=true ：容器内的root拥有真正root权限，否则容器内root只是外部普通用户权限

- p：端口映射，此处映射 主机6379端口 到 容器的6379端口
- v：主机和容器的目录映射关系，":"前为主机目录，之后为容器目录

新建配置文件书卷：  -v /data/dockerData/redis/conf/redis.config:/etc/redis/redis.config

redis数据保存数据卷  -v /data/dockerData/redis/data:/data

reids日志文数据卷  -v /data/dockerData/redis/logs:/logs

- d : 表示使得容器后台一直运行
redis-server /etc/redis/redis.conf：指定配置文件启动redis-server进程
–appendonly yes：开启数据持久化
–requirepass password ：设置你的密码，设置密码比较安全` 
```

[](#p-6802419-h-3-35)3.测试
-------------------------

```


`#进入redis容器
docker exec -it a34aff536643 bash

#连接redis
redis-cli
 
#输入密码
127.0.0.1:6379> auth password
OK` 
```

[](#p-6802419-h-4-36)4.开放防火墙
----------------------------

```


`#开放防火墙指定端口
firewall-cmd --zone=public --add-port=6379/tcp --permanent
#重新加载防火墙
firewall-cmd --reload` 
```

[](#p-6802419-h-5redismemory-37)5.添加redis作为memory
-------------------------------------------------

创建凭证,我们设置了同一个docker网络并映射了主机名，所以这里写redis就行了，密码在配置文件

[![](https://linux.do/uploads/default/optimized/4X/0/9/2/092f335904998b894fd0bfd3dffd087fcaf21d05_2_690x499.png)

image737×534 36.2 KB

](https://linux.do/uploads/default/original/4X/0/9/2/092f335904998b894fd0bfd3dffd087fcaf21d05.png "image")

自定义上下文长度可以设置

```


`{{ $json.body.is_group ? $json.body.sender : $json.body.chat_name }}` 
```

[![](https://linux.do/uploads/default/optimized/4X/0/9/2/092f335904998b894fd0bfd3dffd087fcaf21d05_2_690x499.png)

image737×534 36.2 KB

](https://linux.do/uploads/default/original/4X/0/9/2/092f335904998b894fd0bfd3dffd087fcaf21d05.png "image")

[](#p-6802419-h-6-38)6.测试
-------------------------

[![](https://linux.do/uploads/default/optimized/4X/5/1/2/5128afdd718668738dcdded53f17b537a4b66d80_2_690x321.jpeg)

image1799×837 145 KB

](https://linux.do/uploads/default/original/4X/5/1/2/5128afdd718668738dcdded53f17b537a4b66d80.jpeg "image")

[](#p-6802419-postgresql-39)Postgresql我就不测试了，一样的流程
--------------------------------------------------

  

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

13

​ ​ 回复

236 浏览量 14 赞 4 链接 7 用户

 [![](https://linux.do/user_avatar/linux.do/obito_ei/96/769520_2.png)
 4](/u/Obito_ei "Obito_ei") 

 [![](https://linux.do/user_avatar/linux.do/pla81/96/93669_2.png)
 2](/u/PLA81 "PLA81")

 [![](https://linux.do/user_avatar/linux.do/nulluser/96/306885_2.png)](/u/NullUser "NullUser") 

 [![](https://linux.do/user_avatar/linux.do/578382239/96/226770_2.png)](/u/578382239 "578382239") 

 [![](https://linux.do/user_avatar/linux.do/junw/96/366896_2.png)](/u/junw "junw") 

[![](https://linux.do/user_avatar/linux.do/pla81/96/93669_2.png)
](/u/PLA81)

[PLA81](/u/PLA81)

浴火重生

[20 分钟](/t/topic/745813/2?u=niyan2025 "发布日期")

有封号风险不

  

2 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ilvsx/96/538153_2.png)
](/u/ilvsx)

[ilvsx](/u/ilvsx)

[20 分钟](/t/topic/745813/3?u=niyan2025 "发布日期")

封号预警  
zsbd

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/junw/96/366896_2.png)
](/u/junw)

[白衣祸世](/u/junw)

[junw](/u/junw)蛇来运转

[19 分钟](/t/topic/745813/4?u=niyan2025 "发布日期")

有点东西哦

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/obito_ei/96/769520_2.png)
](/u/Obito_ei)

[A流派](/u/Obito_ei)

[Obito\_ei](/u/Obito_ei)

 ![](https://linux.do/user_avatar/linux.do/pla81/48/93669_2.png)
 PLA81

[18 分钟](/t/topic/745813/5?u=niyan2025 "发布日期")

基于微软的UIAutomation，只要不涉及违规文本，都不会，不过前期刚挂会强制退出几次，重新登录就行了，我用了大半年很正常

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/nulluser/96/306885_2.png)
](/u/NullUser)

[用户已注销](/u/NullUser)

[NullUser](/u/NullUser)蛇来运转

 ![](https://linux.do/user_avatar/linux.do/pla81/48/93669_2.png)
 PLA81

[17 分钟](/t/topic/745813/6?u=niyan2025 "发布日期")

微信应该有基于用户行为的分析，感觉封号概率很高很高

  

2 个回复

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/pla81/96/93669_2.png)
](/u/PLA81)

[PLA81](/u/PLA81)

浴火重生

 ![](https://linux.do/user_avatar/linux.do/nulluser/48/306885_2.png)
 用户已注销

[16 分钟](/t/topic/745813/7?u=niyan2025 "发布日期")

如果频繁敏感操作可能会封吧

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/obito_ei/96/769520_2.png)
](/u/Obito_ei)

[A流派](/u/Obito_ei)

[Obito\_ei](/u/Obito_ei)

 ![](https://linux.do/user_avatar/linux.do/nulluser/48/306885_2.png)
 用户已注销

[16 分钟](/t/topic/745813/8?u=niyan2025 "发布日期")

都有风险的，我也不能保证百分百，只能说比起其他概率小，我自己尝试过的，任何都有风险，自行斟酌

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/578382239/96/226770_2.png)
](/u/578382239)

[南山](/u/578382239)

[578382239](/u/578382239)一元复始

[15 分钟](/t/topic/745813/9?u=niyan2025 "发布日期")

感谢分享，用小号玩

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/obito_ei/96/769520_2.png)
](/u/Obito_ei)

[A流派](/u/Obito_ei)

[Obito\_ei](/u/Obito_ei)

 ![](https://linux.do/user_avatar/linux.do/pla81/48/93669_2.png)
 PLA81

[15 分钟](/t/topic/745813/10?u=niyan2025 "发布日期")

别一分钟发几百次消息，肯定会封的，以及一些敏感信息，这些就算你是人工都会封

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/hwang/96/306472_2.png)
](/u/hwang)

[hwang](/u/hwang)

大预言家 ![](https://linux.do/images/emoji/twemoji/zzz.png?v=14) 

[8 分钟](/t/topic/745813/11?u=niyan2025 "发布日期")

看着好玩，封号警告，记得用小号

  

​ ​ 回复

### 此话题将在最后一个回复的1 个月后关闭。

分享 加入书签 举报

回复

已取消置顶

​

此话题已对您取消置顶；它将以常规顺序显示

常规 您会在别人 @ 您或回复您时收到通知。

  

[

👕 岂曰无衣？与子同袍 👕️

](https://linux.do/t/topic/585559)

*   推荐
*   相关

### 新话题和未读话题

话题列表，带有按钮的列标题可以排序。
| 话题 | 回复 | 浏览量 | 活动 |
| --- | --- | --- | --- |
| [分享一个我的翻译提示词，配合沉浸式翻译爽的飞起！(04-25更新,修复bug)](/t/topic/515672/287)

 [18](/t/topic/515672/287 "您在此话题中有 18 个未读帖子")

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能)





 | [299](/t/topic/515672/1) | 12.5k | [2 天](/t/topic/515672/304) |
| [把小米379页的年报转为可视化网页，附完整提示词](/t/topic/604327/65)

 [254](/t/topic/604327/65 "您在此话题中有 254 个未读帖子")

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能)

,[Prompt](/tag/prompt)





 | [313](/t/topic/604327/1) | 11.2k | [3 天](/t/topic/604327/318) |
| [授人以渔 —— 发挥沉浸式翻译「自定义 AI 专家」的全部威能](/t/topic/517192/101)

 [8](/t/topic/517192/101 "您在此话题中有 8 个未读帖子")

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能)

,[配置优化](/tag/配置优化)

,[沉浸式翻译](/tag/沉浸式翻译)





 | [106](/t/topic/517192/1) | 6.7k | [8 天](/t/topic/517192/108) |
| [用免费的 Gemini 模型实现 Deep Research，不限量、超大杯，感谢 Google 大善人](/t/topic/491988/489)

 [94](/t/topic/491988/489 "您在此话题中有 94 个未读帖子")

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能)

,[Gemini](/tag/gemini)





 | [576](/t/topic/491988/1) | 23.8k | [20 天](/t/topic/491988/582) |
| [求一个稳定的Gemini Pro 2.5站](/t/topic/571112/11)

 [5](/t/topic/571112/11 "您在此话题中有 5 个未读帖子")

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能)





 | [14](/t/topic/571112/1) | 768 | [5月 11 日](/t/topic/571112/15) |

### 有 [71 个未读](/unread)

话题 和 [163 个新](/new)

话题， 或浏览[开发调优](/c/develop/4)

中的其他话题

Invalid date Invalid date

Settings
========

🏷️ UTags - Add usertags to links

Other Extensions
----------------

[🔗 Links Helper](https://greasyfork.org/en/scripts/464541-links-helper)

[V2EX.REP - 专注提升 V2EX 主题回复浏览体验](https://greasyfork.org/en/scripts/466589-v2ex-rep-%E4%B8%93%E6%B3%A8%E6%8F%90%E5%8D%87-v2ex-%E4%B8%BB%E9%A2%98%E5%9B%9E%E5%A4%8D%E6%B5%8F%E8%A7%88%E4%BD%93%E9%AA%8C)

[v2ex.min - V2EX Minimalist (极简风格)](https://greasyfork.org/en/scripts/463552-v2ex-min-v2ex-%E6%9E%81%E7%AE%80%E9%A3%8E%E6%A0%BC)

[Replace Ugly Avatars](https://greasyfork.org/en/scripts/472616-replace-ugly-avatars)

↑↓⇔⇧⇩