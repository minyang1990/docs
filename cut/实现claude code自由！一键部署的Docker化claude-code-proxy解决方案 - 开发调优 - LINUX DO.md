# 实现claude code自由！一键部署的Docker化claude-code-proxy解决方案 - 开发调优 - LINUX DO
[实现claude code自由！一键部署的Docker化claude-code-proxy解决方案 - 开发调优 - LINUX DO](https://linux.do/t/topic/760680/2) 

  实现claude code自由！一键部署的Docker化claude-code-proxy解决方案 - 开发调优 - LINUX DO                                               

[跳到主要内容](#main-container)

 [![](https://linux.do/uploads/default/original/3X/9/d/9dd49731091ce8656e94433a26a3ef36062b3994.png)](/) 

[实现claude code自由！一键部署的Docker化claude-code-proxy解决方案](/t/topic/760680)
====================================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[软件开发](/tag/软件开发)

*   ​

*    ![](https://linux.do/letter_avatar/niyan2025/96/5_d44a9b381edc88181525e3c8350177ca.png)
       [ 2 ](# "2 个未读通知") 

*   [话题](/latest "所有话题")
*   [我的帖子](/u/niyan2025/activity/drafts "我的未发布草稿")
*   [My messages](/u/niyan2025/messages "My messages")
*   [关于](/about "关于此网站的更多详细信息")
*   [即将到来的活动](/upcoming-events "即将到来的活动")
*   更多

外部链接

*   [2048](https://2048.linux.do)
*   [Status](https://status.linux.do)
*   [T-Shirt](https://shanwaiyoushan.taobao.com)
*   [Connect](https://connect.linux.do)
*   [Webmail](https://webmail.linux.do)
*   [Channel](https://t.me/linux_do_channel)
*   [Telegram](https://t.me/ja_netfilter_group)

类别

*   [开发调优](/c/develop/4 "此版块包含开发、测试、调试、部署、优化、安全等方面的内容")
*   [资源荟萃](/c/resource/14 "包括软件分享、开源仓库、视频课程、书籍等分享")
*   [文档共建](/c/wiki/42 "佬友化身翰林学士，一起来编书了。")
*   [非我莫属](/c/job/27 "学成文武艺，货与帝王家。招聘/求职分类，只能发此类信息。")
*   [读书成诗](/c/reading/32 "跟着佬友们一起在论坛读完一本书是什么体验？")
*   [扬帆起航](/c/startup/46 "扬帆起航，目标是星辰大海！")
*   [前沿快讯](/c/news/34 "前沿快讯，不出门能知天下事。")
*   [网络记忆](/c/feeds/92 "网络是有记忆的，确信！")
*   [福利羊毛](/c/welfare/36 "正经人谁花那个钱啊～ 此版块供羊毛、抽奖等福利使用。")
*   [搞七捻三](/c/gossip/11 "闲聊吹水的板块。不得讨论政治、色情等违规内容。")
*   [运营反馈](/c/feedback/2 "有关此站点、其组织、运作方式以及如何改进的讨论。")
*   [深海幽域](/c/muted/45 "冰山下的深海。帖子不会上信息流、不会被论坛搜索。")
*   [所有类别](/categories)

标签

*   [人工智能](/tag/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD)
*   [公告](/tag/%E5%85%AC%E5%91%8A)
*   [快问快答](/tag/%E5%BF%AB%E9%97%AE%E5%BF%AB%E7%AD%94)
*   [抽奖](/tag/%E6%8A%BD%E5%A5%96)
*   [精华神帖](/tag/%E7%B2%BE%E5%8D%8E%E7%A5%9E%E5%B8%96)
*   [所有标签](/tags)

*   [我的消息串](/chat/threads "我的消息串")

频道

*   [常规频道](/chat/c/general/2 "🈲 禁止在聊天频道里发送 打卡 等无意义信息，被举报会喜提 禁言1小时 。")

直接消息

*    [![](https://linux.do/user_avatar/linux.do/xronus/48/130867_2.png)  𝒜𝓃𝒾𝓋𝒾𝓍](/chat/c/%F0%9D%92%9C%F0%9D%93%83%F0%9D%92%BE%F0%9D%93%8B%F0%9D%92%BE%F0%9D%93%8D/32458 "与 𝒜𝓃𝒾𝓋𝒾𝓍 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/huan/48/293194_2.png)  焕昭君](/chat/c/%E7%84%95%E6%98%AD%E5%90%9B/43057 "与 焕昭君 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/wenjuhe/48/672301_2.png)  奇妙进化小河马🦛   ![](https://linux.do/images/emoji/twemoji/hippopotamus.png?v=14)](/chat/c/%E5%A5%87%E5%A6%99%E8%BF%9B%E5%8C%96%E5%B0%8F%E6%B2%B3%E9%A9%AC%F0%9F%A6%9B/45968 "与 奇妙进化小河马🦛 聊天") 

聊天

Default

​ ​ ​

**真诚**、**友善**、**团结**、**专业**，共建你我引以为荣之社区。[《常见问题解答》](/faq)

[

❤️ 再忍不住，也不要做这种事啊 ❤️

](https://linux.do/t/topic/482293)

[实现claude code自由！一键部署的Docker化claude-code-proxy解决方案](/t/topic/760680)
====================================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[软件开发](/tag/软件开发)

您已选择 **0** 个帖子。

全选

取消选择

​

[7月 1 日](/t/topic/760680/1 "跳到第一个帖子")

2 / 88

7月 2 日

[42 分钟](/t/topic/760680/94)

热门回复 ​

[![](https://linux.do/user_avatar/linux.do/lie5860/96/757631_2.png)
](/u/lie5860)

[Zhihong Huang](/u/lie5860)[lie5860](/u/lie5860)

5

[6 天](/t/topic/760680?u=niyan2025 "发布日期")

原理 你可以提供你的OpenAI 兼容的 API 来跑 claude code。提供一大一小模型。我的实践中是用佬友公益站提供的 gpt-4.1-mini 和 2.5pro。  
基于 [fuergaosi233/claude-code-proxy](https://github.com/fuergaosi233/claude-code-proxy) 项目（Anthropic Claude的API代理工具）以及 [宙斯佬的初始化脚本](https://linux.do/t/topic/747059)实现

**镜像名称**：`lie5860/claude-code-proxy`

如果有 python 环境可以直接使用原项目本地部署。.env 文件配置如下图左侧。如果是 docker 部署环境变量配置如下图右侧即可。  

[![](https://linux.do/uploads/default/optimized/4X/1/7/2/1723d8c6e45555e14dfb46303767445c389bf68c_2_690x194.png)

image1587×447 66.1 KB

](https://linux.do/uploads/default/original/4X/1/7/2/1723d8c6e45555e14dfb46303767445c389bf68c.png "image")

部署成功之后可以用浏览器直接访问测试是否成功，本地跑的话默认在 [http://127.0.0.1:8082](http://127.0.0.1:8082) 上。  

[![](https://linux.do/uploads/default/optimized/4X/3/f/5/3f53402ef705293c365a251989a8545fa28ab4b3_2_690x113.png)

image946×156 27.5 KB

](https://linux.do/uploads/default/original/4X/3/f/5/3f53402ef705293c365a251989a8545fa28ab4b3.png "image")

然后使用下面的脚本初始化 将 [http://xxxxxxxxxxxxxx](http://xxxxxxxxxxxxxx) 替换为你起的服务地址（例如 [http://127.0.0.1:8082](http://127.0.0.1:8082) ）就好了。apikey 是随便写的一个值不重要。  
ps:windows 系统的话就参考宙斯佬的windows脚本吧ANTHROPIC\_BASE\_URL相关的地址都改成你的服务器地址就好了。没有设备还无法测试。

macos 初始化脚本```


`#!/bin/bash

echo "Checking for Claude Code installation..."

# Check if claudecode command exists
if command -v claudecode &> /dev/null; then
    echo "Claude Code is already installed."
else
    echo "Claude Code not found. Installing..."
    
    # Check if npm is available
    if ! command -v npm &> /dev/null; then
        echo "Error: npm is not installed. Please install Node.js first."
        exit 1
    fi
    
    # Install Claude Code
    echo "Installing Claude Code via npm..."
    if ! npm install -g @anthropic-ai/claude-code; then
        echo "Error: Failed to install Claude Code."
        exit 1
    fi
    
    echo "Claude Code installed successfully."
fi

echo "Setting up Claude Code configuration..."

# Create .claude directory if it doesn't exist
CLAUDE_DIR="$HOME/.claude"
if [ ! -d "$CLAUDE_DIR" ]; then
    mkdir -p "$CLAUDE_DIR"
fi

SETTINGS_FILE="$CLAUDE_DIR/settings.json"

# Check if settings.json already exists
if [ -f "$SETTINGS_FILE" ]; then
    echo "Settings file exists. Updating API configuration..."
    
    # Create backup
    cp "$SETTINGS_FILE" "$SETTINGS_FILE.backup"
    
    # Check if jq is available for JSON manipulation
    if command -v jq &> /dev/null; then
        # Use jq to modify the JSON
        jq '.env.ANTHROPIC_API_KEY_OLD = .env.ANTHROPIC_API_KEY | .env.ANTHROPIC_BASE_URL_OLD = .env.ANTHROPIC_BASE_URL | .env.ANTHROPIC_API_KEY = "sk-jn0fhoMxvA8bk2SWPLgeolqAXriBPIc8" | .env.ANTHROPIC_BASE_URL = "http://xxxxxxxxxxxxxx" | .apiKeyHelper = "echo '\''sk-jn0fhoMxvA8bk2SWPLgeolqAXriBPIc8'\''"' "$SETTINGS_FILE" > "$SETTINGS_FILE.tmp" && mv "$SETTINGS_FILE.tmp" "$SETTINGS_FILE"
    else
        # Fallback: use sed to comment out and add new values
        echo "jq not found, using sed for modification..."
        
        # Use Python if available for better JSON handling
        if command -v python3 &> /dev/null; then
            python3 -c "
import json
import sys

with open('$SETTINGS_FILE', 'r') as f:
    data = json.load(f)

# Backup old values
if 'ANTHROPIC_API_KEY' in data['env']:
    data['env']['ANTHROPIC_API_KEY_OLD'] = data['env']['ANTHROPIC_API_KEY']
if 'ANTHROPIC_BASE_URL' in data['env']:
    data['env']['ANTHROPIC_BASE_URL_OLD'] = data['env']['ANTHROPIC_BASE_URL']

# Set new values
data['env']['ANTHROPIC_API_KEY'] = 'sk-jn0fhoMxvA8bk2SWPLgeolqAXriBPIc8'
data['env']['ANTHROPIC_BASE_URL'] = 'http://xxxxxxxxxxxxxx'
data['apiKeyHelper'] = 'echo \\'sk-jn0fhoMxvA8bk2SWPLgeolqAXriBPIc8\\''

with open('$SETTINGS_FILE', 'w') as f:
    json.dump(data, f, indent=2)
"
        else
            echo "Warning: Neither jq nor python3 found. Overwriting settings file."
            cat > "$SETTINGS_FILE" << 'EOF'
{
  "env": {
    "ANTHROPIC_API_KEY": "sk-jn0fhoMxvA8bk2SWPLgeolqAXriBPIc8",
    "ANTHROPIC_BASE_URL": "http://xxxxxxxxxxxxxx"
  },
  "permissions": {
    "allow": [],
    "deny": []
  },
  "apiKeyHelper": "echo 'sk-jn0fhoMxvA8bk2SWPLgeolqAXriBPIc8'"
}
EOF
        fi
    fi
    
    echo "Updated existing settings file with new API configuration."
    echo "Original values backed up with _OLD suffix."
else
    # Create new settings.json
    echo "Creating new settings.json..."
    cat > "$SETTINGS_FILE" << 'EOF'
{
  "env": {
    "ANTHROPIC_API_KEY": "sk-jn0fhoMxvA8bk2SWPLgeolqAXriBPIc8",
    "ANTHROPIC_BASE_URL": "http://xxxxxxxxxxxxxx"
  },
  "permissions": {
    "allow": [],
    "deny": []
  },
  "apiKeyHelper": "echo 'sk-jn0fhoMxvA8bk2SWPLgeolqAXriBPIc8'"
}
EOF
    echo "Created new settings file."
fi

echo "Configuration complete!"
echo "Settings saved to: $CLAUDE_DIR/settings.json"` 
``` 

然后就可以快乐 claude 起来啦～

效果图如下，还是很不错的呢。（楼主 docker 也不会，一次就打包出可以用的很开心诶，如果有佬不支持的设备可以回复一下。第一次写不知道～现在支持amd64,arm64）  

[![](https://linux.do/uploads/default/optimized/4X/2/9/4/294c6d61b7efec3eda25932ea114b4586bf2607f_2_690x435.png)

image1483×936 164 KB

](https://linux.do/uploads/default/original/4X/2/9/4/294c6d61b7efec3eda25932ea114b4586bf2607f.png "image")

  
（终于可以把 T 佬的 2.5pro 用起来了吗！快乐！

  

7 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

![](https://linux.do/images/emoji/twemoji/clap.png?v=14)

clap

![](https://linux.do/images/emoji/twemoji/open_mouth.png?v=14)

open\_mouth

101

​ ​ 回复

*   [![](https://linux.do/images/emoji/twemoji/ringed_planet.png?v=14)
    L站福利及项目信息汇总【AI篇】（不定时更新）](https://linux.do/t/topic/742212)
*   [关于Claude Code初次使用体验](https://linux.do/t/topic/769554)

3.2k 浏览量 123 赞 10 链接 32 用户

 [![](https://linux.do/user_avatar/linux.do/lie5860/96/757631_2.png)
 28](/u/lie5860 "lie5860") 

 [![](https://linux.do/letter_avatar/ling_anthony/96/5_d44a9b381edc88181525e3c8350177ca.png)
 11](/u/Ling_Anthony "Ling_Anthony") 

 [![](https://linux.do/user_avatar/linux.do/yzzzed/96/378342_2.png)
 4](/u/Yzzzed "Yzzzed") 

 [![](https://linux.do/letter_avatar/maonega/96/5_d44a9b381edc88181525e3c8350177ca.png)
 4](/u/maonega "maonega") 

 [![](https://linux.do/user_avatar/linux.do/dwl/96/9979_2.png)
 3](/u/dwl "dwl") 

阅读时间 6 分钟

热门回复

总结

[![](https://linux.do/user_avatar/linux.do/throttle/96/778052_2.png)
](/u/Throttle)

[方块](/u/Throttle)[Throttle](/u/Throttle)无所不知

[6 天](/t/topic/760680/2?u=niyan2025 "发布日期")

感谢分享～

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cawerda/96/376759_2.png)
](/u/cawerda)

[欢迎伟大的虫虫殿下](/u/cawerda)[cawerda](/u/cawerda)活跃用户

[6 天](/t/topic/760680/3?u=niyan2025 "发布日期")

感谢佬友！

  

1

​ ​ 回复

[![](https://linux.do/letter_avatar/beert/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/Beert)

[Beert](/u/Beert)一元复始

[6 天](/t/topic/760680/4?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/lie5860/48/757631_2.png)
 Zhihong Huang:

> 兼容的 API 来跑 claude code

大佬牛逼 promax

  

1

​ ​ 回复

[![](https://linux.do/letter_avatar/maonega/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/maonega)

[maonega](/u/maonega)

[6 天](/t/topic/760680/5?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/lie5860/48/757631_2.png)
 Zhihong Huang:

> 宙斯佬的初始化脚本

claude code 是在交互还是在prompt 上做得比较好吗，这个方案跟在cursor中用t佬的 2.5pro比有什么优势呢

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lie5860/96/757631_2.png)
](/u/lie5860)

[Zhihong Huang](/u/lie5860)[lie5860](/u/lie5860)

 ![](https://linux.do/letter_avatar/maonega/48/5_d44a9b381edc88181525e3c8350177ca.png)
 maonega

[6 天](/t/topic/760680/6?u=niyan2025 "发布日期")

我 roocode 有点用不惯。我自己主要是用 cursor pro edu。目前还在体验中。

  

1 个回复

2

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/shuiyihan/96/5032_2.png)
](/u/shuiyihan)

[shuiyihan](/u/shuiyihan)浴火重生

[6 天](/t/topic/760680/7?u=niyan2025 "发布日期")

大佬出手了,T佬给的token不是只有deepseek和openai小模型么,问下你们的claude 模型怎么可以获取,谢谢

  

1 个回复

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lie5860/96/757631_2.png)
](/u/lie5860)

[Zhihong Huang](/u/lie5860)[lie5860](/u/lie5860)

 ![](https://linux.do/user_avatar/linux.do/shuiyihan/48/5032_2.png)
 shuiyihan

[6 天](/t/topic/760680/8?u=niyan2025 "发布日期")

用 gemini-2.5-pro 呀。这个大哦

  

1 个回复

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/shuiyihan/96/5032_2.png)
](/u/shuiyihan)

[shuiyihan](/u/shuiyihan)浴火重生

 ![](https://linux.do/user_avatar/linux.do/lie5860/48/757631_2.png)
 Zhihong Huang

[6 天](/t/topic/760680/9?u=niyan2025 "发布日期")

哦哦,好的谢谢大佬

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lovisnd/96/762157_2.png)
](/u/lovisnd)

[执迷](/u/lovisnd)[lovisnd](/u/lovisnd) ![](https://linux.do/images/emoji/twemoji/technologist.png?v=14) 

[6 天](/t/topic/760680/10?u=niyan2025 "发布日期")

感谢 等会试试

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lyt/96/694_2.png)
](/u/lyt)

[子兮](/u/lyt)[lyt](/u/lyt)浴火重生 ![](https://linux.do/uploads/default/original/3X/5/9/596da26825d2a806bd1952b5231f24d212866c1b.png?v=14) 

[6 天](/t/topic/760680/11?u=niyan2025 "发布日期")

谢谢佬友 有空试看看

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/578382239/96/226770_2.png)
](/u/578382239)

[南山](/u/578382239)[578382239](/u/578382239)一元复始

[6 天](/t/topic/760680/12?u=niyan2025 "发布日期")

感谢大佬教程

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/handsome/96/736205_2.png)
](/u/handsome)

[大帅哥](/u/handsome)[handsome](/u/handsome)种子用户 ![](https://linux.do/images/emoji/twemoji/rage.png?v=14) 

[6 天](/t/topic/760680/13?u=niyan2025 "发布日期")

感谢大佬！

  

2

​ ​ 回复

[![](https://linux.do/letter_avatar/maonega/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/maonega)

[maonega](/u/maonega)

 ![](https://linux.do/user_avatar/linux.do/lie5860/48/757631_2.png)
 Zhihong Huang

[6 天](/t/topic/760680/16?u=niyan2025 "发布日期")

![](https://linux.do/images/emoji/twemoji/grinning_face.png?v=14)
 我也试了下，不过用 t佬的token一下子就超rpm了

  

2 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lie5860/96/757631_2.png)
](/u/lie5860)

[Zhihong Huang](/u/lie5860)[lie5860](/u/lie5860)

 ![](https://linux.do/letter_avatar/maonega/48/5_d44a9b381edc88181525e3c8350177ca.png)
 maonega

[6 天](/t/topic/760680/17?u=niyan2025 "发布日期")

不不不 佬我给你提供一个思路。你想想。为什么一下子 rpm 超了。因为他是大小混用。小的频繁用。那么我们可以把小的这个 gpt-4o-mini 使用 T 佬的公开 1000rpm 的 openai key。或者自费买个 deepseek-v3 （便宜的很呢）。或者自己的 openai 免费的 gpt-4o-mini （数据共享计划）

  

1 个回复

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lnd/96/778411_2.png)
](/u/Lnd)

[Huihuina](/u/Lnd)[Lnd](/u/Lnd)活跃用户

[6 天](/t/topic/760680/18?u=niyan2025 "发布日期")

感谢佬友分享

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lie5860/96/757631_2.png)
](/u/lie5860)

[Zhihong Huang](/u/lie5860)[lie5860](/u/lie5860)

 ![](https://linux.do/letter_avatar/maonega/48/5_d44a9b381edc88181525e3c8350177ca.png)
 maonega

[6 天](/t/topic/760680/19?u=niyan2025 "发布日期")

哦对不起～我仔细看了一下 不是 1000rpm 是无上限呢！

*   RPM极高，DeepSeek：1000（所有用户共享），OpenAI：无限制（由上游限制）。
*   [点击领取OpenAI Key](https://linux-do.ovinc.cn/virtual_content/4080bbd34616553aa10132cb94405d74/) ，可用 `gpt-4.1-mini`, `gpt-4.1-nano`, `gpt-4o-mini` 模型。

  

2 个回复

1

​ ​ 回复

[![](https://linux.do/letter_avatar/maonega/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/maonega)

[maonega](/u/maonega)

 ![](https://linux.do/user_avatar/linux.do/lie5860/48/757631_2.png)
 Zhihong Huang

[6 天](/t/topic/760680/20?u=niyan2025 "发布日期")

感谢佬，另外，这个proxy项目支持大小模型分开url吗，没看到相关的配置 ![](https://linux.do/images/emoji/twemoji/joy.png?v=14)
  
如果可以的话倒是可以解决问题

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lie5860/96/757631_2.png)
](/u/lie5860)

[Zhihong Huang](/u/lie5860)[lie5860](/u/lie5860)

 ![](https://linux.do/letter_avatar/maonega/48/5_d44a9b381edc88181525e3c8350177ca.png)
 maonega

[6 天](/t/topic/760680/21?u=niyan2025 "发布日期")

![](https://linux.do/images/emoji/twemoji/rofl.png?v=14)
我刚才也想到了佬可能有这个问题。。我自己是 docker 搭了一个 N 佬开发的veloera所以没这个问题。。可以在 claude-code-proxy 上给大佬提个需求\`。 其实我觉得拥有一个自己的new-api 还是挺好的。这样更换公益站的资源是很方便的。公益站的资源变动相对较大一些。总不能他们一变我们项目的全部配置都要改一遍吧～太麻烦啦。～

  

1 个回复

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

2

​ ​ 回复

[![](https://linux.do/letter_avatar/beert/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/Beert)

[Beert](/u/Beert)一元复始

[6 天](/t/topic/760680/22?u=niyan2025 "发布日期")

[![](https://linux.do/uploads/default/optimized/4X/0/f/2/0f2b60aa6200e29f690a54301a7042a73e039da0_2_689x343.png)

image2536×1264 188 KB

](https://linux.do/uploads/default/original/4X/0/f/2/0f2b60aa6200e29f690a54301a7042a73e039da0.png "image")

佬友怎么解决哇！

  

2 个回复

​ ​ 回复

Invalid date Invalid date

↑↓⇔⇧⇩