# 2通过 API 免费使用 Claude Code 的小教程！ - 开发调优 - LINUX DO
[通过 API 免费使用 Claude Code 的小教程！ - 开发调优 - LINUX DO](https://linux.do/t/topic/745106) 

  通过 API 免费使用 Claude Code 的小教程！ - 开发调优 - LINUX DO                                                        

Constants loaded at 2025-08-15T04:57:59.150Z

  

[跳到主要内容](#main-container)

子系统

*   [Connect](https://connect.linux.do "LINUX DO Connect 账号连接系统。")
*   [Webmail](https://webmail.linux.do/ "LINUX DO Mail 系统。")
*   [Lottery](https://lottery.linux.do/ "LINUX DO 抽奖系统。")

元宇宙

*   [导航站](https://nav.linux.do "LINUX DO 相关服务导航站。")
*   [Wiki站](https://wiki.linux.do "LINUX DO Wiki 系统。")
*   [分发站](https://cdk.linux.do "LINUX DO 分发站，福利多多。")

其他

*   [2048](https://2048.linux.do "一起来挑战、打榜经典2048小游戏。")
*   [T-Shirt](https://shanwaiyoushan.taobao.com "LINUX DO元气T+POLO：社交新名片。")

 [![](https://linux.do/uploads/default/original/4X/d/1/4/d146c68151340881c884d95e0da4acdf369258c6.png)](/) 

*   ​

*    ![](https://linux.do/letter_avatar/niyan2025/144/5_d44a9b381edc88181525e3c8350177ca.png)
       [ 3 ](# "3 个未读通知") 

*   [话题](/latest "所有话题")
*   [我的帖子](/u/niyan2025/activity/drafts "我的未发布草稿")
*   [我的消息](/u/niyan2025/messages "我的个人信息")
*   [关于](/about "关于此网站的更多详细信息")
*   [近期活动](/upcoming-events "近期活动")
*   更多

类别

*   [开发调优](/c/develop/4 "此版块包含开发、测试、调试、部署、优化、安全等方面的内容。")
*   [资源荟萃](/c/resource/14 "包括软件分享、开源仓库、视频课程、书籍等分享。")
*   [网盘资源](/c/cloud-asset/94 "网盘资源专用类别，主帖不限时编辑。")
*   [文档共建](/c/wiki/42 "佬友化身翰林学士，一起来编书了。")
*   [非我莫属](/c/job/27 "学成文武艺，货与帝王家。招聘/求职分类，只能发此类信息。")
*   [读书成诗](/c/reading/32 "跟着佬友们一起在论坛读完一本书是什么体验？")
*   [扬帆起航](/c/startup/46 "扬帆起航，目标是星辰大海！此为推广版块。")
*   [前沿快讯](/c/news/34 "前沿快讯，不出门能知天下事。")
*   [网络记忆](/c/feeds/92 "网络是有记忆的，确信！")
*   [福利羊毛](/c/welfare/36 "正经人谁花那个钱啊～ 此版块供羊毛、抽奖等福利使用。")
*   [搞七捻三](/c/gossip/11 "闲聊吹水的板块。不得讨论政治、色情等违规内容。")
*   [运营反馈](/c/feedback/2 "有关此网站、其组织、运作方式以及如何改进的讨论。")
*   [深海幽域](/c/muted/45 "冰山下的深海。帖子不会上信息流、不会被论坛搜索。")
*   [所有类别](/categories)

标签

*   [人工智能](/tag/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD)
*   [公告](/tag/%E5%85%AC%E5%91%8A)
*   [快问快答](/tag/%E5%BF%AB%E9%97%AE%E5%BF%AB%E7%AD%94)
*   [抽奖](/tag/%E6%8A%BD%E5%A5%96)
*   [精华神帖](/tag/%E7%B2%BE%E5%8D%8E%E7%A5%9E%E5%B8%96)
*   [所有标签](/tags)

*   [我的消息串](/chat/threads "我的消息串")

频道

*   [常规频道](/chat/c/general/2 "🈲 禁止在聊天频道里发送 打卡 等无意义信息，被举报会喜提 禁言1小时 。")

直接消息

*    [![](https://linux.do/letter_avatar/daster/72/5_d44a9b381edc88181525e3c8350177ca.png)  Daster](/chat/c/daster/78035 "与 Daster 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/xronus/72/130867_2.png)  𝒜𝓃𝒾𝓋𝒾𝓍](/chat/c/%F0%9D%92%9C%F0%9D%93%83%F0%9D%92%BE%F0%9D%93%8B%F0%9D%92%BE%F0%9D%93%8D/32458 "与 𝒜𝓃𝒾𝓋𝒾𝓍 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/huan/72/864820_2.png)  焕昭君](/chat/c/%E7%84%95%E6%98%AD%E5%90%9B/43057 "与 焕昭君 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/wenjuhe/72/672301_2.png)  奇妙进化小河马🦛   ![](https://linux.do/images/emoji/twemoji/hippopotamus.png?v=14)](/chat/c/%E5%A5%87%E5%A6%99%E8%BF%9B%E5%8C%96%E5%B0%8F%E6%B2%B3%E9%A9%AC%F0%9F%A6%9B/45968 "与 奇妙进化小河马🦛 聊天") 

聊天

Default

​ ​ ​

由于服务器负载过大，暂时向所有人都显示未登录用户可以看到的内容。

**真诚**、**友善**、**团结**、**专业**，共建你我引以为荣之社区。[《常见问题解答》](/faq)

[通过 API 免费使用 Claude Code 的小教程！](/t/topic/745106)
================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[Prompt](/tag/prompt)

您已选择 **0** 个帖子。

全选

取消选择

8.5k 浏览量 205 赞 7 链接 54 用户

 [![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
 11](/u/ChaCha "ChaCha") 

 [![](https://linux.do/user_avatar/linux.do/lccong/144/589635_2.png)
 8](/u/lccong "lccong") 

 [![](https://linux.do/user_avatar/linux.do/jiangyufandf/144/780354_2.png)
 5](/u/jiangyufandf "jiangyufandf") 

 [![](https://linux.do/user_avatar/linux.do/duolabmeng6/144/131552_2.png)
 4](/u/duolabmeng6 "duolabmeng6")

 [![](https://linux.do/user_avatar/linux.do/haleclipse/144/606178_2.png)
 3](/u/Haleclipse "Haleclipse") 

阅读时间 7 分钟

热门回复

​

[6月 23 日](/t/topic/745106/1 "跳到第一个帖子")

1 / 93

6月 23 日

返回

[18 小时](/t/topic/745106/95)

热门回复 ​

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

1

[6月 23 日](/t/topic/745106?u=niyan2025 "发布日期")

> 继上一条帖子中的评论 [Claude Code 接入 Gemini 1M 上下文爽用！](https://linux.do/t/topic/743319/30)  
> 上次简单分享了 CC 官方配合外接 Gemini 协作，这次分享一个直接用 API 免费（~什么？API 要花钱？~）用 CC 的食用方式～

[![](https://linux.do/uploads/default/optimized/4X/d/4/e/d4ed2b89a2f832836512f57289d79491e6568df1_2_642x500.png)

示例图11862×1450 200 KB

](https://linux.do/uploads/default/original/4X/d/4/e/d4ed2b89a2f832836512f57289d79491e6568df1.png "示例图1")

[![](https://linux.do/uploads/default/optimized/4X/6/b/3/6b3bef161753e22e580e91a47459cad0abedc836_2_642x500.png)

示例图21862×1450 309 KB

](https://linux.do/uploads/default/original/4X/6/b/3/6b3bef161753e22e580e91a47459cad0abedc836.png "示例图2")

[](#p-6795038-h-1)先说用法
----------------------

```


`git clone https://github.com/chachako/freecc.git
cd freecc
curl -LsSf https://astral.sh/uv/install.sh | sh # 如果已经装了 uv 就忽略
uv venv
uv sync
cp .env.example .env
code .env # 或者其他编辑器` 
```

> 有两种 `BIG_MODEL_` 和 `SMALL_MODEL_`  
> 分别是 CC 用来正式请求的 `sonnet` 和用来辅助请求的 `haiku`

填你自己的 `API_KEY` 和 `API_BASE`（`SMALL_MODEL` 记得用便宜快速的，比如 deepseek-v3，不然小心账单爆炸）  
如果你用的是基于 OpenAI API 格式的 API Key，保持 `BIG_MODEL_PROVIDER` 为 “openai”

```


`uv run uvicorn server:app --host 127.0.0.1 --port 8082 --reload
# 运行 claude & Enjoy
export ANTHROPIC_BASE_URL=http://localhost:8082 && claude` 
```

### [](#p-6795038-h-2)注意！！！

确保你的 API **支持 Function Call**，不然 CC 就只是一个聊天客户端了，很多第三方 API 并不支持工具函数调用，这一点需要清楚

> 不过也不是没有解决办法，可以通过 prompt 让 Gemini 以特定的格式输出调用，类似于 RooCode 的 System Prompt 让 AI 输出[固定 XML 标签格式](https://github.com/RooCodeInc/Roo-Code/blob/9da598c9/src/core/assistant-message/parseAssistantMessageV2.ts)的方式。不过这块的调试比较麻烦，周末再研究一下（社畜 ![](https://linux.do/images/emoji/twemoji/smiling_face_with_tear.png?v=14)

* * *

[](#p-6795038-h-3)碎碎念
---------------------

完全用 Gemini 代理 Claude Code 的请求后明显能感觉到架构之类的工作做的更好了，唯一缺点就是 Gemini 在调用工具方面很差劲…  
不过，在 `CLAUDE.md` 里面简单加几句指令后情况有所缓解：

```


`# CLAUDE.md

## 严格遵循的指令

你必须在每次对话前**仔细**阅读你的内部规则，这很重要，否则整个工作流程都无法继续。

请在每次对话开始之前，调用 TodoRead 检查是否存在未完成的任务。当一个任务完成后，必须在回答结束前调用 TodoWrite 更新任务状态。

仔细理解用户的意图，如果它满足你内部规则中的 Tool 条件，强烈要求你调用合适的 Tool。` 
```

看了一下 CC 的原始请求，发现 prompt 里面做了大量的 example 举例，由于模型之间存在差异，我怀疑 Gemini 这种超长上下文窗口的模型会不会因此反而更容易理解错重点和产生幻觉？

不确定如果单独为 Gemini 定制一套 System Prompt 会不会有奇效…

* * *

**另外 CC 是真的成本杀手** ![](https://linux.do/images/emoji/twemoji/exploding_head.png?v=14)
 （等一个支持 Function Call 的 AI Studio 2api ![](https://linux.do/images/emoji/twemoji/heart_eyes.png?v=14)
），每次输入框输入字都会调用小模型 `haiku` 先让 AI 检查输入，后台似乎也会发送辅助请求  

[![](https://linux.do/uploads/default/optimized/4X/9/6/a/96ac27c690f73fc332e53b1becd25f1747f87d0f_2_690x465.png)

image1926×1298 512 KB

](https://linux.do/uploads/default/original/4X/9/6/a/96ac27c690f73fc332e53b1becd25f1747f87d0f.png "image")

  

8 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

![](https://linux.do/images/emoji/twemoji/open_mouth.png?v=14)

open\_mouth

![](https://linux.do/images/emoji/twemoji/clap.png?v=14)

clap

![](https://linux.do/images/emoji/twemoji/laughing.png?v=14)

laughing

![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14)

tieba\_087

159

​

​ ​ 回复

*   [Claude Code 接入 Gemini 1M 上下文爽用！](https://linux.do/t/topic/743319)
*   [![](https://linux.do/images/emoji/twemoji/ringed_planet.png?v=14)
    L站福利及项目信息汇总【AI篇】（不定时更新）](https://linux.do/t/topic/742212)

8.5k 浏览量 205 赞 7 链接 54 用户

 [![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
 11](/u/ChaCha "ChaCha") 

 [![](https://linux.do/user_avatar/linux.do/lccong/144/589635_2.png)
 8](/u/lccong "lccong") 

 [![](https://linux.do/user_avatar/linux.do/jiangyufandf/144/780354_2.png)
 5](/u/jiangyufandf "jiangyufandf") 

 [![](https://linux.do/user_avatar/linux.do/duolabmeng6/144/131552_2.png)
 4](/u/duolabmeng6 "duolabmeng6")

 [![](https://linux.do/user_avatar/linux.do/haleclipse/144/606178_2.png)
 3](/u/Haleclipse "Haleclipse") 

阅读时间 7 分钟

热门回复

[![](https://linux.do/user_avatar/linux.do/baipiaodang/144/650531_2.png)
](/u/baipiaodang)

[baipiaodang](/u/baipiaodang) ![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14) 

[6月 23 日](/t/topic/745106/2?u=niyan2025 "发布日期")

前来学习

  

4

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/yaolinglong/144/488381_2.png)
](/u/yaolinglong)

[姚小凌龙](/u/yaolinglong)[yaolinglong](/u/yaolinglong) ![](https://linux.do/images/emoji/twemoji/china.png?v=14) 

[6月 23 日](/t/topic/745106/3?u=niyan2025 "发布日期")

牛逼的佬

  

4

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/handsome/144/736205_2.png)
](/u/handsome)

[大帅哥](/u/handsome)[handsome](/u/handsome)种子用户 ![](https://linux.do/images/emoji/twemoji/rage.png?v=14) 

[6月 23 日](/t/topic/745106/4?u=niyan2025 "发布日期")

感谢大佬教程

  

3

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chchchchc/144/240044_2.png)
](/u/chchchchc)

[chchchchc](/u/chchchchc)指导顾问

[6月 23 日](/t/topic/745106/5?u=niyan2025 "发布日期")

gemini调用工具真的太懒了

  

1 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14)

tieba\_087

4

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/throttle/144/846184_2.png)
](/u/Throttle)

[方块](/u/Throttle)[Throttle](/u/Throttle)解决方案机构

[6月 23 日](/t/topic/745106/6?u=niyan2025 "发布日期")

感谢分享！！

  

2

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/sczheng/144/163381_2.png)
](/u/SCzheng)

[郑御白](/u/SCzheng)[SCzheng](/u/SCzheng)Regular

[6月 23 日](/t/topic/745106/7?u=niyan2025 "发布日期")

mark mark

  

1

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/haleclipse/144/606178_2.png)
](/u/Haleclipse)

[哈雷彗星](/u/Haleclipse)[Haleclipse](/u/Haleclipse)解決策の宝庫 ![](https://linux.do/images/emoji/twemoji/dizzy.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/chchchchc/72/240044_2.png)
 chchchchc

[6月 23 日](/t/topic/745106/8?u=niyan2025 "发布日期")

没有那个 “想法”

  

![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14)

tieba\_087

1

​

​ ​ 回复

[![](https://linux.do/letter_avatar/a3members/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/a3members)

[a3members](/u/a3members)

[6月 23 日](/t/topic/745106/9?u=niyan2025 "发布日期")

佬 如果我用vertex expree mode的api env要怎么填

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/sczheng/144/163381_2.png)
](/u/SCzheng)

[郑御白](/u/SCzheng)[SCzheng](/u/SCzheng)Regular

[6月 23 日](/t/topic/745106/10?u=niyan2025 "发布日期")

为什么我调用gemini会默认去调用vertex?明明我配置的是gemini

  

1

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/kavi/144/306357_2.png)
](/u/Kavi)

[Kavi](/u/Kavi)一元复始

[6月 23 日](/t/topic/745106/11?u=niyan2025 "发布日期")

学习并点赞 ![](https://linux.do/images/emoji/twemoji/rofl.png?v=14)

  

​

​ ​ 回复

[![](https://linux.do/letter_avatar/touchtop/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/touchtop)

[touchtop](/u/touchtop)

[6月 23 日](/t/topic/745106/12?u=niyan2025 "发布日期")

感谢分享

  

​

​ ​ 回复

[![](https://linux.do/letter_avatar/jayzqj/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/jayzqj)

[暴富](/u/jayzqj)[jayzqj](/u/jayzqj)

[6月 23 日](/t/topic/745106/13?u=niyan2025 "发布日期")

感谢分享

  

​

​ ​ 回复

[![](https://linux.do/letter_avatar/lucas2024/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/lucas2024)

[Lucas](/u/lucas2024) [lucas2024](/u/lucas2024)大预言家

[6月 23 日](/t/topic/745106/14?u=niyan2025 "发布日期")

技术贴，点赞

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/1441853031/144/885504_2.png)
](/u/1441853031)

[FoxCode小助手](/u/1441853031)[1441853031](/u/1441853031)一元复始 ![](https://linux.do/images/emoji/twemoji/grapes.png?v=14) 

[6月 23 日](/t/topic/745106/15?u=niyan2025 "发布日期")

给技术佬点赞~

  

1 个回复

![](https://linux.do/images/emoji/twemoji/laughing.png?v=14)

laughing

1

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/1441853031/72/885504_2.png)
 FoxCode小助手

[6月 23 日](/t/topic/745106/16?u=niyan2025 "发布日期")

并非技术（

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lyt/144/694_2.png)
](/u/lyt)

[子兮](/u/lyt)[lyt](/u/lyt)浴火重生 ![](https://linux.do/uploads/default/original/3X/5/9/596da26825d2a806bd1952b5231f24d212866c1b.png?v=14) 

[6月 23 日](/t/topic/745106/17?u=niyan2025 "发布日期")

qianlaixuexi

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/crolin/144/679195_2.png)
](/u/crolin)

[肉山大魔王](/u/crolin)[crolin](/u/crolin)文化宣导员

[6月 23 日](/t/topic/745106/18?u=niyan2025 "发布日期")

明天试下，看看捞友的公益的API能用不，我还没试过claude code好用不

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/liulianmantou/144/383168_2.png)
](/u/liulianmantou)

[liulianmantou](/u/liulianmantou)

[6月 23 日](/t/topic/745106/19?u=niyan2025 "发布日期")

_牛！又打开了一扇新大门！_

  

​

​ ​ 回复

[![](https://linux.do/letter_avatar/deuspamm/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/deuspamm)

[deuspamm](/u/deuspamm)

[6月 23 日](/t/topic/745106/20?u=niyan2025 "发布日期")

大佬，为啥一直报错。  
用的论坛里的第三方免费gemini接口

```


`00:25:35 - LiteLLM:DEBUG: litellm_logging.py:1932 - Logging Details LiteLLM-Failure Call: []
2025-06-24 00:25:35,738 - ERROR - Error processing request: {
  "error": "litellm.APIError: APIError: OpenAIException - 'str' object has no attribute 'model_dump'",
  "type": "APIError",
  "traceback": "Traceback (most recent call last):\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/llms/openai/openai.py\", line 800, in acompletion\n    stringified_response = response.model_dump()\nAttributeError: 'str' object has no attribute 'model_dump'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/main.py\", line 471, in acompletion\n    response = await init_response\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/llms/openai/openai.py\", line 841, in acompletion\n    raise OpenAIError(\nlitellm.llms.openai.common_utils.OpenAIError: 'str' object has no attribute 'model_dump'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/root/dev/projects/freecc/server.py\", line 1022, in create_message\n    litellm_response = await litellm.acompletion(**litellm_request)\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/utils.py\", line 1441, in wrapper_async\n    raise e\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/utils.py\", line 1300, in wrapper_async\n    result = await original_function(*args, **kwargs)\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/main.py\", line 490, in acompletion\n    raise exception_type(\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py\", line 2214, in exception_type\n    raise e\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py\", line 455, in exception_type\n    raise APIError(\nlitellm.exceptions.APIError: litellm.APIError: APIError: OpenAIException - 'str' object has no attribute 'model_dump'\n",
  "message": "litellm.APIError: APIError: OpenAIException - 'str' object has no attribute 'model_dump'",
  "status_code": 500,
  "llm_provider": "openai",
  "model": "openai/gemini-2.5-flash-preview-05-20"
}` 
```

  

2 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/letter_avatar/deuspamm/72/5_d44a9b381edc88181525e3c8350177ca.png)
 deuspamm

[6月 23 日](/t/topic/745106/21?u=niyan2025 "发布日期")

把 .env 里的 LOG\_REQUEST\_BODY=“true” 开开看看，或者是哪个佬的免费站，我明天试试

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/dragon1013/144/598381_2.png)
](/u/dragon1013)

[dragon](/u/dragon1013)[dragon1013](/u/dragon1013)活跃用户

[6月 23 日](/t/topic/745106/22?u=niyan2025 "发布日期")

后排学习

  

​

​ ​ 回复

[![](https://linux.do/letter_avatar/gitibmchat2/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/gitibmchat2)

[gitibm2](/u/gitibmchat2)[gitibmchat2](/u/gitibmchat2)一元复始

[6月 23 日](/t/topic/745106/23?u=niyan2025 "发布日期")

厉害厉害

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/aza/144/237307_2.png)
](/u/aza)

[阿萨Aza](/u/aza)[aza](/u/aza)圆圆满满 ![](https://linux.do/uploads/default/original/3X/5/9/596da26825d2a806bd1952b5231f24d212866c1b.png?v=14) 

 ![](https://linux.do/letter_avatar/deuspamm/72/5_d44a9b381edc88181525e3c8350177ca.png)
 deuspamm

[6月 23 日](/t/topic/745106/24?u=niyan2025 "发布日期")

是不是base\_url 没加 /v1

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/letter_avatar/deuspamm/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/deuspamm)

[deuspamm](/u/deuspamm)

 ![](https://linux.do/user_avatar/linux.do/aza/72/237307_2.png)
 阿萨Aza

[6月 24 日](/t/topic/745106/25?u=niyan2025 "发布日期")

果然是没有加v1的问题，谢谢大佬！

  

1

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/144/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

[6月 24 日](/t/topic/745106/26?u=niyan2025 "发布日期")

为啥我不行啊，我的请求都没到freecc

我用cherry 测试可以，但是用claude code就不行了  

[![](https://linux.do/uploads/default/original/4X/6/8/5/6858554464ae20fcda694b7e541086e19b54ed2c.png)

image1099×431 11.3 KB

](https://linux.do/uploads/default/original/4X/6/8/5/6858554464ae20fcda694b7e541086e19b54ed2c.png "image")

  

[![](https://linux.do/uploads/default/original/4X/0/0/0/00030ca4af48d5be0b90d822e6ce91e47dd81e50.png)

image1106×258 5.88 KB

](https://linux.do/uploads/default/original/4X/0/0/0/00030ca4af48d5be0b90d822e6ce91e47dd81e50.png "image")

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/lccong/72/589635_2.png)
 lccong

[6月 24 日](/t/topic/745106/27?u=niyan2025 "发布日期")

目前只做了 OpenAI 格式的兼容，gemini 自定义 base url litellm 不支持，vertex express mode 的请求也不支持，佬用的哪个请求，我明天可以让 CC 适配一下

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/letter_avatar/wendavid/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/WenDavid)

[wendavid](/u/WenDavid)活跃用户

[6月 24 日](/t/topic/745106/28?u=niyan2025 "发布日期")

理论上讲感觉用litellm可能是最简单的？

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/144/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/72/625306_2.png)
 Cha

[6月 24 日](/t/topic/745106/29?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha:

> OpenAI 格式的兼容

OpenAI 格式的兼容 用的就是这个。。

  

![](https://linux.do/images/emoji/twemoji/open_mouth.png?v=14)

open\_mouth

1

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/letter_avatar/wendavid/72/5_d44a9b381edc88181525e3c8350177ca.png)
 wendavid

[6月 24 日](/t/topic/745106/30?u=niyan2025 "发布日期")

是的，不过 function call 这一块需要手动转，不然就只是纯 chat 了

  

1 个回复

1

​

​ ​ 回复

[![](https://linux.do/letter_avatar/wendavid/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/WenDavid)

[wendavid](/u/WenDavid)活跃用户

 ![](https://linux.do/user_avatar/linux.do/chacha/72/625306_2.png)
 Cha

[6月 24 日](/t/topic/745106/31?u=niyan2025 "发布日期")

是，不知道litellm里面有没有能转的法子hhh

以及感觉既然gemini调用工具有问题的话，会不会搭个流水线gemini读完扔给Claude写工具的参数会比较好？

example的疑虑的话，其实很可能主要是因为哈基米是思考模型

关于function call的ai studio api，好像默认是没这个功能的，我认为写一个结构化输出比较好。

关于haiku相关确实是这样的，但是haiku其实也用来做edit之类的工作好像，另外还有一些命名之类的工作好像

  

2 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/letter_avatar/wendavid/72/5_d44a9b381edc88181525e3c8350177ca.png)
 wendavid

[6月 24 日](/t/topic/745106/32?u=niyan2025 "发布日期")

有的，目前这个项目用的就是 litellm hhh 不过感觉没有 new api 自带的格式支持做得好，打算抽空抄一遍它的实现

  

2 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/144/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/72/625306_2.png)
 Cha

[6月 24 日](/t/topic/745106/33?u=niyan2025 "发布日期")

我现在是伪登录，要用我的claude账号先登录吗？

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/lccong/72/589635_2.png)
 lccong

[6月 24 日](/t/topic/745106/34?u=niyan2025 "发布日期")

不用登录的，你可以把 log 开一下看看详细错误

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/letter_avatar/wendavid/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/WenDavid)

[wendavid](/u/WenDavid)活跃用户

 ![](https://linux.do/user_avatar/linux.do/chacha/72/625306_2.png)
 Cha

[6月 24 日](/t/topic/745106/35?u=niyan2025 "发布日期")

hhh主要是litellm还有透传之类的，感觉用起来就比较方便

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/144/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/72/625306_2.png)
 Cha

[6月 24 日](/t/topic/745106/36?u=niyan2025 "发布日期")

全开了，就是请求没有转发  

[![](https://linux.do/uploads/default/optimized/4X/9/e/d/9eda0c7edd47f5da18c4e32aac7171e6286518cb_2_690x329.png)

image1152×550 36.1 KB

](https://linux.do/uploads/default/original/4X/9/e/d/9eda0c7edd47f5da18c4e32aac7171e6286518cb.png "image")

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/letter_avatar/wendavid/72/5_d44a9b381edc88181525e3c8350177ca.png)
 wendavid

[6月 24 日](/t/topic/745106/37?u=niyan2025 "发布日期")

至于 ai studio，站内有大佬做了一个 build 版的 [https://linux.do/t/topic/722597](https://linux.do/t/topic/722597) 这个就什么都支持，不过我没接上 CC 一直报参数错误，空了再研究（另外说一句，这个用来跑 roocode 很爽！速度非常快）

  

1 个回复

2

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/lccong/72/589635_2.png)
 lccong

[6月 24 日](/t/topic/745106/38?u=niyan2025 "发布日期")

claude-proxy.log 文件里面也没有吗

  

2 个回复

1

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/144/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/72/625306_2.png)
 Cha

[6月 24 日](/t/topic/745106/39?u=niyan2025 "发布日期")

[![](https://linux.do/uploads/default/optimized/4X/f/9/2/f929a41f824ae131cd46d6776938d049af85badd_2_690x242.png)

image1392×490 116 KB

](https://linux.do/uploads/default/original/4X/f/9/2/f929a41f824ae131cd46d6776938d049af85badd.png "image")

  
没有。。

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/144/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/72/625306_2.png)
 Cha

[6月 24 日](/t/topic/745106/40?u=niyan2025 "发布日期")

卧槽，可以了。。

我把wsl的网络模式改成nat就可以了。。。

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/144/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/72/625306_2.png)
 Cha

[6月 24 日](/t/topic/745106/41?u=niyan2025 "发布日期")

这个我试了下，好像不支持工具调用 tools

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/letter_avatar/gitibmchat2/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/gitibmchat2)

[gitibm2](/u/gitibmchat2)[gitibmchat2](/u/gitibmchat2)一元复始

[6月 24 日](/t/topic/745106/42?u=niyan2025 "发布日期")

感谢感谢

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/lccong/72/589635_2.png)
 lccong

[6月 24 日](/t/topic/745106/43?u=niyan2025 "发布日期")

那大概率是你的 key 可能不支持 fc 哦

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/sb_fantast/144/225944_2.png)
](/u/SB_Fantast)

[一杯白开水](/u/SB_Fantast)[SB\_Fantast](/u/SB_Fantast) ![](https://linux.do/images/emoji/twemoji/grinning.png?v=14) 

[6月 25 日](/t/topic/745106/44?u=niyan2025 "发布日期")

[![](https://linux.do/uploads/default/original/4X/c/f/2/cf2acab6bbb351f1745f1e970ebf6997b7631960.png)

image1113×626 18.8 KB

](https://linux.do/uploads/default/original/4X/c/f/2/cf2acab6bbb351f1745f1e970ebf6997b7631960.png "image")

  
为什么我这边提示要登入?

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/letter_avatar/fengsanle/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/fengsanle)

[fengsanle](/u/fengsanle)

 ![](https://linux.do/user_avatar/linux.do/chacha/72/625306_2.png)
 Cha

[6月 25 日](/t/topic/745106/45?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha:

> `export ANTHROPIC_BASE_URL=http://localhost:8082 && claude`

[![](https://linux.do/uploads/default/optimized/4X/c/c/7/cc74a1eae78b2bbc35dc54233317a4b704ff1070_2_690x153.jpeg)

image1588×354 41.9 KB

](https://linux.do/uploads/default/original/4X/c/c/7/cc74a1eae78b2bbc35dc54233317a4b704ff1070.jpeg "image")

  
啥情况啊 检查好多遍了 服务是正常启动的 可到了claude这一步就是连接不上

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ayt407123/144/197431_2.png)
](/u/ayt407123)

[ayt407123](/u/ayt407123)一元复始

[6月 25 日](/t/topic/745106/46?u=niyan2025 "发布日期")

佬，Claude code和Cline、Roo code、Continue这几个相比，使用Claude 4 sonnet，你觉得哪个的Agent模式更好用呢？目前只尝试了roo，确实token消耗如流水啊 ![](https://linux.do/images/emoji/twemoji/rofl.png?v=14)
  
我只用支持设置base url的扩展或者项目，除了我说的这几个，佬是否还有其他的推荐？

  

1 个回复

1

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/144/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/ayt407123/72/197431_2.png)
 ayt407123

[6月 25 日](/t/topic/745106/47?u=niyan2025 "发布日期")

cc 官方满血 sonnet 4 其实是最好用的，亲儿子各项 prompt 都是最佳的，其他都不太行，roocode cline 我都用过，continue 没用过不清楚

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/nerokim/144/114173_2.png)
](/u/nerokim)

[🍏네로🍎](/u/nerokim)[nerokim](/u/nerokim)

[6月 25 日](/t/topic/745106/48?u=niyan2025 "发布日期")

感谢分享 ![](https://linux.do/images/emoji/twemoji/hand_with_index_finger_and_thumb_crossed.png?v=14)

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ayt407123/144/197431_2.png)
](/u/ayt407123)

[ayt407123](/u/ayt407123)一元复始

 ![](https://linux.do/user_avatar/linux.do/chacha/72/625306_2.png)
 Cha

[6月 25 日](/t/topic/745106/49?u=niyan2025 "发布日期")

好的，感谢佬的分享。话说像Augment、cursor上面他们打包好的sonnet4是不是都有降智的风险？就是用的太猛会给你偷偷调包别的模型来顶包上。我总感觉会有这种情况，所以我都是用自己的key ![](https://linux.do/images/emoji/twemoji/smiling_face_with_tear.png?v=14)

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/578382239/144/226770_2.png)
](/u/578382239)

[南山](/u/578382239)[578382239](/u/578382239)一元复始

[6月 25 日](/t/topic/745106/50?u=niyan2025 "发布日期")

感谢佬友

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/sb_fantast/144/225944_2.png)
](/u/SB_Fantast)

[一杯白开水](/u/SB_Fantast)[SB\_Fantast](/u/SB_Fantast) ![](https://linux.do/images/emoji/twemoji/grinning.png?v=14) 

 ![](https://linux.do/letter_avatar/fengsanle/72/5_d44a9b381edc88181525e3c8350177ca.png)
 fengsanle

[6月 26 日](/t/topic/745106/51?u=niyan2025 "发布日期")

换个节点

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/letter_avatar/fengsanle/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/fengsanle)

[fengsanle](/u/fengsanle)

 ![](https://linux.do/user_avatar/linux.do/sb_fantast/72/225944_2.png)
 一杯白开水

[6月 26 日](/t/topic/745106/52?u=niyan2025 "发布日期")

美国vps上本地搭建的  
确认8082端口开启 curl返回可用  
已经这个问题

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/sb_fantast/144/225944_2.png)
](/u/SB_Fantast)

[一杯白开水](/u/SB_Fantast)[SB\_Fantast](/u/SB_Fantast) ![](https://linux.do/images/emoji/twemoji/grinning.png?v=14) 

 ![](https://linux.do/letter_avatar/fengsanle/72/5_d44a9b381edc88181525e3c8350177ca.png)
 fengsanle

[6月 26 日](/t/topic/745106/53?u=niyan2025 "发布日期")

使用过程中也有碰到过 claudecode 卡在登入界面,一直连接失败,我的做法就是换个节点就可以,登入进去,那么再切回来原来的节点也正常,偶尔会碰到,玄学

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/kev1npros/144/743726_2.png)
](/u/kev1npros)

[kev1npros](/u/kev1npros)

 ![](https://linux.do/user_avatar/linux.do/sb_fantast/72/225944_2.png)
 一杯白开水

[6月 26 日](/t/topic/745106/54?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha:

> `https://github.com/chachako/freecc`

我也是诶，所以就是要登录吗。。可是我登录就要我首充5刀。。。

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/jason_wong1/144/370637_2.png)
](/u/jason_wong1)

[jason wong](/u/jason_wong1)[jason\_wong1](/u/jason_wong1)

[6月 27 日](/t/topic/745106/55?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/kev1npros/48/743726_2.png)
 kev1npros:

> 我也是诶，所以就是要登录吗。。可是我登录就要我首充 5 刀。。

是必须要首充5刀，然后生成一个APIKEY才能使用么？我也是400  

[![](https://linux.do/uploads/default/optimized/4X/8/a/2/8a21ae727d1df75e3b72b019a0da194afbb5a14d_2_690x237.jpeg)

image1226×422 92.5 KB

](https://linux.do/uploads/default/original/4X/8/a/2/8a21ae727d1df75e3b72b019a0da194afbb5a14d.jpeg "image")

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/letter_avatar/barryos/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/barryOS)

[热佬们的小跟班](/u/barryOS)[barryOS](/u/barryOS)一元复始

[6月 27 日](/t/topic/745106/56?u=niyan2025 "发布日期")

试用了下，真的不太行，也就官方claude的好用

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/kev1npros/144/743726_2.png)
](/u/kev1npros)

[kev1npros](/u/kev1npros)

 ![](https://linux.do/user_avatar/linux.do/jason_wong1/72/370637_2.png)
 jason wong

[6月 27 日](/t/topic/745106/57?u=niyan2025 "发布日期")

我不知道，我早上乱弄一通结果就进去了。。。

  

1

​

​ ​ 回复

[![](https://linux.do/letter_avatar/orangej/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/orangej)

[orangej](/u/orangej)

1

[6月 27 日](/t/topic/745106/58?u=niyan2025 "发布日期")

启动claude，配置 ANTHROPIC\_AUTH\_TOKEN 环境变量，可以跳过登录

```


`export DISABLE_PROMPT_CACHING='1' \
       ANTHROPIC_AUTH_TOKEN='test' \
       ANTHROPIC_BASE_URL='http://127.0.0.1:8082' \
       API_TIMEOUT_MS='600000' && \
claude` 
```

顺便说下，和gemini真的不太搭，函数调用不太行，即使加了增强函数调用的提示词，效果也不行

  

2

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/hbin_zhuang/144/115303_2.png)
](/u/Hbin_Zhuang)

[HHH](/u/Hbin_Zhuang)[Hbin\_Zhuang](/u/Hbin_Zhuang)一元复始

[6月 28 日](/t/topic/745106/60?u=niyan2025 "发布日期")

想问下佬 这个跟直接使用 gemini cli 有啥区别吗

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/jiangyufandf/144/780354_2.png)
](/u/jiangyufandf)

[姜宇凡](/u/jiangyufandf)[jiangyufandf](/u/jiangyufandf)

[6月 28 日](/t/topic/745106/61?u=niyan2025 "发布日期")

用了一段时间，还是通过中转代理的方法使用其它第三方api对接了大语言模型；感觉还不错，不过我还是稍微改了一下，配置了个脚本和全局命令用来转模型是，这样可以随时转我想要的方案  

[![](https://linux.do/uploads/default/optimized/4X/b/a/9/ba978f97c79c62897383be505221e52b489e8c4f_2_690x447.jpeg)

截屏2025-06-29 00.38.361920×1246 84.2 KB

](https://linux.do/uploads/default/original/4X/b/a/9/ba978f97c79c62897383be505221e52b489e8c4f.jpeg "截屏2025-06-29 00.38.36")

  

[![](https://linux.do/uploads/default/optimized/4X/9/b/c/9bc38565576ade44edd2acf96cad7949435707b9_2_690x448.jpeg)

截屏2025-06-29 00.40.421920×1247 96.9 KB

](https://linux.do/uploads/default/original/4X/9/b/c/9bc38565576ade44edd2acf96cad7949435707b9.jpeg "截屏2025-06-29 00.40.42")

[![](https://linux.do/uploads/default/optimized/4X/e/2/a/e2a3f660ce50e7396281365fa819fb66635039e7_2_489x499.png)

截屏2025-06-29 00.37.311456×1488 480 KB

](https://linux.do/uploads/default/original/4X/e/2/a/e2a3f660ce50e7396281365fa819fb66635039e7.png "截屏2025-06-29 00.37.31")

  

4 个回复

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

2

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/144/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

[6月 28 日](/t/topic/745106/62?u=niyan2025 "发布日期")

有人测试2.5 pro​![](https://linux.do/images/emoji/twemoji/plus.png?v=14)
2.5flash的效果怎么样嘛

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/duolabmeng6/144/131552_2.png)
](/u/duolabmeng6)

[duolabmeng6](/u/duolabmeng6)

[6月 28 日](/t/topic/745106/63?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha:

> `https://github.com/chachako/freecc.git`

怎么登录啊 佬  

[![](https://linux.do/uploads/default/optimized/4X/6/3/0/6305711e1262bd5de66a7082401933297f2f2f57_2_688x500.png)

image1772×1286 75 KB

](https://linux.do/uploads/default/original/4X/6/3/0/6305711e1262bd5de66a7082401933297f2f2f57.png "image")

  

3 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/haleclipse/144/606178_2.png)
](/u/Haleclipse)

[哈雷彗星](/u/Haleclipse)[Haleclipse](/u/Haleclipse)解決策の宝庫 ![](https://linux.do/images/emoji/twemoji/dizzy.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/jiangyufandf/72/780354_2.png)
 姜宇凡

[6月 28 日](/t/topic/745106/64?u=niyan2025 "发布日期")

考虑分享吗？方案预设还不错嗷

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/haleclipse/144/606178_2.png)
](/u/Haleclipse)

[哈雷彗星](/u/Haleclipse)[Haleclipse](/u/Haleclipse)解決策の宝庫 ![](https://linux.do/images/emoji/twemoji/dizzy.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/duolabmeng6/72/131552_2.png)
 duolabmeng6

[6月 28 日](/t/topic/745106/65?u=niyan2025 "发布日期")

这帖子教你用的方案是 改API 端点 接 proxy转换 来使用

你点开了 订阅计划 账号的登录. . . . . .

  

2 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/duolabmeng6/144/131552_2.png)
](/u/duolabmeng6)

[duolabmeng6](/u/duolabmeng6)

 ![](https://linux.do/user_avatar/linux.do/haleclipse/72/606178_2.png)
 哈雷彗星

[6月 28 日](/t/topic/745106/66?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha:

> `export ANTHROPIC_BASE_URL=http://localhost:8082 && claude`

我打开了了啊 这个uv的程序也启动成功了..但是进去界面就是这个登录的 咋办哦  

[![](https://linux.do/uploads/default/optimized/4X/0/4/f/04f01e3e5fb2f0221a6dfb6cdd5f11e50e7a085f_2_689x264.png)

image2390×916 215 KB

](https://linux.do/uploads/default/original/4X/0/4/f/04f01e3e5fb2f0221a6dfb6cdd5f11e50e7a085f.png "image")

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/duolabmeng6/144/131552_2.png)
](/u/duolabmeng6)

[duolabmeng6](/u/duolabmeng6)

 ![](https://linux.do/user_avatar/linux.do/haleclipse/72/606178_2.png)
 哈雷彗星

[6月 28 日](/t/topic/745106/67?u=niyan2025 "发布日期")

[![](https://linux.do/uploads/default/optimized/4X/f/4/2/f422ecd5c481b9436d6b80e29162108d6ecb33fb_2_542x500.png)

image1134×1046 87.1 KB

](https://linux.do/uploads/default/original/4X/f/4/2/f422ecd5c481b9436d6b80e29162108d6ecb33fb.png "image")

  

[![](https://linux.do/uploads/default/optimized/4X/0/8/5/085d7e80be4a86f3c9c27912fbaadf92a1d6bf05_2_690x314.png)

image1950×890 137 KB

](https://linux.do/uploads/default/original/4X/0/8/5/085d7e80be4a86f3c9c27912fbaadf92a1d6bf05.png "image")

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/jiangyufandf/144/780354_2.png)
](/u/jiangyufandf)

[姜宇凡](/u/jiangyufandf)[jiangyufandf](/u/jiangyufandf)

 ![](https://linux.do/user_avatar/linux.do/jiangyufandf/72/780354_2.png)
 姜宇凡

[6月 29 日](/t/topic/745106/68?u=niyan2025 "发布日期")

大概意思就是配置几个方案，建立一个全局命令使用脚本选择合适的方案，让它执行claude code中config.json文件替换就行。 ![](https://linux.do/images/emoji/twemoji/grinning_face.png?v=14)
 想怎么配都行，建立一个文件夹就行了。让它按照md文档逐一写json的方案，到时候好替换。

[](#p-6907909-h-1)模型方案配置概览
--------------------------

以下是各个模型方案的配置详情，主要关注模型提供商及其使用的模型，不涉及具体的 API 密钥和接口地址。

### [](#p-6907909-h-1-openrouter-geminideepseek-2)方案1-OpenRouter-Gemini+DeepSeek

*   **描述**: OpenRouter 的 Gemini Flash 和 DeepSeek 的混合方案。
*   **主要模型**: `google/gemini-2.5-flash` (通过 OpenRouter)
*   **提供商**:
    *   `deepseek`: 提供 `deepseek-reasoner`, `deepseek-chat` 模型。
    *   `openrouter`: 提供 `google/gemini-2.5-flash` 模型。
*   **任务路由**:
    *   `background`: 路由到 `openrouter` 的 `google/gemini-2.5-flash`。
    *   `think`: 路由到 `deepseek` 的 `deepseek-reasoner`。
    *   `longContext`: 路由到 `openrouter` 的 `google/gemini-2.5-flash`。

### [](#p-6907909-h-2-qwendeepseekopenrouter-gemini-3)方案2-通义Qwen+DeepSeek+OpenRouter-Gemini

*   **描述**: 通义Qwen、DeepSeek 和 OpenRouter 的 Gemini Flash 混合方案。
*   **主要模型**: `qwen3-235b-a22b` (通过 Qwen)
*   **提供商**:
    *   `qwen`: 提供 `qwen3-235b-a22b` 模型。
    *   `deepseek`: 提供 `deepseek-reasoner` 模型。
    *   `openrouter`: 提供 `google/gemini-2.5-flash` 模型。
*   **任务路由**:
    *   `background`: 路由到 `qwen` 的 `qwen3-235b-a22b`。
    *   `think`: 路由到 `deepseek` 的 `deepseek-reasoner`。
    *   `longContext`: 路由到 `openrouter` 的 `google/gemini-2.5-flash`。

### [](#p-6907909-h-3-qwendeepseek-4)方案3-通义Qwen全家桶+DeepSeek

*   **主要模型**: `qwen3-235b-a22b` (通过 Qwen)
*   **提供商**:
    *   `qwen`: 提供 `qwen3-235b-a22b`, `qwen-plus` 模型。
    *   `deepseek`: 提供 `deepseek-reasoner` 模型。
*   **任务路由**:
    *   `background`: 路由到 `qwen` 的 `qwen3-235b-a22b`。
    *   `think`: 路由到 `deepseek` 的 `deepseek-reasoner`。
    *   `longContext`: 路由到 `qwen` 的 `qwen-plus`。

### [](#p-6907909-h-4-qwen-5)方案4-通义Qwen纯方案

*   **主要模型**: `qwen-plus` (通过 Qwen)
*   **提供商**:
    *   `qwen`: 提供 `qwen-plus`, `qwen3-235b-a22b` 模型。
*   **任务路由**:
    *   `background`: 路由到 `qwen` 的 `qwen-plus`。
    *   `think`: 路由到 `qwen` 的 `qwen3-235b-a22b`。
    *   `longContext`: 路由到 `qwen` 的 `qwen3-235b-a22b`。

### [](#p-6907909-h-5-openrouter-geminideepseek-6)方案5-OpenRouter-Gemini+DeepSeek

*   **主要模型**: `google/gemini-2.5-flash-preview-05-20` (通过 OpenRouter)
*   **提供商**:
    *   `openrouter`: 提供 `google/gemini-2.5-flash-preview-05-20` 模型。
    *   `deepseek`: 提供 `deepseek-reasoner` 模型。
*   **任务路由**:
    *   `background`: 路由到 `openrouter` 的 `google/gemini-2.5-flash-preview-05-20`。
    *   `think`: 路由到 `deepseek` 的 `deepseek-reasoner`。
    *   `longContext`: 路由到 `openrouter` 的 `google/gemini-2.5-flash-preview-05-20`。

### [](#p-6907909-h-6-openrouter-7)方案6-OpenRouter高性能方案

*   **主要模型**: `anthropic/claude-sonnet-4` (通过 OpenRouter)
*   **提供商**:
    *   `openrouter`: 提供 `anthropic/claude-sonnet-4`, `google/gemini-2.5-pro` 模型。
*   **任务路由**:
    *   `background`: 路由到 `openrouter` 的 `anthropic/claude-sonnet-4`。
    *   `think`: 路由到 `openrouter` 的 `anthropic/claude-sonnet-4`。
    *   `longContext`: 路由到 `openrouter` 的 `google/gemini-2.5-pro`。

### [](#p-6907909-h-7-deepseek-8)方案7-DeepSeek纯方案

*   **主要模型**: `deepseek-chat` (通过 DeepSeek)
*   **提供商**:
    *   `deepseek`: 提供 `deepseek-reasoner`, `deepseek-chat` 模型。
*   **任务路由**:
    *   `background`: 路由到 `deepseek` 的 `deepseek-chat`。
    *   `think`: 路由到 `deepseek` 的 `deepseek-reasoner`。
    *   `longContext`: 路由到 `deepseek` 的 `deepseek-chat`。

  

3

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/wawajiao/144/770766_2.png)
](/u/wawajiao)

[哇哇叫](/u/wawajiao)[wawajiao](/u/wawajiao)浴火重生

[6月 29 日](/t/topic/745106/69?u=niyan2025 "发布日期")

感谢分享

  

​

​ ​ 回复

[![](https://linux.do/letter_avatar/wangss_linuxdo/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/wangss_linuxdo)

[wangss\_linuxdo](/u/wangss_linuxdo)

[6月 29 日](/t/topic/745106/70?u=niyan2025 "发布日期")

[![](https://linux.do/uploads/default/optimized/4X/a/7/e/a7e33a9fcf319eed90fe17d719cee1f623ab0972_2_690x192.png)

image1905×532 11.4 KB

](https://linux.do/uploads/default/original/4X/a/7/e/a7e33a9fcf319eed90fe17d719cee1f623ab0972.png "image")

  
佬 使用openai格式的站内api中转站，一直api error，请问是什么问题啊

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ffep/144/204295_2.png)
](/u/ffep)

[ffep](/u/ffep)

 ![](https://linux.do/user_avatar/linux.do/jiangyufandf/72/780354_2.png)
 姜宇凡

[7月 1 日](/t/topic/745106/71?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/duolabmeng6/48/131552_2.png)
 duolabmeng6:

> ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
>  ChaCha:
> 
> > `https://github.com/chachako/freecc.git`

能分享一下你的切换器吗?

  

2 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/vimcoder/144/807005_2.png)
](/u/VimCoder)

[VimCoder](/u/VimCoder)Guidance Counsellor

 ![](https://linux.do/user_avatar/linux.do/duolabmeng6/72/131552_2.png)
 duolabmeng6

[7月 1 日](/t/topic/745106/72?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha:

> 确保你的 API **支持 Function Call**，不然 CC 就只是一个聊天客户端了，很多第三方 API 并不支持工具函数调用，这一点需要清楚
> 
> > 不过也不是没有解决办法，可以通过 prompt 让 Gemini 以特定的格式输出调用，类似于 RooCode 的 System Prompt 让 AI 输出[固定 XML 标签格式](https://github.com/RooCodeInc/Roo-Code/blob/9da598c9/src/core/assistant-message/parseAssistantMessageV2.ts)的方式。不过这块的调试比较麻烦，周末再研究一下（社畜 ![](https://linux.do/images/emoji/twemoji/smiling_face_with_tear.png?v=14)
> 
> * * *

export ANTHROPIC\_AUTH\_TOKEN=litellm后再去运行claude试试

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/inlook/144/794227_2.png)
](/u/inlook)

[黄风谷一名小小小修士](/u/inlook)[inlook](/u/inlook) ![](https://linux.do/images/emoji/twemoji/face_with_monocle.png?v=14) 

[7月 1 日](/t/topic/745106/73?u=niyan2025 "发布日期")

继续学习~

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/perfect_timeline/144/365258_2.png)
](/u/Perfect_timeline)

[象牙山小诸葛](/u/Perfect_timeline)[Perfect\_timeline](/u/Perfect_timeline)一元复始 ![](https://linux.do/images/emoji/twemoji/man_technologist.png?v=14) 

[7月 1 日](/t/topic/745106/74?u=niyan2025 "发布日期")

如何配置vertex ai 还提示我配置apikey  

[![](https://linux.do/uploads/default/original/4X/9/3/e/93e2fd6b8133363c94fb098004c6c2f22b026317.png)

image841×162 15.3 KB

](https://linux.do/uploads/default/original/4X/9/3/e/93e2fd6b8133363c94fb098004c6c2f22b026317.png "image")

  
![](https://linux.do/uploads/default/original/4X/8/d/f/8dfa0a4b3a0a6371a504b509515f0ea95847fc07.png)

  

​

​ ​ 回复

[![](https://linux.do/letter_avatar/limm2025/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/limm2025)

[limm2025](/u/limm2025)

[7月 2 日](/t/topic/745106/75?u=niyan2025 "发布日期")

我也推荐一个可以配置外部API使用Claude Code的项目：[GitHub - musistudio/claude-code-router: Use Claude Code as the foundation for coding infrastructure, allowing you to decide how to interact with the model while enjoying updates from Anthropic.](https://github.com/musistudio/claude-code-router)

  

1 个回复

1

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/hret/144/197443_2.png)
](/u/HRET)

[HRET](/u/HRET)一元复始 ![](https://linux.do/images/emoji/twemoji/thought_balloon.png?v=14) 

[7月 2 日](/t/topic/745106/76?u=niyan2025 "发布日期")

mark 一下

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/duolabmeng6/144/131552_2.png)
](/u/duolabmeng6)

[duolabmeng6](/u/duolabmeng6)

 ![](https://linux.do/user_avatar/linux.do/ffep/72/204295_2.png)
 ffep

[7月 2 日](/t/topic/745106/77?u=niyan2025 "发布日期")

![](https://linux.do/letter_avatar/limm2025/48/5_d44a9b381edc88181525e3c8350177ca.png)
 limm2025:

> GitHub - musistudio/claude-code-router: Use Claude Code as the foundation for coding infrastructure, allowing you to decide how to interact with the model while enjoying updates from Anthropic.

我没用起来反正..

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/jiangyufandf/144/780354_2.png)
](/u/jiangyufandf)

[姜宇凡](/u/jiangyufandf)[jiangyufandf](/u/jiangyufandf)

 ![](https://linux.do/user_avatar/linux.do/ffep/72/204295_2.png)
 ffep

[7月 2 日](/t/topic/745106/78?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 ChaCha:

> [GitHub - chachako/freecc: Use any LLM in Claude Code](https://github.com/chachako/freecc.git)

其实简单安装了claude code后，参照这个教程[https://github.com/musistudio/claude-code-router；这个可以桥接其它模型；](https://github.com/musistudio/claude-code-router%EF%BC%9B%E8%BF%99%E4%B8%AA%E5%8F%AF%E4%BB%A5%E6%A1%A5%E6%8E%A5%E5%85%B6%E5%AE%83%E6%A8%A1%E5%9E%8B%EF%BC%9B)  
同时我们需要创建一个文件夹用来设置需要更改的模型json文件；其实原理就是使用脚本对创建的json文件进行目录替换，想一想脚本会把json文件复制一个替换过去官方claude code目录中原本的json文件不就更改了模型了吗，但是脚本直接复制内容会失败，我的失败了，所以我建立的脚本是进行替换操作而不是复制粘贴的操作。看下面这个，直接找个集合ai的编程工具去创建一个claude code的目录文件夹，开始操作就行，因为claude code文件在Mac上是属于系统隐藏的文件，下面有.claude-code-router/config.json这个就是官方的模型文件内容了，也可以不用建脚本，直接让ai进入这里面查看模型，直接重写一个就可以起效了。

[](#p-6982090-claude-code-1)Claude Code 模型切换器使用教程
=================================================

[](#p-6982090-h-2)![](https://linux.do/images/emoji/twemoji/clipboard.png?v=14)
 项目概述
-------------------------------------------------------------------------------------

Claude Code 模型切换器是一个为 Claude Code Router 设计的智能模型配置管理系统。它允许用户在8种预配置的AI模型方案之间轻松切换，支持多种主流AI服务提供商，包括OpenRouter、通义千问、DeepSeek、硅基流动等。

[](#p-6982090-h-3)![](https://linux.do/images/emoji/twemoji/bullseye.png?v=14)
 核心功能特点
--------------------------------------------------------------------------------------

*   ![](https://linux.do/images/emoji/twemoji/white_check_mark.png?v=14)
     **8种预配置方案**: 涵盖不同AI服务提供商的最优组合
*   ![](https://linux.do/images/emoji/twemoji/white_check_mark.png?v=14)
     **一键切换**: 通过简单的命令行界面选择和应用配置
*   ![](https://linux.do/images/emoji/twemoji/white_check_mark.png?v=14)
     **自动备份**: 每次切换前自动备份当前配置，支持回滚
*   ![](https://linux.do/images/emoji/twemoji/white_check_mark.png?v=14)
     **全局命令**: 支持 `claude-model` 全局命令，可在任意目录调用
*   ![](https://linux.do/images/emoji/twemoji/white_check_mark.png?v=14)
     **自动重启**: 切换配置后自动重启Claude Code Router服务
*   ![](https://linux.do/images/emoji/twemoji/white_check_mark.png?v=14)
     **安全可靠**: 完整的错误处理和配置验证机制

[](#p-6982090-h-4)![](https://linux.do/images/emoji/twemoji/building_construction.png?v=14)
 系统架构原理
---------------------------------------------------------------------------------------------------

### [](#p-6982090-h-5)核心组件

1.  **主切换脚本**: `claude-model-switcher.sh`
    
    *   负责配置方案的选择、备份、应用和服务重启
    *   提供友好的交互式界面
2.  **配置方案文件**: `方案*.json`
    
    *   每个方案包含完整的AI模型配置信息
    *   支持多提供商、多模型的路由配置
3.  **全局命令安装**: `setup_claude_model_command.sh`
    
    *   创建全局符号链接，实现任意位置调用

### [](#p-6982090-h-6)工作流程

```


`用户执行 claude-model 命令
        ↓
显示可用的8种配置方案
        ↓
用户选择方案编号
        ↓
自动备份当前配置
        ↓
应用新的配置方案
        ↓
自动重启Claude Code Router服务
        ↓
配置切换完成` 
```

[](#p-6982090-h-7)![](https://linux.do/images/emoji/twemoji/file_folder.png?v=14)
 项目文件结构
-----------------------------------------------------------------------------------------

```


`模型替换文件夹/
├── README.md                              # 项目说明文档
├── claude-model-switcher.sh               # 主切换脚本
├── 全局命令使用说明.md                     # 全局命令详细说明
├── 方案1-OpenRouter-Gemini+DeepSeek.json  # OpenRouter Gemini + DeepSeek
├── 方案2-通义Qwen+DeepSeek+OpenRouter-Gemini.json # 混合方案
├── 方案3-通义Qwen全家桶+DeepSeek.json      # 通义千问 + DeepSeek推理
├── 方案4-通义Qwen纯方案.json              # 纯通义千问方案
├── 方案5-OpenRouter-Gemini+DeepSeek.json  # OpenRouter优化方案
├── 方案6-OpenRouter高性能方案.json        # OpenRouter高性能配置
├── 方案7-DeepSeek纯方案.json              # 纯DeepSeek方案
└── 方案8-OpenRouter-Cypher测试方案.json   # 测试方案` 
```

[](#p-6982090-h-8)![](https://linux.do/images/emoji/twemoji/rocket.png?v=14)
 安装与配置
-----------------------------------------------------------------------------------

### [](#p-6982090-h-1-9)1\. 安装全局命令

#### [](#p-6982090-h-1-10)方法1: 自动安装（推荐）

```


`# 进入项目目录
cd /Users/jiangjianyan/Claude-Code

# 运行安装脚本
bash setup_claude_model_command.sh` 
```

安装脚本提供两种安装方式：

*   **全局安装**（推荐）：需要sudo权限，在任何终端都可使用
*   **用户别名安装**：仅当前用户，需要重新加载shell配置

#### [](#p-6982090-h-2-11)方法2: 手动全局安装

```


`# 创建符号链接到系统PATH
sudo ln -s "/Users/jiangjianyan/Claude-Code/模型替换文件夹/claude-model-switcher.sh" "/usr/local/bin/claude-model"

# 确保脚本有执行权限
chmod +x "/Users/jiangjianyan/Claude-Code/模型替换文件夹/claude-model-switcher.sh"` 
```

### [](#p-6982090-h-2-12)2\. 验证安装

```


`# 重新加载shell配置（如果使用别名安装）
source ~/.zshrc  # 或 source ~/.bashrc

# 测试全局命令
claude-model` 
```

[](#p-6982090-h-13)![](https://linux.do/images/emoji/twemoji/clipboard.png?v=14)
 使用方法
--------------------------------------------------------------------------------------

### [](#p-6982090-h-14)启动模型切换器

在任何终端位置运行：

```


`claude-model` 
```

### [](#p-6982090-h-15)操作界面

运行命令后，会看到如下界面：

```


`╔══════════════════════════════════════════════════════════════╗
║                    Claude Code 模型切换器                    ║
║                   Model Switcher v1.1 (Fixed)               ║
╚══════════════════════════════════════════════════════════════╝

📋 可用的模型配置方案:

[1] 方案1-OpenRouter-Gemini+DeepSeek
    💡 OpenRouter 的 Gemini Flash 和 DeepSeek 的混合方案。

[2] 方案2-通义Qwen+DeepSeek+OpenRouter-Gemini
    💡 通义千问、DeepSeek和OpenRouter的三方混合方案。

[3] 方案3-通义Qwen全家桶+DeepSeek
    💡 通义千问全系列模型配合DeepSeek推理。

[4] 方案4-通义Qwen纯方案
    💡 纯通义千问解决方案。

[5] 方案5-OpenRouter-Gemini+DeepSeek
    💡 OpenRouter Gemini优化配置。

[6] 方案6-OpenRouter高性能方案
    💡 OpenRouter高性能模型配置。

[7] 方案7-DeepSeek纯方案
    💡 纯DeepSeek解决方案。

[8] 方案8-OpenRouter-Cypher测试方案
    💡 OpenRouter测试配置方案。

[0] 退出程序

请选择一个方案 (0-8):` 
```

### [](#p-6982090-h-16)选择和应用方案

1.  **选择方案**: 输入对应的数字（1-8）
2.  **退出程序**: 输入 `0`
3.  **自动处理**: 系统会自动完成备份、应用配置、重启服务等操作

[](#p-6982090-h-17)![](https://linux.do/images/emoji/twemoji/wrench.png?v=14)
 配置方案详解
-------------------------------------------------------------------------------------

### [](#p-6982090-h-18)方案配置结构

每个配置方案都是一个JSON文件，包含以下核心部分：

```


`{
  "name": "方案名称",
  "description": "方案描述",
  "OPENAI_API_KEY": "默认API密钥",
  "OPENAI_BASE_URL": "默认API基础URL",
  "OPENAI_MODEL": "默认模型",
  "Providers": [
    {
      "name": "提供商名称",
      "api_base_url": "API基础URL",
      "api_key": "API密钥",
      "models": ["支持的模型列表"]
    }
  ],
  "Router": {
    "background": "日常对话模型",
    "think": "复杂推理模型",
    "longContext": "长上下文模型"
  }
}` 
```

### [](#p-6982090-h-19)路由配置说明

*   **background**: 用于日常对话和一般任务
*   **think**: 用于复杂推理和深度思考
*   **longContext**: 用于处理长文本和大量上下文

### [](#p-6982090-h-20)典型方案示例

#### [](#p-6982090-h-1-openrouter-geminideepseek-21)方案1: OpenRouter-Gemini+DeepSeek

```


`{
  "name": "方案1-OpenRouter-Gemini+DeepSeek",
  "description": "OpenRouter 的 Gemini Flash 和 DeepSeek 的混合方案。",
  "Router": {
    "background": "openrouter,google/gemini-2.5-flash",
    "think": "deepseek,deepseek-reasoner",
    "longContext": "openrouter,google/gemini-2.5-flash"
  }
}` 
```

#### [](#p-6982090-h-7-deepseek-22)方案7: DeepSeek纯方案

```


`{
  "Router": {
    "background": "deepseek,deepseek-chat",
    "think": "deepseek,deepseek-reasoner",
    "longContext": "deepseek,deepseek-chat"
  }
}` 
```

[](#p-6982090-h-23)![](https://linux.do/images/emoji/twemoji/hammer_and_wrench.png?v=14)
 高级功能
----------------------------------------------------------------------------------------------

### [](#p-6982090-h-24)自动备份机制

*   每次切换前自动备份当前配置
*   备份文件存储在 `~/.claude-code-router/backups/`
*   备份文件命名格式: `config.backup.YYYYMMDD_HHMMSS.json`

### [](#p-6982090-h-25)服务自动重启

*   配置应用后自动停止当前Claude Code Router服务
*   自动启动新配置的服务
*   后台运行，日志输出到 `~/.claude-code-router/ccr.log`

### [](#p-6982090-h-26)配置验证

*   应用配置前验证JSON格式
*   检查必要字段的完整性
*   显示新配置的Router部分供确认

[](#p-6982090-h-27)![](https://linux.do/images/emoji/twemoji/magnifying_glass_tilted_left.png?v=14)
 故障排除
---------------------------------------------------------------------------------------------------------

### [](#p-6982090-h-28)常见问题

1.  **命令未找到**
    
    ```
    
    
    `# 检查符号链接是否存在
    ls -la /usr/local/bin/claude-model
    
    # 重新安装全局命令
    bash setup_claude_model_command.sh` 
    ```
    
2.  **权限问题**
    
    ```
    
    
    `# 确保脚本有执行权限
    chmod +x "/Users/jiangjianyan/Claude-Code/模型替换文件夹/claude-model-switcher.sh"` 
    ```
    
3.  **服务启动失败**
    
    ```
    
    
    `# 检查CCR是否正确安装
    which ccr
    
    # 手动启动服务
    ccr start
    
    # 查看服务状态
    ccr status` 
    ```
    
4.  **配置文件问题**
    
    ```
    
    
    `# 检查配置文件格式
    jq . ~/.claude-code-router/config.json
    
    # 恢复备份配置
    cp ~/.claude-code-router/backups/config.backup.YYYYMMDD_HHMMSS.json ~/.claude-code-router/config.json` 
    ```
    

### [](#p-6982090-h-29)日志查看

```


`# 查看CCR服务日志
tail -f ~/.claude-code-router/ccr.log

# 查看系统日志
tail -f /var/log/system.log | grep ccr` 
```

[](#p-6982090-h-30)![](https://linux.do/images/emoji/twemoji/locked_with_key.png?v=14)
 安全注意事项
----------------------------------------------------------------------------------------------

1.  **API密钥保护**: 配置文件包含敏感的API密钥，请妥善保管
2.  **备份管理**: 定期清理旧的备份文件，避免敏感信息泄露
3.  **权限控制**: 确保配置文件只有当前用户可读写

[](#p-6982090-h-31)![](https://linux.do/images/emoji/twemoji/books.png?v=14)
 扩展使用
----------------------------------------------------------------------------------

### [](#p-6982090-h-32)添加新的配置方案

1.  在 `模型替换文件夹/` 目录下创建新的 `方案X-名称.json` 文件
2.  按照标准格式编写配置内容
3.  重新运行 `claude-model` 命令即可看到新方案

### [](#p-6982090-h-33)自定义配置模板

```


`{
  "name": "自定义方案名称",
  "description": "方案描述信息",
  "OPENAI_API_KEY": "你的API密钥",
  "OPENAI_BASE_URL": "API基础URL",
  "OPENAI_MODEL": "默认模型名称",
  "Providers": [
    {
      "name": "provider_name",
      "api_base_url": "https://api.example.com/v1",
      "api_key": "your_api_key",
      "models": ["model1", "model2"]
    }
  ],
  "Router": {
    "background": "provider_name,model_name",
    "think": "provider_name,model_name",
    "longContext": "provider_name,model_name"
  }
}` 
```

[](#p-6982090-h-34)![](https://linux.do/images/emoji/twemoji/tada.png?v=14)
 总结
-------------------------------------------------------------------------------

Claude Code 模型切换器提供了一个优雅、高效的AI模型配置管理解决方案。通过简单的命令行界面，用户可以在多种预配置的AI服务方案之间快速切换，大大提高了开发和使用效率。

主要优势：

*   **简单易用**: 一条命令完成所有操作
*   **安全可靠**: 自动备份和错误处理
*   **灵活扩展**: 支持自定义配置方案
*   **全局访问**: 可在任意目录使用

无论你是AI开发者、研究人员还是普通用户，这个工具都能帮助你更好地管理和使用不同的AI模型服务。

  

5 个回复

9

​

​ ​ 回复

[![](https://linux.do/letter_avatar/limm2025/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/limm2025)

[limm2025](/u/limm2025)

 ![](https://linux.do/user_avatar/linux.do/duolabmeng6/72/131552_2.png)
 duolabmeng6

[7月 3 日](/t/topic/745106/79?u=niyan2025 "发布日期")

可能你使用的api它还没有适配，它支持的api供应商比较少，按项目的readme里写的，优先使用deepseek和openrouter就好了，还有个云雾，这三个目前我使用正常。

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/torlee/144/457_2.png)
](/u/torlee)

[torlee](/u/torlee)种子用户

 ![](https://linux.do/user_avatar/linux.do/jiangyufandf/72/780354_2.png)
 姜宇凡

[7月 4 日](/t/topic/745106/80?u=niyan2025 "发布日期")

### [](#p-7023440-github-smiling_face_with_tear-1)模型切换器被github 删除了！ ![](https://linux.do/images/emoji/twemoji/smiling_face_with_tear.png?v=14)

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/zhalice2011/144/713126_2.png)
](/u/zhalice2011)

[zhalice2011](/u/zhalice2011)

[7月 4 日](/t/topic/745106/81?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha:

> 你的 API **支持 Function Call**

佬友, 请问如何得知

当前使用的 API **支不支持 Function Call**, 可以通过接口判断吗?

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cai_cai/144/2848_2.png)
](/u/Cai_Cai)

[Cai Cai](/u/Cai_Cai)Regular

[7月 5 日](/t/topic/745106/82?u=niyan2025 "发布日期")

各位佬 是否必须首冲5$ 才可以用？

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cnk_yuw/144/9170_2.png)
](/u/CNk_Yuw)

[CNk Yuw](/u/CNk_Yuw)

[7月 9 日](/t/topic/745106/84?u=niyan2025 "发布日期")

马克。。。。

  

​

​ ​ 回复

我们已经有一段时间没有看到 nishidage 了 — 他/她上次发帖是 9 个月前。

[![](https://linux.do/letter_avatar/nishidage/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/nishidage)

[nishidage](/u/nishidage)

[7月 9 日](/t/topic/745106/85?u=niyan2025 "发布日期")

感谢分享

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ratuaroricus/144/28302_2.png)
](/u/ratuaroricus)

[清风](/u/ratuaroricus)[ratuaroricus](/u/ratuaroricus)大预言家

 ![](https://linux.do/user_avatar/linux.do/jiangyufandf/72/780354_2.png)
 姜宇凡

[7月 9 日](/t/topic/745106/86?u=niyan2025 "发布日期")

共享一下模型切换器吧

  

​

​ ​ 回复

上次访问

[![](https://linux.do/user_avatar/linux.do/smell/144/25269_2.png)
](/u/smell)

[smell](/u/smell)海纳百川 ![](https://linux.do/images/emoji/twemoji/beach_umbrella.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/jiangyufandf/72/780354_2.png)
 姜宇凡

[7月 9 日](/t/topic/745106/87?u=niyan2025 "发布日期")

共享一下模型切换器吧

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/liulianmantou/144/383168_2.png)
](/u/liulianmantou)

[liulianmantou](/u/liulianmantou)

 ![](https://linux.do/user_avatar/linux.do/jiangyufandf/72/780354_2.png)
 姜宇凡

[7月 12 日](/t/topic/745106/88?u=niyan2025 "发布日期")

共享一下模型切换器吧

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/578382239/144/226770_2.png)
](/u/578382239)

[南山](/u/578382239)[578382239](/u/578382239)一元复始

 ![](https://linux.do/user_avatar/linux.do/jiangyufandf/72/780354_2.png)
 姜宇凡

[7月 12 日](/t/topic/745106/89?u=niyan2025 "发布日期")

厉害啊大佬，学习一下

  

​

​ ​ 回复

13 天后

[![](https://linux.do/user_avatar/linux.do/emmmm/144/618600_2.png)
](/u/emmmm)

[emmmm](/u/emmmm)

[20 天](/t/topic/745106/90?u=niyan2025 "发布日期")

佬，这种方式打开code时需要登录吗？我的代理也改了，生效了也，但是发消息还是说得先登录。

  

​

​ ​ 回复

16 天后

[![](https://linux.do/user_avatar/linux.do/iota/144/1007_2.png)
](/u/iota)

[iota](/u/iota)

[4 天](/t/topic/745106/91?u=niyan2025 "发布日期")

我也是，提示登录claude pro，或者使用付费api登录。  
Claude Code can now be used with your Claude subscription or billed based on API usage through your Console account.

Select login method:

1.  Claude account with subscription  
    Starting at $20/mo for Pro, $100/mo for Max - Best value, predictable pricing

❯ 2. Anthropic Console account  
API usage billing

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/keliwen/144/177301_2.png)
](/u/keliwen)

[keliwen](/u/keliwen)一元复始

 ![](https://linux.do/user_avatar/linux.do/jiangyufandf/72/780354_2.png)
 姜宇凡

[1 天](/t/topic/745106/92?u=niyan2025 "发布日期")

佬，你用的什么终端界面？挺好看的，求推荐。

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/jiangyufandf/144/780354_2.png)
](/u/jiangyufandf)

[姜宇凡](/u/jiangyufandf)[jiangyufandf](/u/jiangyufandf)

[18 小时](/t/topic/745106/93?u=niyan2025 "发布日期")

用这个吧

[github.com](https://github.com/musistudio/claude-code-router)

![](https://linux.do/uploads/default/optimized/4X/1/6/9/1696a27fff96525e48613a0fc17ef2ca18106881_2_690x344.png)

### [GitHub - musistudio/claude-code-router: Use Claude Code as the foundation for coding...](https://github.com/musistudio/claude-code-router)

Use Claude Code as the foundation for coding infrastructure, allowing you to decide how to interact with the model while enjoying updates from Anthropic.

直接看教程就行了，安装官方包后继续安装路由包，安装完成后使用ccr code来启动它，如何配置自己的模型，教程里面有，可以用ccr ui来启动，它会跳转一个ui界面，自己就可以配置重启生效后，使用ccr code启动claude code就可以使用了

  

1 个回复

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/jiangyufandf/144/780354_2.png)
](/u/jiangyufandf)

[姜宇凡](/u/jiangyufandf)[jiangyufandf](/u/jiangyufandf)

 ![](https://linux.do/user_avatar/linux.do/jiangyufandf/72/780354_2.png)
 姜宇凡

[18 小时](/t/topic/745106/94?u=niyan2025 "发布日期")

因为有时候，我发现路由代理不知道是我配置太多的agent还是命令太多，导致出现了意外情况，一干就是一整天，路由代理都出现失效状态，由此，我也配置qwen code，大家可以尝试一下[GitHub - QwenLM/qwen-code: qwen-code is a coding agent that lives in digital world.](https://github.com/QwenLM/qwen-code)

  

​

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/sucr/144/427221_2.png)
](/u/sucr)

[sucr](/u/sucr)

[18 小时](/t/topic/745106/95?u=niyan2025 "发布日期")

原来haiku是检查输入，我说为什么有haiku调用。gemini遵循确实差劲，要强调很多次才听话

  

​

​ ​ 回复

分享 加入书签 举报

回复

跟踪 由于您[阅读过此话题](/u/niyan2025/preferences/notifications)，您将看到新回复的数量。

  

*   推荐
*   相关

### 新话题和未读话题

话题列表，带有按钮的列标题可以排序。
| 话题 | 回复 | 浏览量 | 活动 |
| --- | --- | --- | --- |
| [【T佬】![](https://linux.do/images/emoji/twemoji/fire.png?v=14)
Roo Code 超详细教程 - 程序员在 AI 上省钱的同时，也可以提高效率！！！](/t/topic/847207/37)     [365](/t/topic/847207/37 "您在此话题中有 365 个未读帖子") 

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[软件开发](/tag/软件开发),[Gemini](/tag/gemini),[Prompt](/tag/prompt),[原创](/tag/原创 "高质量原创帖子（非AI生成、润色内容，非洗稿、搬运内容）可用。"),[vscode](/tag/vscode)



 | [393](/t/topic/847207/1) | 8.8k | [3 小时](/t/topic/847207/401) |
| [手把手教你在Claw Cloud 上快速部署 GPT-Load！！！](/t/topic/797309/254)  [183](/t/topic/797309/254 "您在此话题中有 183 个未读帖子")

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[软件开发](/tag/软件开发)



 | [425](/t/topic/797309/1) | 6.5k | [20 小时](/t/topic/797309/436) |
| [【Claude Code】使用 claude-code-router 快速配置第三方模型(新增Qwen3示例)](/t/topic/787270/51)  [127](/t/topic/787270/51 "您在此话题中有 127 个未读帖子")

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[软件开发](/tag/软件开发),[Claude](/tag/claude)



 | [171](/t/topic/787270/1) | 7.5k | [2 天](/t/topic/787270/177) |
| [claude code是唯一真神](/t/topic/734386/122)  [26](/t/topic/734386/122 "您在此话题中有 26 个未读帖子")

[开发调优](/c/develop/4)

[纯水](/tag/纯水),[人工智能](/tag/人工智能)



 | [144](/t/topic/734386/1) | 6.6k | [2 天](/t/topic/734386/147) |
| [授人以渔 —— 发挥沉浸式翻译「自定义 AI 专家」的全部威能](/t/topic/517192/101)  [16](/t/topic/517192/101 "您在此话题中有 16 个未读帖子")

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[配置优化](/tag/配置优化),[沉浸式翻译](/tag/沉浸式翻译)



 | [114](/t/topic/517192/1) | 7.7k | [3 天](/t/topic/517192/116) |

### 有 [134 个未读](/unread)话题 和 [183 个新](/new)话题， 或浏览[开发调优](/c/develop/4)中的其他话题

LINUX DO

Where possible begins.

新人必读

*   [注册须知](/t/topic/545650 "写给即将成为佬友的佬友们")
*   [萌新指南](/t/topic/26306 "萌新论坛指南")
*   [社区LOGO](/t/topic/120845 "【最终帖】关于新LOGO你想知道的都在这里")

信任等级

*   [等级概述](/t/topic/2460 "【新人请看】了解Discourse信任度")
*   [等级权限](/t/topic/18797 "Discourse 论坛权限等级表")

社区路线

*   [向左向右](https://linux.do/t/topic/188585 "向左还是向右的路线问题")
*   [数字花园](https://linux.do/t/topic/847468 "《秘密花园园丁邀请函》")

版块之四

*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")

版块之五

*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")

版块之六

*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")
*   [占位链接](# "占位链接")

[Privacy](/privacy) [ToS](/tos) [About](/about) [Status](https://status.linux.do)

Invalid date Invalid date

↑↓⇔⇧⇩