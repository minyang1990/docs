# 「Sophnet」窜稀窜稀 workers 2.0 | 真是个草台班子？更新 Cloudflare workers 部署 - 开发调优 / 开发调优, Lv1 - LINUX DO
[「Sophnet」窜稀窜稀 workers 2.0 | 真是个草台班子？更新 Cloudflare workers 部署 - 开发调优 / 开发调优, Lv1 - LINUX DO](https://linux.do/t/topic/557480) 

  「Sophnet」窜稀窜稀 workers 2.0 | 真是个草台班子？更新 Cloudflare workers 部署 - 开发调优 / 开发调优, Lv1 - LINUX DO                                            

[跳到主要内容](#main-container)

 [![](https://cdn.ldstatic.com/original/3X/9/d/9dd49731091ce8656e94433a26a3ef36062b3994.png)](/) 

[「Sophnet」窜稀窜稀 workers 2.0 | 真是个草台班子？更新 Cloudflare workers 部署](/t/topic/557480)


=================================================================================

[开发调优](/c/develop/4)

[开发调优, Lv1](/c/develop/develop-lv1/20)

[人工智能](/tag/人工智能)

,[DeepSeek](/tag/deepseek)

*   ​
*   ​

*    ![](https://cdn.linux.do/letter_avatar/niyan2025/96/5_d44a9b381edc88181525e3c8350177ca.png)
       [ 2 ](# "2 个未读通知") 

*   [话题](/latest "所有话题")
*   [我的帖子](/u/niyan2025/activity/drafts "我的未发布草稿")
*   [关于](/about "关于此网站的更多详细信息")
*   [即将到来的活动](/upcoming-events "即将到来的活动")
*   更多

外部链接

*   [Status](https://status.linux.do)
*   [T-Shirt](/#)
*   [Connect](https://connect.linux.do)
*   [Webmail](https://webmail.linux.do)
*   [Channel](https://t.me/linux_do_channel)
*   [Telegram](https://t.me/ja_netfilter_group)

类别

*   [开发调优](/c/develop/4 "此版块包含开发、测试、调试、部署、优化、安全等方面的内容")
*   [资源荟萃](/c/resource/14 "包括软件分享、开源仓库、视频课程、书籍等分享")
*   [文档共建](/c/wiki/42 "佬友化身翰林学士，一起来编书了。")
*   [跳蚤市场](/c/trade/10 "交易相关的版块，包含实体和虚拟物品供求、拼车等等")
*   [非我莫属](/c/job/27 "学成文武艺，货与帝王家。招聘/求职分类，只能发此类信息。")
*   [读书成诗](/c/reading/32 "跟着佬友们一起在论坛读完一本书是什么体验？")
*   [扬帆起航](/c/startup/46 "扬帆起航，目标是星辰大海！")
*   [前沿快讯](/c/news/34 "前沿快讯，不出门能知天下事。")
*   [网络记忆](/c/feeds/92 "网络是有记忆的，确信！")
*   [福利羊毛](/c/welfare/36 "正经人谁花那个钱啊～ 此版块供羊毛、抽奖等福利使用。")
*   [搞七捻三](/c/gossip/11 "闲聊吹水的板块。不得讨论政治、色情等违规内容。")
*   [运营反馈](/c/feedback/2 "有关此站点、其组织、运作方式以及如何改进的讨论。")
*   [深海幽域](/c/muted/45 "冰山下的深海。帖子不会上信息流、不会被论坛搜索。")
*   [所有类别](/categories)

标签

*   [人工智能](/tag/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD)
*   [公告](/tag/%E5%85%AC%E5%91%8A)
*   [快问快答](/tag/%E5%BF%AB%E9%97%AE%E5%BF%AB%E7%AD%94)
*   [抽奖](/tag/%E6%8A%BD%E5%A5%96)
*   [精华神帖](/tag/%E7%B2%BE%E5%8D%8E%E7%A5%9E%E5%B8%96)
*   [所有标签](/tags)

消息

*   [收件箱](/u/niyan2025/messages)

*   [我的消息串](/chat/threads "我的消息串")

频道

*   [常规频道](/chat/c/general/2 "🈲 禁止在聊天频道里发送 打卡 等无意义信息，被举报会喜提 禁言1小时 。")

直接消息

*    [![](https://cdn.linux.do/user_avatar/linux.do/huan/48/293194_2.png)  焕昭君](/chat/c/%E7%84%95%E6%98%AD%E5%90%9B/43057 "与 焕昭君 聊天") 
*    [![](https://cdn.linux.do/user_avatar/linux.do/xronus/48/130867_2.png)  Anivix](/chat/c/anivix/32458 "与 Anivix 聊天") 

聊天

Default

​ ​ ​

**真诚**、**友善**、**团结**、**专业**，共建你我引以为荣之社区。[《常见问题解答》](/faq)

[「Sophnet」窜稀窜稀 workers 2.0 | 真是个草台班子？更新 Cloudflare workers 部署](/t/topic/557480)


=================================================================================

[开发调优](/c/develop/4)

[开发调优, Lv1](/c/develop/develop-lv1/20)

[人工智能](/tag/人工智能)

,[DeepSeek](/tag/deepseek)

您已选择 **0** 个帖子。

全选

取消选择

1.2k 浏览量 111 赞 5 链接 29 用户

 [![](https://cdn.linux.do/user_avatar/linux.do/whymeta/96/38970_2.png)
 6](/u/WhyMeta "WhyMeta")

 [![](https://cdn.linux.do/user_avatar/linux.do/ikunla/96/369128_2.png)
 4](/u/ikunla "ikunla")

 [![](https://cdn.linux.do/user_avatar/linux.do/shine/96/1613_2.png)](/u/shine "shine") 

 [![](https://cdn.linux.do/user_avatar/linux.do/handsome/96/477777_2.png)](/u/handsome "handsome") 

 [![](https://cdn.linux.do/user_avatar/linux.do/user89/96/524601_2.png)](/u/user89 "user89") 

阅读时间 8 分钟

总结

​

[4月 13 日](/t/topic/557480/1 "跳到第一个帖子")

1 / 38

4月 13 日

[1 分钟](/t/topic/557480/39)

​

[![](https://cdn.linux.do/user_avatar/linux.do/whymeta/96/38970_2.png)
](/u/WhyMeta)

[汉祖大帝](/u/WhyMeta)

[WhyMeta](/u/WhyMeta)一元复始 ![](https://cdn.linux.do/images/emoji/twemoji/index_pointing_at_the_viewer.png?v=14) 

10

[6 天](/t/topic/557480?u=niyan2025 "发布日期")

**Deno:**  
look zheli ![](https://cdn.linux.do/images/emoji/twemoji/backhand_index_pointing_down.png?v=14)
  
[@Neuroplexus](/u/neuroplexus)

[https://linux.do/t/topic/558976](https://linux.do/t/topic/558976)

**Cloudflare workers 2.0:**

*   增加 KV 存储 token，每次对话先查询 token，有效期内和有效次数(10)外才会更新匿名 token

说明：

*   持久会话上下文需要自己调整客户端的上下文数
    *   nextchat(设置 - 附带历史消息数)
    *   cherrystudio(智能体 - 模型设置 - 上下文数)

部署：

*   Cloudflare home - 存储和数据库 - KV，创建命名空间 `SOPHNET_KV`
*   workers - 设置 - 绑定 - 添加 - KV 命名空间 - 变量名称`SOPHNET_KV` - 选择 KV `SOPHNET_KV`
*   复制代码，粘贴到 workers.js，部署
*   Done.

> [version 2.0.0 for gist](https://gist.githubusercontent.com/WhyMeta/4c59ef14387b6162ec64f48c493c0060/raw/sophnet-cloudflare-worker-0.0.2.js)

不想点🔗，直接展开这里看代码👇```


``// 这是一个将 OpenAI API 请求转换为 SophNet API 请求的代理服务器
// 定义常量
const SOPHNET_BASE_URL = "https://www.sophnet.com/api"; // SophNet API 的基础 URL
const TOKEN_KEY = "sophnet_anonymous_token"; // 存储token的键名
const MAX_RETRIES = 3; // 最大重试次数

// 使用JSDoc注释代替TypeScript接口
/**
 * 匿名令牌响应的接口定义
 * @typedef {Object} AnonymousTokenResponse
 * @property {number} status
 * @property {string} message
 * @property {Object} result
 * @property {string} result.anonymousToken - 匿名访问令牌
 * @property {string} result.expires - 令牌过期时间
 * @property {number} timestamp
 */

/**
 * Token信息的接口定义
 * @typedef {Object} TokenInfo
 * @property {string} token - 访问令牌
 * @property {string} expires - 令牌过期时间
 */

/**
 * SophNet 模型的接口定义
 * @typedef {Object} SophNetModel
 * @property {number} id
 * @property {string|null} serviceUuid
 * @property {string} projectUuid - 项目 UUID
 * @property {string} displayName - 模型显示名称
 * @property {string} modelFamily - 模型家族
 * @property {boolean} available - 模型是否可用
 * @property {boolean} isBaseModel - 是否为基础模型
 * @property {any} features - 模型特性
 * @property {boolean} supportedStream - 是否支持流式响应
 * @property {boolean} supportedImageInputs - 是否支持图像输入
 * @property {Array<Object>} schema - 模型参数架构
 */

/**
 * 模型列表响应的接口定义
 * @typedef {Object} ModelsResponse
 * @property {number} status
 * @property {string} message
 * @property {Array<SophNetModel>} result - 模型列表
 * @property {number} timestamp
 */

// 从KV获取token
/**
 * 从Cloudflare KV中获取存储的token信息
 * @param {Object} env - Cloudflare Workers环境变量
 * @returns {Promise<TokenInfo|null>} - 返回token信息或null
 */
async function getTokenFromKV(env) {
  try {
    const tokenInfoStr = await env.SOPHNET_KV.get(TOKEN_KEY);
    if (!tokenInfoStr) return null;
    
    return JSON.parse(tokenInfoStr);
  } catch (error) {
    console.error("Error getting token from KV:", error);
    return null;
  }
}

// 存储token到KV
/**
 * 将token信息存储到Cloudflare KV
 * @param {Object} env - Cloudflare Workers环境变量
 * @param {string} token - 访问令牌
 * @param {string} expires - 令牌过期时间
 * @returns {Promise<void>}
 */
async function storeTokenToKV(env, token, expires) {
  try {
    const tokenInfo = { token, expires };
    await env.SOPHNET_KV.put(TOKEN_KEY, JSON.stringify(tokenInfo));
  } catch (error) {
    console.error("Error storing token to KV:", error);
  }
}

// 获取匿名token
// 通过 SophNet 的匿名登录 API 获取访问令牌
async function getAnonymousToken(env) {
  try {
    const response = await fetch(`${SOPHNET_BASE_URL}/sys/login/anonymous`, {
      method: "GET",
      headers: {
        "Accept": "application/json",
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36",
      },
    });

    if (!response.ok) {
      throw new Error(`Failed to get token: ${response.status}`);
    }

    const data = await response.json();
    // 存储token到KV
    await storeTokenToKV(env, data.result.anonymousToken, data.result.expires);
    return data.result.anonymousToken;
  } catch (error) {
    console.error("Error getting anonymous token:", error);
    throw error;
  }
}

// 获取有效token
/**
 * 获取有效的访问令牌，如果KV中存在未过期的token则使用，否则获取新token
 * @param {Object} env - Cloudflare Workers环境变量
 * @returns {Promise<string>} - 返回有效的访问令牌
 */
async function getValidToken(env) {
  // 先尝试从KV获取
  const tokenInfo = await getTokenFromKV(env);
  
  // 如果KV中有token且未过期，则使用该token
  if (tokenInfo && new Date(tokenInfo.expires) > new Date()) {
    return tokenInfo.token;
  }
  
  // 否则获取新token
  return await getAnonymousToken(env);
}

// 获取模型列表
// 使用令牌获取 SophNet 可用的模型列表
async function getModels(token, env, retryCount = 0) {
  try {
    const response = await fetch(
      `${SOPHNET_BASE_URL}/public/playground/models`,
      {
        method: "GET",
        headers: {
          "Accept": "application/json",
          "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36",
          "Authorization": `Bearer anon-${token}`,
        },
      },
    );

    // 如果是401或403错误，尝试刷新token并重试
    if ((response.status === 401 || response.status === 403) && retryCount < MAX_RETRIES) {
      const newToken = await getAnonymousToken(env);
      return await getModels(newToken, env, retryCount + 1);
    }

    if (!response.ok) {
      throw new Error(`Failed to get models: ${response.status}`);
    }

    const data = await response.json();
    
    // 移除每次请求后自动刷新token的逻辑
    // 请求成功后获取新token并存储
    // getAnonymousToken(env).catch(err => console.error("Background token refresh failed:", err));
    
    return data.result;
  } catch (error) {
    console.error("Error getting models:", error);
    throw error;
  }
}

// 将SophNet模型转换为OpenAI格式
// 将 SophNet 的模型列表转换为 OpenAI API 格式的模型列表
function transformModelsToOpenAIFormat(models) {
  return {
    object: "list",
    data: models.map((model) => ({
      id: model.modelFamily,
      object: "model",
      created: Date.now(),
      owned_by: "sophnet",
      permission: [{
        id: `modelperm-${model.id}`,
        object: "model_permission",
        created: Date.now(),
        allow_create_engine: false,
        allow_sampling: true,
        allow_logprobs: false,
        allow_search_indices: false,
        allow_view: true,
        allow_fine_tuning: false,
        organization: "*",
        group: null,
        is_blocking: false,
      }],
      root: model.modelFamily,
      parent: null,
    })),
  };
}

// 处理聊天完成请求
// 将 OpenAI 格式的聊天请求转换为 SophNet 格式并发送
async function handleChatCompletions( token,
  requestBody,
  stream,
  env,
  retryCount = 0 ) {
  const sophNetBody = {
    temperature: requestBody.temperature || 1,
    top_p: requestBody.top_p || 1,
    frequency_penalty: requestBody.frequency_penalty || 0,
    presence_penalty: requestBody.presence_penalty || 0,
    max_tokens: requestBody.max_tokens || 2048,
    webSearchEnable: false,
    stop: requestBody.stop || [],
    stream: stream.toString(),
    model_id: requestBody.model,
    messages: requestBody.messages,
  };

  const response = await fetch(
    `${SOPHNET_BASE_URL}/open-apis/v1/chat/completions`,
    {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer anon-${token}`,
        "Accept": stream ? "text/event-stream" : "application/json",
      },
      body: JSON.stringify(sophNetBody),
    },
  );

  // 如果是401或403错误，尝试刷新token并重试
  if ((response.status === 401 || response.status === 403) && retryCount < MAX_RETRIES) {
    console.log(`Token expired, refreshing and retrying (${retryCount + 1}/${MAX_RETRIES})...`);
    const newToken = await getAnonymousToken(env);
    return await handleChatCompletions(newToken, requestBody, stream, env, retryCount + 1);
  }

  if (!response.ok) {
    throw new Error(`Chat completion failed: ${response.status}`);
  }

  // 移除每次请求后自动刷新token的逻辑
  // 请求成功后获取新token并存储
  // getAnonymousToken(env).catch(err => console.error("Background token refresh failed:", err));

  return response;
}

// 转换流式响应
// 将 SophNet 的流式响应转换为 OpenAI 格式的流式响应
async function* transformStreamResponse( readableStream, ) {
  const reader = readableStream.getReader();
  const decoder = new TextDecoder();
  let buffer = "";

  try {
    while (true) {
      const { done, value } = await reader.read();
      if (done) break;

      buffer += decoder.decode(value, { stream: true });
      const lines = buffer.split("\n");
      buffer = lines.pop() || "";

      for (const line of lines) {
        if (line.trim() === "" || !line.startsWith("data:")) continue;
        
        const data = line.substring(5).trim();
        if (data === "[DONE]") {
          yield "data: [DONE]\n\n";
          continue;
        }

        try {
          const sophNetEvent = JSON.parse(data);
          
          // 转换为OpenAI格式的事件
          const openAIEvent = {
            id: sophNetEvent.id || `chatcmpl-${Date.now()}`,
            object: "chat.completion.chunk",
            created: Math.floor(Date.now() / 1000),
            model: sophNetEvent.model || "sophnet-model",
            choices: [
              {
                index: 0,
                delta: {
                  content: sophNetEvent.choices?.[0]?.delta?.content || "",
                },
                finish_reason: sophNetEvent.choices?.[0]?.finish_reason || null,
              },
            ],
          };
          
          yield `data: ${JSON.stringify(openAIEvent)}\n\n`;
        } catch (e) {
          console.error("Error parsing event:", e, "Line:", line);
        }
      }
    }
  } finally {
    reader.releaseLock();
  }
}

// 转换非流式响应
// 将 SophNet 的非流式响应转换为 OpenAI 格式的响应
async function transformNonStreamResponse(response) {
  const sophNetResponse = await response.json();
  
  return {
    id: sophNetResponse.id || `chatcmpl-${Date.now()}`,
    object: "chat.completion",
    created: Math.floor(Date.now() / 1000),
    model: sophNetResponse.model || "sophnet-model",
    choices: [
      {
        index: 0,
        message: {
          role: "assistant",
          content: sophNetResponse.choices?.[0]?.message?.content || "",
        },
        finish_reason: sophNetResponse.choices?.[0]?.finish_reason || "stop",
      },
    ],
    usage: sophNetResponse.usage || {
      prompt_tokens: 0,
      completion_tokens: 0,
      total_tokens: 0,
    },
  };
}

// 主处理函数
// 处理所有 HTTP 请求的主函数
async function handleRequest(request, env) {
  const url = new URL(request.url);
  const path = url.pathname;

  // CORS预检请求处理
  // 处理跨域资源共享的预检请求
  if (request.method === "OPTIONS") {
    return new Response(null, {
      status: 204,
      headers: {
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, OPTIONS",
        "Access-Control-Allow-Headers": "Content-Type, Authorization",
        "Access-Control-Max-Age": "86400",
      },
    });
  }

  // 获取有效token
  let token;
  try {
    token = await getValidToken(env);
  } catch (error) {
    return new Response(
      JSON.stringify({ error: "Failed to get token", details: error.message }),
      {
        status: 500,
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*",
        },
      },
    );
  }

  try {
    // 模型列表接口
    // 处理获取模型列表的请求，对应 OpenAI 的 /v1/models 接口
    if (path === "/v1/models" && request.method === "GET") {
      const models = await getModels(token, env);
      const openAIModels = transformModelsToOpenAIFormat(models);
      
      return new Response(JSON.stringify(openAIModels), {
        status: 200,
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*",
        },
      });
    }
    
    // 聊天完成接口
    // 处理聊天完成请求，对应 OpenAI 的 /v1/chat/completions 接口
    else if (path === "/v1/chat/completions" && request.method === "POST") {
      const requestBody = await request.json();
      const stream = requestBody.stream === true;
      
      const sophNetResponse = await handleChatCompletions(token, requestBody, stream, env);
      
      if (stream) {
        // 处理流式响应
        const transformedStream = new ReadableStream({
          async start(controller) {
            try {
              for await (const chunk of transformStreamResponse(sophNetResponse.body)) {
                controller.enqueue(new TextEncoder().encode(chunk));
              }
              controller.close();
            } catch (error) {
              console.error("Stream transformation error:", error);
              controller.error(error);
            }
          },
        });
        
        return new Response(transformedStream, {
          headers: {
            "Content-Type": "text/event-stream",
            "Cache-Control": "no-cache",
            "Connection": "keep-alive",
            "Access-Control-Allow-Origin": "*",
          },
        });
      } else {
        // 处理非流式响应
        const transformedResponse = await transformNonStreamResponse(sophNetResponse);
        
        return new Response(JSON.stringify(transformedResponse), {
          status: 200,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*",
          },
        });
      }
    }
    
    // 未找到路由
    // 处理不支持的端点
    else {
      return new Response(
        JSON.stringify({ error: "Not found", message: "Endpoint not supported" }),
        {
          status: 404,
          headers: {
            "Content-Type": "application/json",
            "Access-Control-Allow-Origin": "*",
          },
        },
      );
    }
  } catch (error) {
    // 处理请求过程中的错误
    console.error("Request handling error:", error);
    
    return new Response(
      JSON.stringify({ error: "Internal server error", message: error.message }),
      {
        status: 500,
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*",
        },
      },
    );
  }
}

// Cloudflare Workers 入口点
export default {
  async fetch(request, env, ctx) {
    return handleRequest(request, env);
  }
};`` 
``` 

[![](https://cdn.ldstatic.com/optimized/4X/6/5/f/65ff69149f29a75956966bc3e74454f43b8b6093_2_690x396.jpeg)

Mac Studio. 2025-04-14 at 23.38.323310×1902 706 KB

](https://cdn.ldstatic.com/original/4X/6/5/f/65ff69149f29a75956966bc3e74454f43b8b6093.jpeg "Mac Studio. 2025-04-14 at 23.38.32")

* * *

更新 Cloudflare workers 部署(token 随意，代码会生成匿名token，详情看 [@Neuroplexus](/u/neuroplexus)

佬的 [SophNet2Api Deno](https://linux.do/t/topic/537077)

)

[_**version 1.0.0 for gist**_](https://gist.githubusercontent.com/WhyMeta/4c59ef14387b6162ec64f48c493c0060/raw/sophnet-cloudflare-workers.js)

不想点🔗，直接展开这里看代码👇```


``// 这是一个将 OpenAI API 请求转换为 SophNet API 请求的代理服务器
// 定义常量
const SOPHNET_BASE_URL = "https://www.sophnet.com/api"; // SophNet API 的基础 URL

// 使用JSDoc注释代替TypeScript接口
/**
* 匿名令牌响应的接口定义
* @typedef {Object} AnonymousTokenResponse
* @property {number} status
* @property {string} message
* @property {Object} result
* @property {string} result.anonymousToken - 匿名访问令牌
* @property {string} result.expires - 令牌过期时间
* @property {number} timestamp
*/

/**
* SophNet 模型的接口定义
* @typedef {Object} SophNetModel
* @property {number} id
* @property {string|null} serviceUuid
* @property {string} projectUuid - 项目 UUID
* @property {string} displayName - 模型显示名称
* @property {string} modelFamily - 模型家族
* @property {boolean} available - 模型是否可用
* @property {boolean} isBaseModel - 是否为基础模型
* @property {any} features - 模型特性
* @property {boolean} supportedStream - 是否支持流式响应
* @property {boolean} supportedImageInputs - 是否支持图像输入
* @property {Array<Object>} schema - 模型参数架构
*/

/**
* 模型列表响应的接口定义
* @typedef {Object} ModelsResponse
* @property {number} status
* @property {string} message
* @property {Array<SophNetModel>} result - 模型列表
* @property {number} timestamp
*/

// 获取匿名token
// 通过 SophNet 的匿名登录 API 获取访问令牌
async function getAnonymousToken() {
try {
  const response = await fetch(`${SOPHNET_BASE_URL}/sys/login/anonymous`, {
    method: "GET",
    headers: {
      "Accept": "application/json",
      "User-Agent": "OpenAI-Proxy/1.0",
    },
  });

  if (!response.ok) {
    throw new Error(`Failed to get token: ${response.status}`);
  }

  const data = await response.json();
  return data.result.anonymousToken;
} catch (error) {
  console.error("Error getting anonymous token:", error);
  throw error;
}
}

// 获取模型列表
// 使用令牌获取 SophNet 可用的模型列表
async function getModels(token) {
try {
  const response = await fetch(
    `${SOPHNET_BASE_URL}/public/playground/models`,
    {
      method: "GET",
      headers: {
        "Accept": "application/json",
        "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36",
        "Authorization": `Bearer anon-${token}`,
      },
    },
  );

  if (!response.ok) {
    throw new Error(`Failed to get models: ${response.status}`);
  }

  const data = await response.json();
  return data.result;
} catch (error) {
  console.error("Error getting models:", error);
  throw error;
}
}

// 将SophNet模型转换为OpenAI格式
// 将 SophNet 的模型列表转换为 OpenAI API 格式的模型列表
function transformModelsToOpenAIFormat(models) {
return {
  object: "list",
  data: models.map((model) => ({
    id: model.modelFamily,
    object: "model",
    created: Date.now(),
    owned_by: "sophnet",
    permission: [{
      id: `modelperm-${model.id}`,
      object: "model_permission",
      created: Date.now(),
      allow_create_engine: false,
      allow_sampling: true,
      allow_logprobs: false,
      allow_search_indices: false,
      allow_view: true,
      allow_fine_tuning: false,
      organization: "*",
      group: null,
      is_blocking: false,
    }],
    root: model.modelFamily,
    parent: null,
  })),
};
}

// 处理聊天完成请求
// 将 OpenAI 格式的聊天请求转换为 SophNet 格式并发送
async function handleChatCompletions( token,
requestBody,
stream, ) {
const sophNetBody = {
  temperature: requestBody.temperature || 1,
  top_p: requestBody.top_p || 1,
  frequency_penalty: requestBody.frequency_penalty || 0,
  presence_penalty: requestBody.presence_penalty || 0,
  max_tokens: requestBody.max_tokens || 2048,
  webSearchEnable: false,
  stop: requestBody.stop || [],
  stream: stream.toString(),
  model_id: requestBody.model,
  messages: requestBody.messages,
};

const response = await fetch(
  `${SOPHNET_BASE_URL}/open-apis/v1/chat/completions`,
  {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": `Bearer anon-${token}`,
      "Accept": stream ? "text/event-stream" : "application/json",
    },
    body: JSON.stringify(sophNetBody),
  },
);

if (!response.ok) {
  throw new Error(`Chat completion failed: ${response.status}`);
}

return response;
}

// 转换流式响应
// 将 SophNet 的流式响应转换为 OpenAI 格式的流式响应
async function* transformStreamResponse( readableStream, ) {
const reader = readableStream.getReader();
const decoder = new TextDecoder();
let buffer = "";

try {
  while (true) {
    const { done, value } = await reader.read();
    if (done) break;

    buffer += decoder.decode(value, { stream: true });
    const lines = buffer.split("\n");
    buffer = lines.pop() || "";

    for (const line of lines) {
      if (line.trim() === "" || !line.startsWith("data:")) continue;
      
      const data = line.substring(5).trim();
      if (data === "[DONE]") {
        yield "data: [DONE]\n\n";
        continue;
      }

      try {
        const sophNetEvent = JSON.parse(data);
        
        // 转换为OpenAI格式的事件
        const openAIEvent = {
          id: sophNetEvent.id || `chatcmpl-${Date.now()}`,
          object: "chat.completion.chunk",
          created: Math.floor(Date.now() / 1000),
          model: sophNetEvent.model || "sophnet-model",
          choices: [
            {
              index: 0,
              delta: {
                content: sophNetEvent.choices?.[0]?.delta?.content || "",
              },
              finish_reason: sophNetEvent.choices?.[0]?.finish_reason || null,
            },
          ],
        };
        
        yield `data: ${JSON.stringify(openAIEvent)}\n\n`;
      } catch (e) {
        console.error("Error parsing event:", e, "Line:", line);
      }
    }
  }
} finally {
  reader.releaseLock();
}
}

// 转换非流式响应
// 将 SophNet 的非流式响应转换为 OpenAI 格式的响应
async function transformNonStreamResponse(response) {
const sophNetResponse = await response.json();

return {
  id: sophNetResponse.id || `chatcmpl-${Date.now()}`,
  object: "chat.completion",
  created: Math.floor(Date.now() / 1000),
  model: sophNetResponse.model || "sophnet-model",
  choices: [
    {
      index: 0,
      message: {
        role: "assistant",
        content: sophNetResponse.choices?.[0]?.message?.content || "",
      },
      finish_reason: sophNetResponse.choices?.[0]?.finish_reason || "stop",
    },
  ],
  usage: sophNetResponse.usage || {
    prompt_tokens: 0,
    completion_tokens: 0,
    total_tokens: 0,
  },
};
}

// 主处理函数
// 处理所有 HTTP 请求的主函数
async function handleRequest(request) {
const url = new URL(request.url);
const path = url.pathname;

// CORS预检请求处理
// 处理跨域资源共享的预检请求
if (request.method === "OPTIONS") {
  return new Response(null, {
    status: 204,
    headers: {
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Methods": "GET, POST, OPTIONS",
      "Access-Control-Allow-Headers": "Content-Type, Authorization",
      "Access-Control-Max-Age": "86400",
    },
  });
}

// 为每个请求获取新的token
let token;
try {
  token = await getAnonymousToken();
} catch (error) {
  return new Response(
    JSON.stringify({ error: "Failed to get token", details: error.message }),
    {
      status: 500,
      headers: {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
      },
    },
  );
}

try {
  // 模型列表接口
  // 处理获取模型列表的请求，对应 OpenAI 的 /v1/models 接口
  if (path === "/v1/models" && request.method === "GET") {
    const models = await getModels(token);
    const openAIModels = transformModelsToOpenAIFormat(models);
    
    return new Response(JSON.stringify(openAIModels), {
      status: 200,
      headers: {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
      },
    });
  }
  
  // 聊天完成接口
  // 处理聊天完成请求，对应 OpenAI 的 /v1/chat/completions 接口
  else if (path === "/v1/chat/completions" && request.method === "POST") {
    const requestBody = await request.json();
    const stream = requestBody.stream === true;
    
    const sophNetResponse = await handleChatCompletions(token, requestBody, stream);
    
    if (stream) {
      // 处理流式响应
      const transformedStream = new ReadableStream({
        async start(controller) {
          try {
            for await (const chunk of transformStreamResponse(sophNetResponse.body)) {
              controller.enqueue(new TextEncoder().encode(chunk));
            }
            controller.close();
          } catch (error) {
            console.error("Stream transformation error:", error);
            controller.error(error);
          }
        },
      });
      
      return new Response(transformedStream, {
        headers: {
          "Content-Type": "text/event-stream",
          "Cache-Control": "no-cache",
          "Connection": "keep-alive",
          "Access-Control-Allow-Origin": "*",
        },
      });
    } else {
      // 处理非流式响应
      const transformedResponse = await transformNonStreamResponse(sophNetResponse);
      
      return new Response(JSON.stringify(transformedResponse), {
        status: 200,
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*",
        },
      });
    }
  }
  
  // 未找到路由
  // 处理不支持的端点
  else {
    return new Response(
      JSON.stringify({ error: "Not found", message: "Endpoint not supported" }),
      {
        status: 404,
        headers: {
          "Content-Type": "application/json",
          "Access-Control-Allow-Origin": "*",
        },
      },
    );
  }
} catch (error) {
  // 处理请求过程中的错误
  console.error("Request handling error:", error);
  
  return new Response(
    JSON.stringify({ error: "Internal server error", message: error.message }),
    {
      status: 500,
      headers: {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
      },
    },
  );
}
}

// Cloudflare Workers 入口点
export default {
async fetch(request, env, ctx) {
  return handleRequest(request);
}
};`` 
``` 

[![](https://cdn.ldstatic.com/optimized/4X/9/1/7/917af511e13b79ee3a73704f45ef6dffbb354ec7_2_690x438.jpeg)

Mac Studio. 2025-04-14 at 01.50.082970×1886 653 KB

](https://cdn.ldstatic.com/original/4X/9/1/7/917af511e13b79ee3a73704f45ef6dffbb354ec7.jpeg "Mac Studio. 2025-04-14 at 01.50.08")

* * *

沉浸翻译效果  

[![](https://cdn.ldstatic.com/optimized/4X/9/6/5/9659ad6251002324273a75130f87310816f914a3_2_690x424.jpeg)

Mac Studio. 2025-04-14 at 02.01.352808×1728 346 KB

](https://cdn.ldstatic.com/original/4X/9/6/5/9659ad6251002324273a75130f87310816f914a3.jpeg "Mac Studio. 2025-04-14 at 02.01.35")

  

[![](https://cdn.ldstatic.com/optimized/4X/0/5/f/05ffc78885d877867a86f4d72e9035c4d0cbeb4c_2_690x426.jpeg)

Mac Studio. 2025-04-14 at 02.07.152670×1650 290 KB

](https://cdn.ldstatic.com/original/4X/0/5/f/05ffc78885d877867a86f4d72e9035c4d0cbeb4c.jpeg "Mac Studio. 2025-04-14 at 02.07.15")

  

[![](https://cdn.ldstatic.com/optimized/4X/b/d/0/bd0c493b6a7535fb4535197e9892a4133b4765b4_2_477x500.jpeg)

Mac Studio. 2025-04-14 at 02.06.592198×2301 560 KB

](https://cdn.ldstatic.com/original/4X/b/d/0/bd0c493b6a7535fb4535197e9892a4133b4765b4.jpeg "Mac Studio. 2025-04-14 at 02.06.59")

* * *

> 啥也不说了，目前最适合沉浸的 2API 了，速度比火山还他妈快(v3-0324)

匿名 token 接口（一个匿名 token 可用调用次数 == 10）  
前置：anon-{token}  
`https://www.sophnet.com/api/sys/login/anonymous`

Chat 接口

*   前端接口  
    `https://sophnet.com/api/open-apis/projects/Ar79PWUQUAhjJOja2orHs/chat/completions`
*   后端接口（推荐）  
    `https://www.sophnet.com/api/open-apis/chat/completions`  
    `https://www.sophnet.com/api/open-apis/v1/chat/completions`

model list 接口  
`https://www.sophnet.com/api/public/playground/models`

推荐 model  
`DeepSeek-R1` `DeepSeek-v3` `QwQ-32B`

body

```


`{
    "webSearchEnable": true,
    "stream": "true",
    "model_id": "DeepSeek-v3",
    "messages": [
        {
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "今天关税战热点新闻，返回前 3 条。"
                }
            ]
        }
    ]
}` 
```

说明：

*   前端 2API body 构造和后端 API 的 body 构造有点差异
*   webSearchEnable 为是否联网(boolean)
*   response (推理`$.choices[0].delta.reasoning_content` / 回复`$.choices[0].delta.content`)

2API (Deno)  
[https://linux.do/t/topic/537077](https://linux.do/t/topic/537077)

[![](https://cdn.ldstatic.com/optimized/4X/0/5/4/05482b8e7f003d8e6075e72eee9cd45150942bb2_2_690x438.jpeg)

Mac Studio. 2025-04-14 at 01.03.012970×1886 472 KB

](https://cdn.ldstatic.com/original/4X/0/5/4/05482b8e7f003d8e6075e72eee9cd45150942bb2.jpeg "Mac Studio. 2025-04-14 at 01.03.01")

[![](https://cdn.ldstatic.com/optimized/4X/3/4/6/346fbc1922ace5a9a22d481f55abd7fa1dafad57_2_690x438.jpeg)

Mac Studio. 2025-04-14 at 01.03.062970×1886 511 KB

](https://cdn.ldstatic.com/original/4X/3/4/6/346fbc1922ace5a9a22d481f55abd7fa1dafad57.jpeg "Mac Studio. 2025-04-14 at 01.03.06")

[![](https://cdn.ldstatic.com/optimized/4X/d/1/8/d18b049dd72369017cafa9ddcacbd98dc981a29e_2_690x438.jpeg)

Mac Studio. 2025-04-14 at 01.08.012970×1886 655 KB

](https://cdn.ldstatic.com/original/4X/d/1/8/d18b049dd72369017cafa9ddcacbd98dc981a29e.jpeg "Mac Studio. 2025-04-14 at 01.08.01")

  

3 个回复

![](https://cdn.linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://cdn.linux.do/images/emoji/twemoji/+1.png?v=14)

+1

![](https://cdn.linux.do/images/emoji/twemoji/laughing.png?v=14)

laughing

73

​ ​ 回复

*   [快的跟窜稀似的 | SophNet2Api Deno 速度优化](https://linux.do/t/topic/558976/45)
    

1.2k 浏览量 111 赞 5 链接 29 用户

 [![](https://cdn.linux.do/user_avatar/linux.do/whymeta/96/38970_2.png)
 6](/u/WhyMeta "WhyMeta")

 [![](https://cdn.linux.do/user_avatar/linux.do/ikunla/96/369128_2.png)
 4](/u/ikunla "ikunla")

 [![](https://cdn.linux.do/user_avatar/linux.do/shine/96/1613_2.png)](/u/shine "shine") 

 [![](https://cdn.linux.do/user_avatar/linux.do/handsome/96/477777_2.png)](/u/handsome "handsome") 

 [![](https://cdn.linux.do/user_avatar/linux.do/user89/96/524601_2.png)](/u/user89 "user89") 

阅读时间 8 分钟

总结

[![](https://cdn.linux.do/user_avatar/linux.do/sniao/96/546057_2.png)
](/u/sniao)

[傻鸟](/u/sniao)

[sniao](/u/sniao)一元复始 ![](https://cdn.linux.do/images/emoji/twemoji/phoenix.png?v=14) 

[6 天](/t/topic/557480/2?u=niyan2025 "发布日期")

大佬这个技术非常不错

  

6

​ ​ 回复

[![](https://cdn.linux.do/letter_avatar/buyan/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/buyan)

[buyan](/u/buyan)

蛇来运转

[6 天](/t/topic/557480/3?u=niyan2025 "发布日期")

佬太强了。。马上部署

  

4

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/baipiaodang/96/558762_2.png)
](/u/baipiaodang)

[baipiaodang](/u/baipiaodang)

 ![](https://cdn.linux.do/images/emoji/twemoji/speech_balloon.png?v=14) 

[6 天](/t/topic/557480/4?u=niyan2025 "发布日期")

太有实力啦

  

4

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/bbbjltql/96/368047_2.png)
](/u/bbbjltql)

[bbb巨佬太强了](/u/bbbjltql)

[bbbjltql](/u/bbbjltql)一元复始 ![](https://cdn.ldstatic.com/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14) 

[6 天](/t/topic/557480/5?u=niyan2025 "发布日期")

使 sophnet 旋转 ![](https://cdn.ldstatic.com/original/3X/e/4/e415f72201d585ac7ccc869a334048006d2b6b9d.png?v=14)

  

4

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/hiagfh/96/369837_2.png)
](/u/hiagfh)

[hiagfh](/u/hiagfh)

[6 天](/t/topic/557480/6?u=niyan2025 "发布日期")

哈哈哈，太bt了，裸奔

  

4

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/moonk/96/370217_2.png)
](/u/moonk)

[芍霾](/u/moonk)

[moonk](/u/moonk)一元复始

[6 天](/t/topic/557480/8?u=niyan2025 "发布日期")

牛呀，后面试试

  

2

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/user89/96/524601_2.png)
](/u/user89)

[叽叽](/u/user89)

[user89](/u/user89)种子用户

[6 天](/t/topic/557480/9?u=niyan2025 "发布日期")

厉害了我的佬~

  

2

​ ​ 回复

[![](https://cdn.linux.do/letter_avatar/gsnqazwsx/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/gsnqazwsx)

[看今朝](/u/gsnqazwsx)

[gsnqazwsx](/u/gsnqazwsx)文化宣导员

[5 天](/t/topic/557480/10?u=niyan2025 "发布日期")

感谢老板

  

2

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/hsingjui/96/12527_2.png)
](/u/hsingjui)

[刘作老虎](/u/hsingjui)

[hsingjui](/u/hsingjui)一元复始

[5 天](/t/topic/557480/11?u=niyan2025 "发布日期")

离谱 真草台班子

  

2

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/handsome/96/477777_2.png)
](/u/handsome)

[大帅哥](/u/handsome)

[handsome](/u/handsome)种子用户 ![](https://cdn.linux.do/images/emoji/twemoji/rage.png?v=14) 

[5 天](/t/topic/557480/12?u=niyan2025 "发布日期")

好家伙，太强了！

  

2

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/pennyjoly/96/490174_2.png)
](/u/pennyjoly)

[pennyjoly](/u/pennyjoly)

一元复始

[5 天](/t/topic/557480/13?u=niyan2025 "发布日期")

![](https://cdn.linux.do/user_avatar/linux.do/whymeta/48/38970_2.png)
 汉祖大帝:

> [https://www.sophnet.com/api/sys/login/anonymous](https://www.sophnet.com/api/sys/login/anonymous)

大佬太强咯！

  

2

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/578382239/96/226770_2.png)
](/u/578382239)

[南山](/u/578382239)

[578382239](/u/578382239)一元复始

[5 天](/t/topic/557480/14?u=niyan2025 "发布日期")

感谢大佬，太强了

  

2

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/dswang/96/14657_2.png)
](/u/Dswang)

[单身汪](/u/Dswang)

[Dswang](/u/Dswang)蛇来运转 ![](https://cdn.linux.do/images/emoji/twemoji/cn.png?v=14) 

[5 天](/t/topic/557480/15?u=niyan2025 "发布日期")

感谢大佬，部署成功了

  

1

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/namei_zz/96/564157_2.png)
](/u/NaMei_ZZ)

[当前版本奈德丽肆虐上路](/u/NaMei_ZZ)

[NaMei\_ZZ](/u/NaMei_ZZ)圆圆满满 ![](https://cdn.ldstatic.com/original/3X/5/3/535b871b10c649510280825c98e80ee1122613ec.png?v=14) 

[5 天](/t/topic/557480/16?u=niyan2025 "发布日期")

太强了太强了

  

1

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/cirno.o/96/436360_2.png)
](/u/cirno.o)

[Cirno](/u/cirno.o)

[cirno.o](/u/cirno.o)活跃用户

[5 天](/t/topic/557480/17?u=niyan2025 "发布日期")

感谢大佬 立即部署使用

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/lonelyleaves/96/342787_2.png)
](/u/Lonelyleaves)

[effort](/u/Lonelyleaves)

[Lonelyleaves](/u/Lonelyleaves)

[5 天](/t/topic/557480/18?u=niyan2025 "发布日期")

佬友太强了 已部署运行

  

​ ​ 回复

[![](https://cdn.linux.do/letter_avatar/saul_zane/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/Saul_Zane)

[张硕](/u/Saul_Zane)

[Saul\_Zane](/u/Saul_Zane)

[5 天](/t/topic/557480/19?u=niyan2025 "发布日期")

哥，太强了

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/shine/96/1613_2.png)
](/u/shine)

[shine](/u/shine)

种子用户

[5 天](/t/topic/557480/20?u=niyan2025 "发布日期")

感谢大佬，立刻部署

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/ikunla/96/369128_2.png)
](/u/ikunla)

[蔡某](/u/ikunla)

[ikunla](/u/ikunla)一元复始

[5 天](/t/topic/557480/21?u=niyan2025 "发布日期")

成功部署啦，大佬nb 另外翻译放进来咋报错了  

[![](https://cdn.ldstatic.com/optimized/4X/e/e/9/ee9765500e1a62358cbf38d7d4fbeabdce517662_2_529x500.png)

image1095×1034 47 KB

](https://cdn.ldstatic.com/original/4X/e/e/9/ee9765500e1a62358cbf38d7d4fbeabdce517662.png "image")

  

1 个回复

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/whymeta/96/38970_2.png)
](/u/WhyMeta)

[汉祖大帝](/u/WhyMeta)

[WhyMeta](/u/WhyMeta)一元复始 ![](https://cdn.linux.do/images/emoji/twemoji/index_pointing_at_the_viewer.png?v=14) 

 ![](https://cdn.linux.do/user_avatar/linux.do/ikunla/48/369128_2.png)
 蔡某

[5 天](/t/topic/557480/22?u=niyan2025 "发布日期")

坤哥你好，这边是你的粉丝支援会

先用workers的域名请求一下models看看  
浏览器地址栏直接打开  
`{workers url}/v1/models`

  

1 个回复

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/monsoon1/96/379745_2.png)
](/u/monsoon1)

[monsoon1](/u/monsoon1)

一元复始

[5 天](/t/topic/557480/23?u=niyan2025 "发布日期")

真的强呀，狠狠部署 ![](https://cdn.linux.do/images/emoji/twemoji/nerd_face.png?v=14)

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/ikunla/96/369128_2.png)
](/u/ikunla)

[蔡某](/u/ikunla)

[ikunla](/u/ikunla)一元复始

 ![](https://cdn.linux.do/user_avatar/linux.do/whymeta/48/38970_2.png)
 汉祖大帝

[5 天](/t/topic/557480/24?u=niyan2025 "发布日期")

可以正常打开 我用在nextchat 也能获取到模型 就是在翻译里好像不行  

[![](https://cdn.ldstatic.com/optimized/4X/3/9/5/39521c1dab37ada7cd55f13493a5d5e922a4e0b5_2_587x500.png)

image1192×1014 56.3 KB

](https://cdn.ldstatic.com/original/4X/3/9/5/39521c1dab37ada7cd55f13493a5d5e922a4e0b5.png "image")

  

1 个回复

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/whymeta/96/38970_2.png)
](/u/WhyMeta)

[汉祖大帝](/u/WhyMeta)

[WhyMeta](/u/WhyMeta)一元复始 ![](https://cdn.linux.do/images/emoji/twemoji/index_pointing_at_the_viewer.png?v=14) 

 ![](https://cdn.linux.do/user_avatar/linux.do/ikunla/48/369128_2.png)
 蔡某

[5 天](/t/topic/557480/25?u=niyan2025 "发布日期")

那你试试我的，测完我删 `https://temp.oaiworkers.site/v1`

  

1 个回复

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/ikunla/96/369128_2.png)
](/u/ikunla)

[蔡某](/u/ikunla)

[ikunla](/u/ikunla)一元复始

 ![](https://cdn.linux.do/user_avatar/linux.do/whymeta/48/38970_2.png)
 汉祖大帝

[5 天](/t/topic/557480/26?u=niyan2025 "发布日期")

加上了/chat/completions，打开还是一样的报错 是不是我这翻译哪没设置好  

[![](https://cdn.ldstatic.com/optimized/4X/2/6/0/260675aeb7c08c0a6e8c6a13291fc656734c8669_2_690x163.png)

image1092×258 15.5 KB

](https://cdn.ldstatic.com/original/4X/2/6/0/260675aeb7c08c0a6e8c6a13291fc656734c8669.png "image")

  

2 个回复

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/whymeta/96/38970_2.png)
](/u/WhyMeta)

[汉祖大帝](/u/WhyMeta)

[WhyMeta](/u/WhyMeta)一元复始 ![](https://cdn.linux.do/images/emoji/twemoji/index_pointing_at_the_viewer.png?v=14) 

 ![](https://cdn.linux.do/user_avatar/linux.do/ikunla/48/369128_2.png)
 蔡某

[5 天](/t/topic/557480/27?u=niyan2025 "发布日期")

[![](https://cdn.ldstatic.com/optimized/4X/6/e/4/6e4f977338e56b15d0b1b3178ae9a7124669afb2_2_643x500.jpeg)

Mac Studio. 2025-04-14 at 17.07.172004×1558 223 KB

](https://cdn.ldstatic.com/original/4X/6/e/4/6e4f977338e56b15d0b1b3178ae9a7124669afb2.jpeg "Mac Studio. 2025-04-14 at 17.07.17")

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/whymeta/96/38970_2.png)
](/u/WhyMeta)

[汉祖大帝](/u/WhyMeta)

[WhyMeta](/u/WhyMeta)一元复始 ![](https://cdn.linux.do/images/emoji/twemoji/index_pointing_at_the_viewer.png?v=14) 

 ![](https://cdn.linux.do/user_avatar/linux.do/ikunla/48/369128_2.png)
 蔡某

[5 天](/t/topic/557480/28?u=niyan2025 "发布日期")

你的模型写错了 ![](https://cdn.linux.do/images/emoji/twemoji/joy.png?v=14)

  

1 个回复

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/ikunla/96/369128_2.png)
](/u/ikunla)

[蔡某](/u/ikunla)

[ikunla](/u/ikunla)一元复始

 ![](https://cdn.linux.do/user_avatar/linux.do/whymeta/48/38970_2.png)
 汉祖大帝

[5 天](/t/topic/557480/29?u=niyan2025 "发布日期")

okok 现在我自己的可以了 ![](https://cdn.linux.do/images/emoji/twemoji/rofl.png?v=14)
 原来是这个没写正确，我是先选了dc 然后修改的 原来不可以这样 感谢大佬解答  

[![](https://cdn.ldstatic.com/optimized/4X/4/a/f/4afcdf53aae84fe5644e4a7804698fab505f54cd_2_690x138.png)

image1134×228 8.38 KB

](https://cdn.ldstatic.com/original/4X/4/a/f/4afcdf53aae84fe5644e4a7804698fab505f54cd.png "image")

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/winj/96/408980_2.png)
](/u/winj)

[winj](/u/winj)

一元复始

[5 天](/t/topic/557480/30?u=niyan2025 "发布日期")

感谢大佬！已经用上了 ![](https://cdn.linux.do/images/emoji/twemoji/nerd_face.png?v=14)

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/ming23/96/545551_2.png)
](/u/ming23)

[yiming](/u/ming23)

[ming23](/u/ming23)

[5 天](/t/topic/557480/31?u=niyan2025 "发布日期")

![](https://cdn.linux.do/user_avatar/linux.do/whymeta/48/38970_2.png)
 汉祖大帝:

> SOPHNET\_KV

我能说什么吗？太牛逼了！！！！！！！！！！！！！！！！！！！！！！！

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/xuanchen/96/11570_2.png)
](/u/xuanchen)

[玄](/u/xuanchen)

[xuanchen](/u/xuanchen)一元复始

[4 天](/t/topic/557480/32?u=niyan2025 "发布日期")

感谢，已部署成功。

  

​ ​ 回复

[![](https://cdn.linux.do/letter_avatar/jakshs/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/jakshs)

[jakshs](/u/jakshs)

[4 天](/t/topic/557480/33?u=niyan2025 "发布日期")

感谢分享

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/whiredj/96/206887_2.png)
](/u/whiredj)

[whiredj](/u/whiredj)

大预言家

[4 天](/t/topic/557480/34?u=niyan2025 "发布日期")

![](https://cdn.linux.do/user_avatar/linux.do/whymeta/48/38970_2.png)
 汉祖大帝:

> 速度比火山还他妈快

看起来不错，待会试试

  

​ ​ 回复

[![](https://cdn.linux.do/letter_avatar/a3members/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/a3members)

[a3members](/u/a3members)

[4 天](/t/topic/557480/35?u=niyan2025 "发布日期")

国内公司还是小心点比较好 玩不起的直接法律起诉了

  

​ ​ 回复

[![](https://cdn.linux.do/letter_avatar/qq727474430/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/qq727474430)

[雨下不停](/u/qq727474430)

[qq727474430](/u/qq727474430)

[4 天](/t/topic/557480/36?u=niyan2025 "发布日期")

太牛批了！！

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/jaxon-jp/96/459749_2.png)
](/u/Jaxon-jp)

[JP Shi](/u/Jaxon-jp)

[Jaxon-jp](/u/Jaxon-jp)

[3 小时](/t/topic/557480/37?u=niyan2025 "发布日期")

cf部署这个每天10w次请求够日常使用吗？

  

1 个回复

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/whymeta/96/38970_2.png)
](/u/WhyMeta)

[汉祖大帝](/u/WhyMeta)

[WhyMeta](/u/WhyMeta)一元复始

[跳到帖子](/t/topic/557480/38 "跳到帖子的原始位置")

自用绝对够够的啊 ![](https://cdn.linux.do/images/emoji/twemoji/joy.png?v=14)
  
除非你是分发

  

[![](https://cdn.linux.do/user_avatar/linux.do/whymeta/96/38970_2.png)
](/u/WhyMeta)

[汉祖大帝](/u/WhyMeta)

[WhyMeta](/u/WhyMeta)一元复始 ![](https://cdn.linux.do/images/emoji/twemoji/index_pointing_at_the_viewer.png?v=14) 

 ![](https://cdn.linux.do/user_avatar/linux.do/jaxon-jp/48/459749_2.png)
 JP Shi

[13 分钟](/t/topic/557480/38?u=niyan2025 "发布日期")

自用绝对够够的啊 ![](https://cdn.linux.do/images/emoji/twemoji/joy.png?v=14)
  
除非你是分发

  

​ ​ 回复

[![](https://cdn.linux.do/user_avatar/linux.do/jaxon-jp/96/459749_2.png)
](/u/Jaxon-jp)

[JP Shi](/u/Jaxon-jp)

[Jaxon-jp](/u/Jaxon-jp)

 ![](https://cdn.linux.do/user_avatar/linux.do/whymeta/48/38970_2.png)
 汉祖大帝

[1 分钟](/t/topic/557480/39?u=niyan2025 "发布日期")

哦哦，好的

  

​ ​ 回复

### 此话题将在最后一个回复的1 个月后关闭。

分享 加入书签 举报

回复

已取消置顶

​

此话题已对您取消置顶；它将以常规顺序显示

常规 您会在别人 @ 您或回复您时收到通知。

  

*   推荐
*   相关

### 新话题和未读话题

话题列表，带有按钮的列标题可以排序。
| 话题 | 回复 | 浏览量 | 活动 |
| --- | --- | --- | --- |
| [【原创】我是如何请黑客老哥吃上了牢饭](/t/topic/387565/324)

 [19](/t/topic/387565/324 "您在此话题中有 19 个未读帖子")

[开发调优, Lv1](/c/develop/develop-lv1/20)

[网络安全](/tag/网络安全)

,[精华神帖](/tag/精华神帖)





 | [340](/t/topic/387565/1) | 8.1k | [7 小时](/t/topic/387565/342) |
| [【喂饭教程】中国内地五分钟速通grok每月150刀免费额度，这个羊毛一定要薅啊！！！](/t/topic/555937/11)

 [45](/t/topic/555937/11 "您在此话题中有 45 个未读帖子")

[开发调优, Lv1](/c/develop/develop-lv1/20)

[人工智能](/tag/人工智能)

,[树洞](/tag/树洞)





 | [51](/t/topic/555937/1) | 2.6k | [7 小时](/t/topic/555937/55) |
| [cursor将死？\[cursor+windsurf+augment\] = poolhub 启动！](/t/topic/560178/29)

 [353](/t/topic/560178/29 "您在此话题中有 353 个未读帖子")

[开发调优, Lv1](/c/develop/develop-lv1/20)

[人工智能](/tag/人工智能)





 | [377](/t/topic/560178/1) | 4.5k | [23 小时](/t/topic/560178/381) |
| [送给佬友的新年礼物：Cursor 0.45.x 全网最新限制解除方案（macOS、Windows、Linux）](/t/topic/404221/150)

 [45](/t/topic/404221/150 "您在此话题中有 45 个未读帖子")

[开发调优, Lv1](/c/develop/develop-lv1/20)

[人工智能](/tag/人工智能)

,[Cursor](/tag/cursor)





 | [190](/t/topic/404221/1) | 6.5k | [17 天](/t/topic/404221/194) |
| [Cursor Pool 更新说明](/t/topic/435717/42)

 [206](/t/topic/435717/42 "您在此话题中有 206 个未读帖子")

[开发调优, Lv1](/c/develop/develop-lv1/20)

[人工智能](/tag/人工智能)

,[Cursor](/tag/cursor)





 | [244](/t/topic/435717/1) | 12.0k | [24 天](/t/topic/435717/247) |

### 有 [47 个未读](/unread)

话题 和 [116 个新](/new)

话题， 或浏览[开发调优, Lv1](/c/develop/develop-lv1/20)

中的其他话题

Invalid date Invalid date

Settings
========

🏷️ UTags - Add usertags to links

Other Extensions
----------------

[🔗 Links Helper](https://greasyfork.org/en/scripts/464541-links-helper)

[V2EX.REP - 专注提升 V2EX 主题回复浏览体验](https://greasyfork.org/en/scripts/466589-v2ex-rep-%E4%B8%93%E6%B3%A8%E6%8F%90%E5%8D%87-v2ex-%E4%B8%BB%E9%A2%98%E5%9B%9E%E5%A4%8D%E6%B5%8F%E8%A7%88%E4%BD%93%E9%AA%8C)

[v2ex.min - V2EX Minimalist (极简风格)](https://greasyfork.org/en/scripts/463552-v2ex-min-v2ex-%E6%9E%81%E7%AE%80%E9%A3%8E%E6%A0%BC)

[Replace Ugly Avatars](https://greasyfork.org/en/scripts/472616-replace-ugly-avatars)

↑↓⇔⇧⇩