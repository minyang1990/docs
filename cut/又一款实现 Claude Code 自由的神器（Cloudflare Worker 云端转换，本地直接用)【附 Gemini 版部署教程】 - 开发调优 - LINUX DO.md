# 又一款实现 Claude Code 自由的神器（Cloudflare Worker 云端转换，本地直接用)【附 Gemini 版部署教程】 - 开发调优 - LINUX DO
[又一款实现 Claude Code 自由的神器（Cloudflare Worker 云端转换，本地直接用)【附 Gemini 版部署教程】 - 开发调优 - LINUX DO](https://linux.do/t/topic/855265) 

  又一款实现 Claude Code 自由的神器（Cloudflare Worker 云端转换，本地直接用)【附 Gemini 版部署教程】 - 开发调优 - LINUX DO                                                            

Constants loaded at 2025-08-11T00:21:30.315Z

  

[跳到主要内容](#main-container)

子系统

*   [Connect](https://connect.linux.do "LINUX DO Connect 账号连接系统。")
*   [Webmail](https://webmail.linux.do/ "LINUX DO Mail 系统。")
*   [Lottery](https://lottery.linux.do/ "LINUX DO 抽奖系统。")

元宇宙

*   [导航站](https://nav.linux.do "LINUX DO 相关服务导航站。")
*   [Wiki站](https://wiki.linux.do "LINUX DO Wiki 系统。")
*   [分发站](https://cdk.linux.do "LINUX DO 分发站，福利多多。")

其他

*   [2048](https://2048.linux.do "一起来挑战、打榜经典2048小游戏。")
*   [T-Shirt](https://shanwaiyoushan.taobao.com "LINUX DO元气T+POLO：社交新名片。")

 [![](https://linux.do/uploads/default/original/4X/c/c/d/ccd8c210609d498cbeb3d5201d4c259348447562.png)](/) 

[又一款实现 Claude Code 自由的神器（Cloudflare Worker 云端转换，本地直接用)【附 Gemini 版部署教程】](/t/topic/855265)
========================================================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能)

*   ​

*    ![](https://linux.do/letter_avatar/niyan2025/144/5_d44a9b381edc88181525e3c8350177ca.png)
       [ 1 ](# "1 个未读通知") 

*   [话题](/latest "所有话题")
*   [我的帖子](/u/niyan2025/activity/drafts "我的未发布草稿")
*   [我的消息](/u/niyan2025/messages "我的个人信息")
*   [关于](/about "关于此网站的更多详细信息")
*   [近期活动](/upcoming-events "近期活动")
*   更多

类别

*   [开发调优](/c/develop/4 "此版块包含开发、测试、调试、部署、优化、安全等方面的内容")
*   [资源荟萃](/c/resource/14 "包括软件分享、开源仓库、视频课程、书籍等分享")
*   [文档共建](/c/wiki/42 "佬友化身翰林学士，一起来编书了。")
*   [非我莫属](/c/job/27 "学成文武艺，货与帝王家。招聘/求职分类，只能发此类信息。")
*   [读书成诗](/c/reading/32 "跟着佬友们一起在论坛读完一本书是什么体验？")
*   [扬帆起航](/c/startup/46 "扬帆起航，目标是星辰大海！")
*   [前沿快讯](/c/news/34 "前沿快讯，不出门能知天下事。")
*   [网络记忆](/c/feeds/92 "网络是有记忆的，确信！")
*   [福利羊毛](/c/welfare/36 "正经人谁花那个钱啊～ 此版块供羊毛、抽奖等福利使用。")
*   [搞七捻三](/c/gossip/11 "闲聊吹水的板块。不得讨论政治、色情等违规内容。")
*   [运营反馈](/c/feedback/2 "有关此网站、其组织、运作方式以及如何改进的讨论。")
*   [深海幽域](/c/muted/45 "冰山下的深海。帖子不会上信息流、不会被论坛搜索。")
*   [所有类别](/categories)

标签

*   [人工智能](/tag/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD)
*   [公告](/tag/%E5%85%AC%E5%91%8A)
*   [快问快答](/tag/%E5%BF%AB%E9%97%AE%E5%BF%AB%E7%AD%94)
*   [抽奖](/tag/%E6%8A%BD%E5%A5%96)
*   [精华神帖](/tag/%E7%B2%BE%E5%8D%8E%E7%A5%9E%E5%B8%96)
*   [所有标签](/tags)

*   [我的消息串](/chat/threads "我的消息串")

频道

*   [常规频道](/chat/c/general/2 "🈲 禁止在聊天频道里发送 打卡 等无意义信息，被举报会喜提 禁言1小时 。")

直接消息

*    [![](https://linux.do/user_avatar/linux.do/xronus/72/130867_2.png)  𝒜𝓃𝒾𝓋𝒾𝓍](/chat/c/%F0%9D%92%9C%F0%9D%93%83%F0%9D%92%BE%F0%9D%93%8B%F0%9D%92%BE%F0%9D%93%8D/32458 "与 𝒜𝓃𝒾𝓋𝒾𝓍 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/huan/72/864820_2.png)  焕昭君](/chat/c/%E7%84%95%E6%98%AD%E5%90%9B/43057 "与 焕昭君 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/wenjuhe/72/672301_2.png)  奇妙进化小河马🦛   ![](https://linux.do/images/emoji/twemoji/hippopotamus.png?v=14)](/chat/c/%E5%A5%87%E5%A6%99%E8%BF%9B%E5%8C%96%E5%B0%8F%E6%B2%B3%E9%A9%AC%F0%9F%A6%9B/45968 "与 奇妙进化小河马🦛 聊天") 

聊天

Default

​ ​ ​

**真诚**、**友善**、**团结**、**专业**，共建你我引以为荣之社区。[《常见问题解答》](/faq)

[又一款实现 Claude Code 自由的神器（Cloudflare Worker 云端转换，本地直接用)【附 Gemini 版部署教程】](/t/topic/855265)
========================================================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能)

您已选择 **0** 个帖子。

全选

取消选择

​

[8月 9 日](/t/topic/855265/1 "跳到第一个帖子")

1 / 53

8月 9 日

[2 分钟](/t/topic/855265/54)

热门回复 ​

这是 LinHan.dev 首次发帖 - 让我们欢迎他/她加入社区吧！

[![](https://linux.do/user_avatar/linux.do/linhan/144/880511_2.png)
](/u/LinHan)

[LinHan.dev](/u/LinHan)[LinHan](/u/LinHan)

[22 小时](/t/topic/855265?u=niyan2025 "发布日期")

佬友们，新的 Claude Code 羊毛来了。

Claude Code 的强大毋庸置疑（编程 AI Agent 目前口碑最强，没人反对吧？）。但是费用太贵、账号注册难；太劝退了，我到现在也没用过官方 API 来用 CC.

既然都是 LLM，能不能用其他厂商的 API 来用 Claude Code？当然可以。最近我在用这个神器项目：[claude-worker-proxy](https://github.com/glidea/claude-worker-proxy)

原理非常简单，就是在云端 Cloudflare Worker 加了一层转换层，直接看图：

[![](https://linux.do/uploads/default/optimized/4X/6/c/5/6c528ffdc080515789ef71953d1196b2d2e6badb_2_690x349.png)

image2098×1062 181 KB

](https://linux.do/uploads/default/original/4X/6/c/5/6c528ffdc080515789ef71953d1196b2d2e6badb.png "image")

这个项目的原理很简单，它是一个轻量级的代理服务，能将 Claude 格式的 API 请求，转换为 Gemini 或 OpenAI 等其他模型的格式。**核心亮点是，它被设计运行在 Cloudflare Workers 上。** 

> 补充知识：不熟悉 Cloudflare Workers 的同学可以把它理解成一个“无服务器”的计算平台。你只需要把代码部署上去，它就能在网络上运行，而你完全不用关心服务器运维。
> 
> 最关键的是，Cloudflare 提供的免费额度非常慷慨（人称赛博菩萨）。虽然是一个云计算平台，但是你在用免费 plan 的时候完全不用像其他国外平台一样绑定信用卡。

[](#p-7815411-h-1)部署教程（手把手！）
----------------------------

这里以 Gemini 为例子。

**0\. 准备 Gemini API Key**

*   Gemini API Base URL – 比如 `https://generativelanguage.googleapis.com/v1beta/v1/messages`
*   Gemini API – 下文用 `YOUR_GEMINI_API_KEY` 代指

**1\. 部署 Cloudflare Worker**

如果没有账号，需要先到 Cloudflare 官网注册一个，Google 账号直接登录就行：[随时随地连接、保护、构建 | Cloudflare](https://www.cloudflare.com/zh-cn/)

命令行部署：

```


`# 1. 克隆项目
git clone https://github.com/glidea/claude-worker-proxy

# 2. 进入目录并安装依赖
cd claude-worker-proxy
npm install

# 3. 使用 wrangler 工具登陆 Cloudflare (如果没安装会自动提示)
wrangler login

# 4. 一键部署
npm run deploycf` 
```

部署成功后，你会得到一个 `.workers.dev` 结尾的 URL，这就是你的代理地址。下文用 `YOUR_WORKER_URL` 代指。

> 这时候聪明的观众就要问了。我要在哪里填写 Gemini 的 key  
> 呢？
> 
> 我一开始用这个项目的时候也有一样的问题。实际上这个 worker 设计是**无状态**的，你的 key 和 base url 是在最后发送网络请求的时候带上的，非常灵活。你只需要部署一次，之后更改配置什么的不需要重复操作 Cloudflare.
> 
> 安全警告：所以，别人部署的 claude-worker-proxy 实际上你也能拿来直接用，但是别人能在日志里看到你的 api key。偷懒的朋友建议使用临时 key 来快速测试。

**2\. 配置 Claude Code 环境变量**

打开 `~/.claude/settings.json` 文件，修改 `env` 部分：

```


`{
  "env": {
    "ANTHROPIC_BASE_URL": "https://YOUR_WORKER_URL/gemini/https://generativelanguage.googleapis.com/v1beta",
    "ANTHROPIC_API_KEY": "YOUR_GEMINI_API_KEY",
    "ANTHROPIC_MODEL": "gemini-1.5-pro",
    "ANTHROPIC_SMALL_FAST_MODEL": "gemini-1.5-flash"
  }
}` 
```

字段说明 ANTHROPIC\_BASE\_URL：

*   这个字段由多个部分组成
*   第一部分：Cloudflare Worker 网址，由上一步得到. 举个例子可能长这样：`https://hahaha.hahahah123.workers.dev`
*   第二部分：API 类型说明。这个项目支持多种厂商，这里使用的例子是`gemini`
*   第三部分：目标厂商的服务地址，Gemini 对应 `https://generativelanguage.googleapis.com/v1beta`
*   每个部分用 `/` 符号连接起来
*   举个例子：`https://hahaha.hahahah123.workers.dev/gemini/https://generativelanguage.googleapis.com/v1beta`

字段说明 ANTHROPIC\_API\_KEY：

*   没错，就是 Gemini API Key
*   Cloudflare Worker 会做这部分转换

> 你可以用其他方式来设置环境变量：[Claude Code settings - Anthropic](https://docs.anthropic.com/en/docs/claude-code/settings#environment-variables) ，只要环境变量名字对的上就行。

配置完成后，直接运行 Claude Code 即可！！！

[](#p-7815411-h-2)其他
--------------------

类似原理方案还有 [musistudio/claude-code-router](https://github.com/musistudio/claude-code-router)，这个更火一些，现在支持的 api 很多。

这个项目的“API转换”逻辑是在本地执行的。不过 claude code router 配置更复杂，我自己鼓捣了很久才运行成功，后面想配置新的，一直失败。现在直接用 claude worker proxy 了，配置简单很多。大家可以对比看看哪个适合自己的使用场景。

`claude-worker-proxy` 在云端部署，如果你想分享给朋友的话，他/她只需要设置最后一步"配置 Claude Code 环境变量"就能直接使用了！

  

2 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

![](https://linux.do/images/emoji/twemoji/clap.png?v=14)

clap

![](https://linux.do/images/emoji/twemoji/confetti_ball.png?v=14)

confetti\_ball

74

​ ​ 回复

940 浏览量 86 赞 6 链接 33 用户

 [![](https://linux.do/user_avatar/linux.do/linhan/144/880511_2.png)
 11](/u/LinHan "LinHan") 

 [![](https://linux.do/user_avatar/linux.do/ajd/144/813361_2.png)
 3](/u/ajd "ajd")

 [![](https://linux.do/letter_avatar/muzhil1688/144/5_d44a9b381edc88181525e3c8350177ca.png)
 3](/u/MuzhiL1688 "MuzhiL1688") 

 [![](https://linux.do/letter_avatar/tanning4078/144/5_d44a9b381edc88181525e3c8350177ca.png)
 3](/u/Tanning4078 "Tanning4078") 

 [![](https://linux.do/user_avatar/linux.do/xiong_bb/144/317662_2.png)
 2](/u/xiong_bb "xiong_bb") 

阅读时间 4 分钟

热门回复

[![](https://linux.do/user_avatar/linux.do/linhan/144/880511_2.png)
](/u/LinHan)

[LinHan.dev](/u/LinHan)[LinHan](/u/LinHan)

[22 小时](/t/topic/855265/2?u=niyan2025 "发布日期")

新人第一次发帖，多多指教 ![](https://linux.do/images/emoji/twemoji/person_fencing.png?v=14)

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/no_no/144/7576_2.png)
](/u/no_no)

[no no](/u/no_no)

[22 小时](/t/topic/855265/4?u=niyan2025 "发布日期")

先占个前排

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/efl/144/519459_2.png)
](/u/EFL)

[雲 くもちゃん Ultra](/u/EFL)[EFL](/u/EFL)指导顾问

[22 小时](/t/topic/855265/5?u=niyan2025 "发布日期")

问题来了，这样 Gemini 能处理好 Claude Code 的工具调用吗？

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/okokok/144/367583_2.png)
](/u/okokok)

[OK](/u/okokok)[okokok](/u/okokok)

[22 小时](/t/topic/855265/6?u=niyan2025 "发布日期")

挺详细的教程，学习了

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/wuyinfan/144/694489_2.png)
](/u/wuyinfan)

[吴亦Fan？](/u/wuyinfan)[wuyinfan](/u/wuyinfan)

[22 小时](/t/topic/855265/7?u=niyan2025 "发布日期")

worker绑定域名搞优选非常简单，速度更快。默认 .dev慢。 ![](https://linux.do/images/emoji/twemoji/grimacing.png?v=14)

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/linhan/144/880511_2.png)
](/u/LinHan)

[LinHan.dev](/u/LinHan)[LinHan](/u/LinHan)

 ![](https://linux.do/user_avatar/linux.do/efl/72/519459_2.png)
 雲 くもちゃん Ultra

[22 小时](/t/topic/855265/8?u=niyan2025 "发布日期")

偶尔见到过类似的报错，频率很低，但是这种情况cc会自己重试，用户不需要操作什么。

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/jiangai/144/363736_2.png)
](/u/jiangai)

[Gemini](/u/jiangai)[jiangai](/u/jiangai)

[22 小时](/t/topic/855265/9?u=niyan2025 "发布日期")

挺详细的教程，学习了

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/linhan/144/880511_2.png)
](/u/LinHan)

[LinHan.dev](/u/LinHan)[LinHan](/u/LinHan)

[22 小时](/t/topic/855265/10?u=niyan2025 "发布日期")

突然想到一个，这样加了一层代理。是不是gemini key更不容易被封禁了

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/efl/144/519459_2.png)
](/u/EFL)

[雲 くもちゃん Ultra](/u/EFL)[EFL](/u/EFL)指导顾问

 ![](https://linux.do/user_avatar/linux.do/linhan/72/880511_2.png)
 LinHan.dev

[22 小时](/t/topic/855265/11?u=niyan2025 "发布日期")

我的意思是 Gemini 能否学会用 Claude Code 提供的工具，如果调用格式错误 claude code 是检测不到的。Claude Code Router 这一点就实现得很差

刚去看了代码，应该是没问题的 [https://github.com/glidea/claude-worker-proxy/blob/main/src%2Fgemini.ts#L48-L58](https://github.com/glidea/claude-worker-proxy/blob/main/src%2Fgemini.ts#L48-L58)

  

2

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ajd/144/813361_2.png)
](/u/ajd)

[阿良 - github.com/glidea/zenfeed](/u/ajd)[ajd](/u/ajd)

[22 小时](/t/topic/855265/12?u=niyan2025 "发布日期")

猫猫头作者来顶个贴

  

2 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/hugs.png?v=14)

hugs

3

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/loudjay/144/731687_2.png)
](/u/loudjay)

[louder](/u/loudjay)[loudjay](/u/loudjay)文化宣导员 ![](https://linux.do/images/emoji/twemoji/skull_and_crossbones.png?v=14) 

[22 小时](/t/topic/855265/13?u=niyan2025 "发布日期")

感谢佬友 留着备用

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/xiong_bb/144/317662_2.png)
](/u/xiong_bb)

[xiong bb](/u/xiong_bb)

[22 小时](/t/topic/855265/14?u=niyan2025 "发布日期")

感谢分享

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/linhan/144/880511_2.png)
](/u/LinHan)

[LinHan.dev](/u/LinHan)[LinHan](/u/LinHan)

 ![](https://linux.do/user_avatar/linux.do/ajd/72/813361_2.png)
 阿良 - github.com/glidea/zenfeed

[21 小时](/t/topic/855265/15?u=niyan2025 "发布日期")

![](https://linux.do/images/emoji/twemoji/backhand_index_pointing_up.png?v=14)
![](https://linux.do/images/emoji/twemoji/backhand_index_pointing_up.png?v=14)
![](https://linux.do/images/emoji/twemoji/backhand_index_pointing_up.png?v=14)
claude worker proxy 的项目作者在这，有bug找他![](https://linux.do/images/emoji/twemoji/man_running.png?v=14)

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/xiong_bb/144/317662_2.png)
](/u/xiong_bb)

[xiong bb](/u/xiong_bb)

[21 小时](/t/topic/855265/16?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/linhan/48/880511_2.png)
 LinHan.dev:

> .workers.dev

请教.workers.dev 如何配合 gateway.ai 实现无需代理国内直接访问呢?

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ggyy/144/881748_2.png)
](/u/ggyy)

[ggyy](/u/ggyy)

[21 小时](/t/topic/855265/17?u=niyan2025 "发布日期")

gemini2.5pro 在 CC 里不 太好用，不积极调用工具，还经常犯错，不如 qwen3coder 和 GLM4.5

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/amdyes/144/212668_2.png)
](/u/amdyes)

[amdyes](/u/amdyes)大预言家

[21 小时](/t/topic/855265/18?u=niyan2025 "发布日期")

学习一下

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/luster/144/307612_2.png)
](/u/Luster)

[Luster](/u/Luster)文化宣导员

[21 小时](/t/topic/855265/19?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/linhan/48/880511_2.png)
 LinHan.dev:

> ANTHROPIC\_BASE\_URL

太强啦，我的佬！感谢分享 ![](https://linux.do/uploads/default/original/3X/5/e/5eb64559e6cb38b05204d30e9f38486393ad36e1.png?v=14)

提个小建议，`ANTHROPIC_BASE_URL`可以用逗号分隔吧，不然自己就乱了 ![](https://linux.do/uploads/default/original/3X/d/d/dde702ecaa3c148ce6ea4bd9e5419342e94fe16d.png?v=14)

  

2 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/handsome/144/736205_2.png)
](/u/handsome)

[大帅哥](/u/handsome)[handsome](/u/handsome)种子用户 ![](https://linux.do/images/emoji/twemoji/rage.png?v=14) 

[21 小时](/t/topic/855265/20?u=niyan2025 "发布日期")

感谢大佬。

  

​ ​ 回复

[![](https://linux.do/letter_avatar/tanning4078/144/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/Tanning4078)

[Tanning4078](/u/Tanning4078)圆圆满满

 ![](https://linux.do/user_avatar/linux.do/ajd/72/813361_2.png)
 阿良 - github.com/glidea/zenfeed

[21 小时](/t/topic/855265/21?u=niyan2025 "发布日期")

大佬 我提了个 iss，cc 的 key 好像要 sk 开头的 直接用 gemini 是不是会有问题呀

  

1 个回复

​ ​ 回复

Invalid date Invalid date

↑↓⇔⇧⇩