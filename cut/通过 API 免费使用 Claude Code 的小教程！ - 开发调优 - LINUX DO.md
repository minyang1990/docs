# 通过 API 免费使用 Claude Code 的小教程！ - 开发调优 - LINUX DO
[通过 API 免费使用 Claude Code 的小教程！ - 开发调优 - LINUX DO](https://linux.do/t/topic/745106/2) 

  通过 API 免费使用 Claude Code 的小教程！ - 开发调优 - LINUX DO                                          

[跳到主要内容](#main-container)

 [![](https://linux.do/uploads/default/original/3X/9/d/9dd49731091ce8656e94433a26a3ef36062b3994.png)](/) 

[通过 API 免费使用 Claude Code 的小教程！](/t/topic/745106)
================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[Prompt](/tag/prompt)

*   ​

*    ![](https://linux.do/letter_avatar/niyan2025/96/5_d44a9b381edc88181525e3c8350177ca.png)
       [ 2 ](# "2 个未读通知") 

*   [话题](/latest "所有话题")
*   [我的帖子](/u/niyan2025/activity/drafts "我的未发布草稿")
*   [My messages](/u/niyan2025/messages "My messages")
*   [关于](/about "关于此网站的更多详细信息")
*   [即将到来的活动](/upcoming-events "即将到来的活动")
*   更多

外部链接

*   [2048](https://2048.linux.do)
*   [Status](https://status.linux.do)
*   [T-Shirt](https://shanwaiyoushan.taobao.com)
*   [Connect](https://connect.linux.do)
*   [Webmail](https://webmail.linux.do)
*   [Channel](https://t.me/linux_do_channel)
*   [Telegram](https://t.me/ja_netfilter_group)

类别

*   [开发调优](/c/develop/4 "此版块包含开发、测试、调试、部署、优化、安全等方面的内容")
*   [资源荟萃](/c/resource/14 "包括软件分享、开源仓库、视频课程、书籍等分享")
*   [文档共建](/c/wiki/42 "佬友化身翰林学士，一起来编书了。")
*   [非我莫属](/c/job/27 "学成文武艺，货与帝王家。招聘/求职分类，只能发此类信息。")
*   [读书成诗](/c/reading/32 "跟着佬友们一起在论坛读完一本书是什么体验？")
*   [扬帆起航](/c/startup/46 "扬帆起航，目标是星辰大海！")
*   [前沿快讯](/c/news/34 "前沿快讯，不出门能知天下事。")
*   [网络记忆](/c/feeds/92 "网络是有记忆的，确信！")
*   [福利羊毛](/c/welfare/36 "正经人谁花那个钱啊～ 此版块供羊毛、抽奖等福利使用。")
*   [搞七捻三](/c/gossip/11 "闲聊吹水的板块。不得讨论政治、色情等违规内容。")
*   [运营反馈](/c/feedback/2 "有关此站点、其组织、运作方式以及如何改进的讨论。")
*   [深海幽域](/c/muted/45 "冰山下的深海。帖子不会上信息流、不会被论坛搜索。")
*   [所有类别](/categories)

标签

*   [人工智能](/tag/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD)
*   [公告](/tag/%E5%85%AC%E5%91%8A)
*   [快问快答](/tag/%E5%BF%AB%E9%97%AE%E5%BF%AB%E7%AD%94)
*   [抽奖](/tag/%E6%8A%BD%E5%A5%96)
*   [精华神帖](/tag/%E7%B2%BE%E5%8D%8E%E7%A5%9E%E5%B8%96)
*   [所有标签](/tags)

*   [我的消息串](/chat/threads "我的消息串")

频道

*   [常规频道](/chat/c/general/2 "🈲 禁止在聊天频道里发送 打卡 等无意义信息，被举报会喜提 禁言1小时 。")

直接消息

*    [![](https://linux.do/user_avatar/linux.do/xronus/48/130867_2.png)  𝒜𝓃𝒾𝓋𝒾𝓍](/chat/c/%F0%9D%92%9C%F0%9D%93%83%F0%9D%92%BE%F0%9D%93%8B%F0%9D%92%BE%F0%9D%93%8D/32458 "与 𝒜𝓃𝒾𝓋𝒾𝓍 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/huan/48/293194_2.png)  焕昭君](/chat/c/%E7%84%95%E6%98%AD%E5%90%9B/43057 "与 焕昭君 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/wenjuhe/48/672301_2.png)  奇妙进化小河马🦛   ![](https://linux.do/images/emoji/twemoji/hippopotamus.png?v=14)](/chat/c/%E5%A5%87%E5%A6%99%E8%BF%9B%E5%8C%96%E5%B0%8F%E6%B2%B3%E9%A9%AC%F0%9F%A6%9B/45968 "与 奇妙进化小河马🦛 聊天") 

聊天

Default

​ ​ ​

**真诚**、**友善**、**团结**、**专业**，共建你我引以为荣之社区。[《常见问题解答》](/faq)

[

❤️ 再忍不住，也不要做这种事啊 ❤️

](https://linux.do/t/topic/482293)

[通过 API 免费使用 Claude Code 的小教程！](/t/topic/745106)
================================================

[开发调优](/c/develop/4)

[人工智能](/tag/人工智能),[Prompt](/tag/prompt)

您已选择 **0** 个帖子。

全选

取消选择

​

[6月 23 日](/t/topic/745106/1 "跳到第一个帖子")

2 / 81

6月 23 日

[1 天](/t/topic/745106/82)

热门回复 ​

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

1

[14 天](/t/topic/745106?u=niyan2025 "发布日期")

> 继上一条帖子中的评论 [Claude Code 接入 Gemini 1M 上下文爽用！](https://linux.do/t/topic/743319/30)  
> 上次简单分享了 CC 官方配合外接 Gemini 协作，这次分享一个直接用 API 免费（~什么？API 要花钱？~）用 CC 的食用方式～

[![](https://linux.do/uploads/default/optimized/4X/d/4/e/d4ed2b89a2f832836512f57289d79491e6568df1_2_642x500.png)

示例图11862×1450 200 KB

](https://linux.do/uploads/default/original/4X/d/4/e/d4ed2b89a2f832836512f57289d79491e6568df1.png "示例图1")

[![](https://linux.do/uploads/default/optimized/4X/6/b/3/6b3bef161753e22e580e91a47459cad0abedc836_2_642x500.png)

示例图21862×1450 309 KB

](https://linux.do/uploads/default/original/4X/6/b/3/6b3bef161753e22e580e91a47459cad0abedc836.png "示例图2")

[](#p-6795038-h-1)先说用法
----------------------

```


`git clone https://github.com/chachako/freecc.git
cd freecc
curl -LsSf https://astral.sh/uv/install.sh | sh # 如果已经装了 uv 就忽略
uv venv
uv sync
cp .env.example .env
code .env # 或者其他编辑器` 
```

> 有两种 `BIG_MODEL_` 和 `SMALL_MODEL_`  
> 分别是 CC 用来正式请求的 `sonnet` 和用来辅助请求的 `haiku`

填你自己的 `API_KEY` 和 `API_BASE`（`SMALL_MODEL` 记得用便宜快速的，比如 deepseek-v3，不然小心账单爆炸）  
如果你用的是基于 OpenAI API 格式的 API Key，保持 `BIG_MODEL_PROVIDER` 为 “openai”

```


`uv run uvicorn server:app --host 127.0.0.1 --port 8082 --reload
# 运行 claude & Enjoy
export ANTHROPIC_BASE_URL=http://localhost:8082 && claude` 
```

### [](#p-6795038-h-2)注意！！！

确保你的 API **支持 Function Call**，不然 CC 就只是一个聊天客户端了，很多第三方 API 并不支持工具函数调用，这一点需要清楚

> 不过也不是没有解决办法，可以通过 prompt 让 Gemini 以特定的格式输出调用，类似于 RooCode 的 System Prompt 让 AI 输出[固定 XML 标签格式](https://github.com/RooCodeInc/Roo-Code/blob/9da598c9/src/core/assistant-message/parseAssistantMessageV2.ts)的方式。不过这块的调试比较麻烦，周末再研究一下（社畜 ![](https://linux.do/images/emoji/twemoji/smiling_face_with_tear.png?v=14)

* * *

[](#p-6795038-h-3)碎碎念
---------------------

完全用 Gemini 代理 Claude Code 的请求后明显能感觉到架构之类的工作做的更好了，唯一缺点就是 Gemini 在调用工具方面很差劲…  
不过，在 `CLAUDE.md` 里面简单加几句指令后情况有所缓解：

```


`# CLAUDE.md

## 严格遵循的指令

你必须在每次对话前**仔细**阅读你的内部规则，这很重要，否则整个工作流程都无法继续。

请在每次对话开始之前，调用 TodoRead 检查是否存在未完成的任务。当一个任务完成后，必须在回答结束前调用 TodoWrite 更新任务状态。

仔细理解用户的意图，如果它满足你内部规则中的 Tool 条件，强烈要求你调用合适的 Tool。` 
```

看了一下 CC 的原始请求，发现 prompt 里面做了大量的 example 举例，由于模型之间存在差异，我怀疑 Gemini 这种超长上下文窗口的模型会不会因此反而更容易理解错重点和产生幻觉？

不确定如果单独为 Gemini 定制一套 System Prompt 会不会有奇效…

* * *

**另外 CC 是真的成本杀手** ![](https://linux.do/images/emoji/twemoji/exploding_head.png?v=14)
 （等一个支持 Function Call 的 AI Studio 2api ![](https://linux.do/images/emoji/twemoji/heart_eyes.png?v=14)
），每次输入框输入字都会调用小模型 `haiku` 先让 AI 检查输入，后台似乎也会发送辅助请求  

[![](https://linux.do/uploads/default/optimized/4X/9/6/a/96ac27c690f73fc332e53b1becd25f1747f87d0f_2_690x465.png)

image1926×1298 512 KB

](https://linux.do/uploads/default/original/4X/9/6/a/96ac27c690f73fc332e53b1becd25f1747f87d0f.png "image")

  

8 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

![](https://linux.do/images/emoji/twemoji/open_mouth.png?v=14)

open\_mouth

![](https://linux.do/images/emoji/twemoji/clap.png?v=14)

clap

![](https://linux.do/images/emoji/twemoji/laughing.png?v=14)

laughing

![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14)

tieba\_087

131

​ ​ 回复

*   [Claude Code 接入 Gemini 1M 上下文爽用！](https://linux.do/t/topic/743319)
*   [![](https://linux.do/images/emoji/twemoji/ringed_planet.png?v=14)
    L站福利及项目信息汇总【AI篇】（不定时更新）](https://linux.do/t/topic/742212)

4.8k 浏览量 160 赞 7 链接 46 用户

 [![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
 11](/u/ChaCha "ChaCha") 

 [![](https://linux.do/user_avatar/linux.do/lccong/96/589635_2.png)
 8](/u/lccong "lccong") 

 [![](https://linux.do/user_avatar/linux.do/duolabmeng6/96/131552_2.png)
 4](/u/duolabmeng6 "duolabmeng6")

 [![](https://linux.do/user_avatar/linux.do/haleclipse/96/606178_2.png)
 3](/u/Haleclipse "Haleclipse") 

 [![](https://linux.do/letter_avatar/wendavid/96/5_d44a9b381edc88181525e3c8350177ca.png)
 3](/u/WenDavid "WenDavid")

阅读时间 7 分钟

热门回复

[![](https://linux.do/user_avatar/linux.do/baipiaodang/96/650531_2.png)
](/u/baipiaodang)

[baipiaodang](/u/baipiaodang) ![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14) 

[14 天](/t/topic/745106/2?u=niyan2025 "发布日期")

前来学习

  

3

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/yaolinglong/96/488381_2.png)
](/u/yaolinglong)

[姚小凌龙](/u/yaolinglong)[yaolinglong](/u/yaolinglong) ![](https://linux.do/images/emoji/twemoji/china.png?v=14) 

[14 天](/t/topic/745106/3?u=niyan2025 "发布日期")

牛逼的佬

  

3

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/handsome/96/736205_2.png)
](/u/handsome)

[大帅哥](/u/handsome)[handsome](/u/handsome)种子用户 ![](https://linux.do/images/emoji/twemoji/rage.png?v=14) 

[14 天](/t/topic/745106/4?u=niyan2025 "发布日期")

感谢大佬教程

  

2

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chchchchc/96/240044_2.png)
](/u/chchchchc)

[chchchchc](/u/chchchchc)指导顾问

[14 天](/t/topic/745106/5?u=niyan2025 "发布日期")

gemini调用工具真的太懒了

  

1 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14)

tieba\_087

2

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/throttle/96/778052_2.png)
](/u/Throttle)

[方块](/u/Throttle)[Throttle](/u/Throttle)无所不知

[14 天](/t/topic/745106/6?u=niyan2025 "发布日期")

感谢分享！！

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/sczheng/96/163381_2.png)
](/u/SCzheng)

[郑御白](/u/SCzheng)[SCzheng](/u/SCzheng)活跃用户

[14 天](/t/topic/745106/7?u=niyan2025 "发布日期")

mark mark

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/haleclipse/96/606178_2.png)
](/u/Haleclipse)

[哈雷彗星](/u/Haleclipse)[Haleclipse](/u/Haleclipse)无所不知 ![](https://linux.do/images/emoji/twemoji/dizzy.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/chchchchc/48/240044_2.png)
 chchchchc

[14 天](/t/topic/745106/8?u=niyan2025 "发布日期")

没有那个 “想法”

  

​ ​ 回复

[![](https://linux.do/letter_avatar/a3members/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/a3members)

[a3members](/u/a3members)

[14 天](/t/topic/745106/9?u=niyan2025 "发布日期")

佬 如果我用vertex expree mode的api env要怎么填

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/sczheng/96/163381_2.png)
](/u/SCzheng)

[郑御白](/u/SCzheng)[SCzheng](/u/SCzheng)活跃用户

[14 天](/t/topic/745106/10?u=niyan2025 "发布日期")

为什么我调用gemini会默认去调用vertex?明明我配置的是gemini

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/kavi/96/306357_2.png)
](/u/Kavi)

[Kavi](/u/Kavi)一元复始

[14 天](/t/topic/745106/11?u=niyan2025 "发布日期")

学习并点赞 ![](https://linux.do/images/emoji/twemoji/rofl.png?v=14)

  

​ ​ 回复

[![](https://linux.do/letter_avatar/touchtop/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/touchtop)

[touchtop](/u/touchtop)

[14 天](/t/topic/745106/12?u=niyan2025 "发布日期")

感谢分享

  

​ ​ 回复

[![](https://linux.do/letter_avatar/jayzqj/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/jayzqj)

[暴富](/u/jayzqj)[jayzqj](/u/jayzqj)

[14 天](/t/topic/745106/13?u=niyan2025 "发布日期")

感谢分享

  

​ ​ 回复

[![](https://linux.do/letter_avatar/lucas2024/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/lucas2024)

[Lucas](/u/lucas2024) [lucas2024](/u/lucas2024)大预言家

[14 天](/t/topic/745106/14?u=niyan2025 "发布日期")

技术贴，点赞

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/1441853031/96/743332_2.png)
](/u/1441853031)

[GPTYou](/u/1441853031)[1441853031](/u/1441853031)一元复始 ![](https://linux.do/images/emoji/twemoji/grapes.png?v=14) 

[14 天](/t/topic/745106/15?u=niyan2025 "发布日期")

给技术佬点赞~

  

1 个回复

![](https://linux.do/images/emoji/twemoji/laughing.png?v=14)

laughing

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/1441853031/48/743332_2.png)
 GPTYou

[14 天](/t/topic/745106/16?u=niyan2025 "发布日期")

并非技术（

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lyt/96/694_2.png)
](/u/lyt)

[子兮](/u/lyt)[lyt](/u/lyt)浴火重生 ![](https://linux.do/uploads/default/original/3X/5/9/596da26825d2a806bd1952b5231f24d212866c1b.png?v=14) 

[14 天](/t/topic/745106/17?u=niyan2025 "发布日期")

qianlaixuexi

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/crolin/96/679195_2.png)
](/u/crolin)

[肉山大魔王](/u/crolin)[crolin](/u/crolin)文化宣导员

[14 天](/t/topic/745106/18?u=niyan2025 "发布日期")

明天试下，看看捞友的公益的API能用不，我还没试过claude code好用不

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/liulianmantou/96/383168_2.png)
](/u/liulianmantou)

[liulianmantou](/u/liulianmantou)

[14 天](/t/topic/745106/19?u=niyan2025 "发布日期")

_牛！又打开了一扇新大门！_

  

​ ​ 回复

[![](https://linux.do/letter_avatar/deuspamm/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/deuspamm)

[deuspamm](/u/deuspamm)

[14 天](/t/topic/745106/20?u=niyan2025 "发布日期")

大佬，为啥一直报错。  
用的论坛里的第三方免费gemini接口

```


`00:25:35 - LiteLLM:DEBUG: litellm_logging.py:1932 - Logging Details LiteLLM-Failure Call: []
2025-06-24 00:25:35,738 - ERROR - Error processing request: {
  "error": "litellm.APIError: APIError: OpenAIException - 'str' object has no attribute 'model_dump'",
  "type": "APIError",
  "traceback": "Traceback (most recent call last):\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/llms/openai/openai.py\", line 800, in acompletion\n    stringified_response = response.model_dump()\nAttributeError: 'str' object has no attribute 'model_dump'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/main.py\", line 471, in acompletion\n    response = await init_response\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/llms/openai/openai.py\", line 841, in acompletion\n    raise OpenAIError(\nlitellm.llms.openai.common_utils.OpenAIError: 'str' object has no attribute 'model_dump'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/root/dev/projects/freecc/server.py\", line 1022, in create_message\n    litellm_response = await litellm.acompletion(**litellm_request)\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/utils.py\", line 1441, in wrapper_async\n    raise e\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/utils.py\", line 1300, in wrapper_async\n    result = await original_function(*args, **kwargs)\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/main.py\", line 490, in acompletion\n    raise exception_type(\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py\", line 2214, in exception_type\n    raise e\n  File \"/root/dev/projects/freecc/.venv/lib/python3.10/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py\", line 455, in exception_type\n    raise APIError(\nlitellm.exceptions.APIError: litellm.APIError: APIError: OpenAIException - 'str' object has no attribute 'model_dump'\n",
  "message": "litellm.APIError: APIError: OpenAIException - 'str' object has no attribute 'model_dump'",
  "status_code": 500,
  "llm_provider": "openai",
  "model": "openai/gemini-2.5-flash-preview-05-20"
}` 
```

  

2 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/letter_avatar/deuspamm/48/5_d44a9b381edc88181525e3c8350177ca.png)
 deuspamm

[14 天](/t/topic/745106/21?u=niyan2025 "发布日期")

把 .env 里的 LOG\_REQUEST\_BODY=“true” 开开看看，或者是哪个佬的免费站，我明天试试

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/dragon1013/96/598381_2.png)
](/u/dragon1013)

[dragon](/u/dragon1013)[dragon1013](/u/dragon1013)活跃用户

[14 天](/t/topic/745106/22?u=niyan2025 "发布日期")

后排学习

  

​ ​ 回复

[![](https://linux.do/letter_avatar/gitibmchat2/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/gitibmchat2)

[gitibm2](/u/gitibmchat2)[gitibmchat2](/u/gitibmchat2)一元复始

[14 天](/t/topic/745106/23?u=niyan2025 "发布日期")

厉害厉害

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/aza/96/237307_2.png)
](/u/aza)

[阿萨Aza](/u/aza)[aza](/u/aza)圆圆满满 ![](https://linux.do/uploads/default/original/3X/5/9/596da26825d2a806bd1952b5231f24d212866c1b.png?v=14) 

 ![](https://linux.do/letter_avatar/deuspamm/48/5_d44a9b381edc88181525e3c8350177ca.png)
 deuspamm

[13 天](/t/topic/745106/24?u=niyan2025 "发布日期")

是不是base\_url 没加 /v1

  

1 个回复

​ ​ 回复

[![](https://linux.do/letter_avatar/deuspamm/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/deuspamm)

[deuspamm](/u/deuspamm)

 ![](https://linux.do/user_avatar/linux.do/aza/48/237307_2.png)
 阿萨Aza

[13 天](/t/topic/745106/25?u=niyan2025 "发布日期")

果然是没有加v1的问题，谢谢大佬！

  

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/96/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

[13 天](/t/topic/745106/26?u=niyan2025 "发布日期")

为啥我不行啊，我的请求都没到freecc

我用cherry 测试可以，但是用claude code就不行了  

[![](https://linux.do/uploads/default/original/4X/6/8/5/6858554464ae20fcda694b7e541086e19b54ed2c.png)

image1099×431 11.3 KB

](https://linux.do/uploads/default/original/4X/6/8/5/6858554464ae20fcda694b7e541086e19b54ed2c.png "image")

  

[![](https://linux.do/uploads/default/original/4X/0/0/0/00030ca4af48d5be0b90d822e6ce91e47dd81e50.png)

image1106×258 5.88 KB

](https://linux.do/uploads/default/original/4X/0/0/0/00030ca4af48d5be0b90d822e6ce91e47dd81e50.png "image")

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/lccong/48/589635_2.png)
 lccong

[13 天](/t/topic/745106/27?u=niyan2025 "发布日期")

目前只做了 OpenAI 格式的兼容，gemini 自定义 base url litellm 不支持，vertex express mode 的请求也不支持，佬用的哪个请求，我明天可以让 CC 适配一下

  

1 个回复

​ ​ 回复

[![](https://linux.do/letter_avatar/wendavid/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/WenDavid)

[wendavid](/u/WenDavid)活跃用户

[13 天](/t/topic/745106/28?u=niyan2025 "发布日期")

理论上讲感觉用litellm可能是最简单的？

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/96/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha

[13 天](/t/topic/745106/29?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha:

> OpenAI 格式的兼容

OpenAI 格式的兼容 用的就是这个。。

  

![](https://linux.do/images/emoji/twemoji/open_mouth.png?v=14)

open\_mouth

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/letter_avatar/wendavid/48/5_d44a9b381edc88181525e3c8350177ca.png)
 wendavid

[13 天](/t/topic/745106/30?u=niyan2025 "发布日期")

是的，不过 function call 这一块需要手动转，不然就只是纯 chat 了

  

1 个回复

​ ​ 回复

[![](https://linux.do/letter_avatar/wendavid/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/WenDavid)

[wendavid](/u/WenDavid)活跃用户

 ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha

[13 天](/t/topic/745106/31?u=niyan2025 "发布日期")

是，不知道litellm里面有没有能转的法子hhh

以及感觉既然gemini调用工具有问题的话，会不会搭个流水线gemini读完扔给Claude写工具的参数会比较好？

example的疑虑的话，其实很可能主要是因为哈基米是思考模型

关于function call的ai studio api，好像默认是没这个功能的，我认为写一个结构化输出比较好。

关于haiku相关确实是这样的，但是haiku其实也用来做edit之类的工作好像，另外还有一些命名之类的工作好像

  

2 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/letter_avatar/wendavid/48/5_d44a9b381edc88181525e3c8350177ca.png)
 wendavid

[13 天](/t/topic/745106/32?u=niyan2025 "发布日期")

有的，目前这个项目用的就是 litellm hhh 不过感觉没有 new api 自带的格式支持做得好，打算抽空抄一遍它的实现

  

2 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/96/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha

[13 天](/t/topic/745106/33?u=niyan2025 "发布日期")

我现在是伪登录，要用我的claude账号先登录吗？

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/lccong/48/589635_2.png)
 lccong

[13 天](/t/topic/745106/34?u=niyan2025 "发布日期")

不用登录的，你可以把 log 开一下看看详细错误

  

1 个回复

​ ​ 回复

[![](https://linux.do/letter_avatar/wendavid/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/WenDavid)

[wendavid](/u/WenDavid)活跃用户

 ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha

[13 天](/t/topic/745106/35?u=niyan2025 "发布日期")

hhh主要是litellm还有透传之类的，感觉用起来就比较方便

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/96/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha

[13 天](/t/topic/745106/36?u=niyan2025 "发布日期")

全开了，就是请求没有转发  

[![](https://linux.do/uploads/default/optimized/4X/9/e/d/9eda0c7edd47f5da18c4e32aac7171e6286518cb_2_690x329.png)

image1152×550 36.1 KB

](https://linux.do/uploads/default/original/4X/9/e/d/9eda0c7edd47f5da18c4e32aac7171e6286518cb.png "image")

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/letter_avatar/wendavid/48/5_d44a9b381edc88181525e3c8350177ca.png)
 wendavid

[13 天](/t/topic/745106/37?u=niyan2025 "发布日期")

至于 ai studio，站内有大佬做了一个 build 版的 [https://linux.do/t/topic/722597](https://linux.do/t/topic/722597) 这个就什么都支持，不过我没接上 CC 一直报参数错误，空了再研究（另外说一句，这个用来跑 roocode 很爽！速度非常快）

  

1 个回复

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/lccong/48/589635_2.png)
 lccong

[13 天](/t/topic/745106/38?u=niyan2025 "发布日期")

claude-proxy.log 文件里面也没有吗

  

2 个回复

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/96/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha

[13 天](/t/topic/745106/39?u=niyan2025 "发布日期")

[![](https://linux.do/uploads/default/optimized/4X/f/9/2/f929a41f824ae131cd46d6776938d049af85badd_2_690x242.png)

image1392×490 116 KB

](https://linux.do/uploads/default/original/4X/f/9/2/f929a41f824ae131cd46d6776938d049af85badd.png "image")

  
没有。。

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/96/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha

[13 天](/t/topic/745106/40?u=niyan2025 "发布日期")

卧槽，可以了。。

我把wsl的网络模式改成nat就可以了。。。

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/lccong/96/589635_2.png)
](/u/lccong)

[lccong](/u/lccong)

 ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha

[13 天](/t/topic/745106/41?u=niyan2025 "发布日期")

这个我试了下，好像不支持工具调用 tools

  

1 个回复

​ ​ 回复

[![](https://linux.do/letter_avatar/gitibmchat2/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/gitibmchat2)

[gitibm2](/u/gitibmchat2)[gitibmchat2](/u/gitibmchat2)一元复始

[13 天](/t/topic/745106/42?u=niyan2025 "发布日期")

感谢感谢

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/lccong/48/589635_2.png)
 lccong

[12 天](/t/topic/745106/43?u=niyan2025 "发布日期")

那大概率是你的 key 可能不支持 fc 哦

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/sb_fantast/96/225944_2.png)
](/u/SB_Fantast)

[一杯白开水](/u/SB_Fantast)[SB\_Fantast](/u/SB_Fantast) ![](https://linux.do/images/emoji/twemoji/grinning.png?v=14) 

[12 天](/t/topic/745106/44?u=niyan2025 "发布日期")

[![](https://linux.do/uploads/default/original/4X/c/f/2/cf2acab6bbb351f1745f1e970ebf6997b7631960.png)

image1113×626 18.8 KB

](https://linux.do/uploads/default/original/4X/c/f/2/cf2acab6bbb351f1745f1e970ebf6997b7631960.png "image")

  
为什么我这边提示要登入?

  

1 个回复

​ ​ 回复

[![](https://linux.do/letter_avatar/fengsanle/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/fengsanle)

[fengsanle](/u/fengsanle)

 ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha

[12 天](/t/topic/745106/45?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha:

> `export ANTHROPIC_BASE_URL=http://localhost:8082 && claude`

[![](https://linux.do/uploads/default/optimized/4X/c/c/7/cc74a1eae78b2bbc35dc54233317a4b704ff1070_2_690x153.jpeg)

image1588×354 41.9 KB

](https://linux.do/uploads/default/original/4X/c/c/7/cc74a1eae78b2bbc35dc54233317a4b704ff1070.jpeg "image")

  
啥情况啊 检查好多遍了 服务是正常启动的 可到了claude这一步就是连接不上

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ayt407123/96/197431_2.png)
](/u/ayt407123)

[ayt407123](/u/ayt407123)一元复始

[12 天](/t/topic/745106/46?u=niyan2025 "发布日期")

佬，Claude code和Cline、Roo code、Continue这几个相比，使用Claude 4 sonnet，你觉得哪个的Agent模式更好用呢？目前只尝试了roo，确实token消耗如流水啊 ![](https://linux.do/images/emoji/twemoji/rofl.png?v=14)
  
我只用支持设置base url的扩展或者项目，除了我说的这几个，佬是否还有其他的推荐？

  

1 个回复

1

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/chacha/96/625306_2.png)
](/u/ChaCha)

[Cha](/u/ChaCha)[ChaCha](/u/ChaCha) ![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/ayt407123/48/197431_2.png)
 ayt407123

[12 天](/t/topic/745106/47?u=niyan2025 "发布日期")

cc 官方满血 sonnet 4 其实是最好用的，亲儿子各项 prompt 都是最佳的，其他都不太行，roocode cline 我都用过，continue 没用过不清楚

  

1 个回复

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/nerokim/96/114173_2.png)
](/u/nerokim)

[🍏네로🍎](/u/nerokim)[nerokim](/u/nerokim)

[12 天](/t/topic/745106/48?u=niyan2025 "发布日期")

感谢分享 ![](https://linux.do/images/emoji/twemoji/hand_with_index_finger_and_thumb_crossed.png?v=14)

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/ayt407123/96/197431_2.png)
](/u/ayt407123)

[ayt407123](/u/ayt407123)一元复始

 ![](https://linux.do/user_avatar/linux.do/chacha/48/625306_2.png)
 Cha

[12 天](/t/topic/745106/49?u=niyan2025 "发布日期")

好的，感谢佬的分享。话说像Augment、cursor上面他们打包好的sonnet4是不是都有降智的风险？就是用的太猛会给你偷偷调包别的模型来顶包上。我总感觉会有这种情况，所以我都是用自己的key ![](https://linux.do/images/emoji/twemoji/smiling_face_with_tear.png?v=14)

  

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/578382239/96/226770_2.png)
](/u/578382239)

[南山](/u/578382239)[578382239](/u/578382239)一元复始

[12 天](/t/topic/745106/50?u=niyan2025 "发布日期")

感谢佬友

  

​ ​ 回复

Invalid date Invalid date

↑↓⇔⇧⇩