# Gemini2API 服务端实现，支持 RooCode（佬友共同维护版本） - 开发调优 / 开发调优, Lv2 - LINUX DO
[Gemini2API 服务端实现，支持 RooCode（佬友共同维护版本） - 开发调优 / 开发调优, Lv2 - LINUX DO](https://linux.do/t/topic/575699) 

  Gemini2API 服务端实现，支持 RooCode（佬友共同维护版本） - 开发调优 / 开发调优, Lv2 - LINUX DO                                                 

[跳到主要内容](#main-container)

子系统

*   [Connect](https://connect.linux.do "LINUX DO Connect 账号连接系统。")
*   [Webmail](https://webmail.linux.do/ "LINUX DO Mail 系统。")

元宇宙

*   [导航站](https://nav.linux.do "LINUX DO 相关服务导航站。")
*   [Wiki站](https://wiki.linux.do "LINUX DO Wiki 系统。")
*   [分发站](https://cdk.linux.do "LINUX DO 分发站，福利多多。")

其他

*   [2048](https://2048.linux.do "一起来挑战、打榜经典2048小游戏。")
*   [T-Shirt](https://shanwaiyoushan.taobao.com "LINUX DO元气T+POLO：社交新名片。")

 [![](https://linux.do/uploads/default/original/3X/b/4/b4fa45d8b03df61f5d011e173c0adf8497028b16.png)](/) 

*   ​

*    ![](https://linux.do/letter_avatar/niyan2025/96/5_d44a9b381edc88181525e3c8350177ca.png)
       [ 2 ](# "2 个未读通知") 

*   [话题](/latest "所有话题")
*   [我的帖子](/u/niyan2025/activity/drafts "我的未发布草稿")
*   [我的消息](/u/niyan2025/messages "我的个人信息")
*   [关于](/about "关于此网站的更多详细信息")
*   [近期活动](/upcoming-events "近期活动")
*   更多

类别

*   [开发调优](/c/develop/4 "此版块包含开发、测试、调试、部署、优化、安全等方面的内容")
*   [资源荟萃](/c/resource/14 "包括软件分享、开源仓库、视频课程、书籍等分享")
*   [文档共建](/c/wiki/42 "佬友化身翰林学士，一起来编书了。")
*   [非我莫属](/c/job/27 "学成文武艺，货与帝王家。招聘/求职分类，只能发此类信息。")
*   [读书成诗](/c/reading/32 "跟着佬友们一起在论坛读完一本书是什么体验？")
*   [扬帆起航](/c/startup/46 "扬帆起航，目标是星辰大海！")
*   [前沿快讯](/c/news/34 "前沿快讯，不出门能知天下事。")
*   [网络记忆](/c/feeds/92 "网络是有记忆的，确信！")
*   [福利羊毛](/c/welfare/36 "正经人谁花那个钱啊～ 此版块供羊毛、抽奖等福利使用。")
*   [搞七捻三](/c/gossip/11 "闲聊吹水的板块。不得讨论政治、色情等违规内容。")
*   [运营反馈](/c/feedback/2 "有关此网站、其组织、运作方式以及如何改进的讨论。")
*   [深海幽域](/c/muted/45 "冰山下的深海。帖子不会上信息流、不会被论坛搜索。")
*   [所有类别](/categories)

标签

*   [人工智能](/tag/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD)
*   [公告](/tag/%E5%85%AC%E5%91%8A)
*   [快问快答](/tag/%E5%BF%AB%E9%97%AE%E5%BF%AB%E7%AD%94)
*   [抽奖](/tag/%E6%8A%BD%E5%A5%96)
*   [精华神帖](/tag/%E7%B2%BE%E5%8D%8E%E7%A5%9E%E5%B8%96)
*   [所有标签](/tags)

*   [我的消息串](/chat/threads "我的消息串")

频道

*   [常规频道](/chat/c/general/2 "🈲 禁止在聊天频道里发送 打卡 等无意义信息，被举报会喜提 禁言1小时 。")

直接消息

*    [![](https://linux.do/user_avatar/linux.do/xronus/48/130867_2.png)  𝒜𝓃𝒾𝓋𝒾𝓍](/chat/c/%F0%9D%92%9C%F0%9D%93%83%F0%9D%92%BE%F0%9D%93%8B%F0%9D%92%BE%F0%9D%93%8D/32458 "与 𝒜𝓃𝒾𝓋𝒾𝓍 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/huan/48/293194_2.png)  焕昭君](/chat/c/%E7%84%95%E6%98%AD%E5%90%9B/43057 "与 焕昭君 聊天") 
*    [![](https://linux.do/user_avatar/linux.do/wenjuhe/48/672301_2.png)  奇妙进化小河马🦛   ![](https://linux.do/images/emoji/twemoji/hippopotamus.png?v=14)](/chat/c/%E5%A5%87%E5%A6%99%E8%BF%9B%E5%8C%96%E5%B0%8F%E6%B2%B3%E9%A9%AC%F0%9F%A6%9B/45968 "与 奇妙进化小河马🦛 聊天") 

聊天

Default

​ ​ ​

**真诚**、**友善**、**团结**、**专业**，共建你我引以为荣之社区。[《常见问题解答》](/faq)

[Gemini2API 服务端实现，支持 RooCode（佬友共同维护版本）](/t/topic/575699)
========================================================

[开发调优](/c/develop/4)[开发调优, Lv2](/c/develop/develop-lv2/31)

[人工智能](/tag/人工智能),[Gemini](/tag/gemini)

您已选择 **0** 个帖子。

全选

取消选择

*   [来源](#p-5250700-h-1)

*   [使用Docker运行（推荐）](#p-5250700-docker-2)

*   [Render 部署（同样推荐）](#p-5250700-unicorn-render-3)
    *   [自动 Render 部署](#p-5250700-render-4)
    *   [手搓 Render 部署](#p-5250700-render-5)

*   [抱脸部署（部分佬友出现问题可以使用这个克隆一下）](#p-5250700-face_without_mouth-6)

*   [另外一种 Docker-Compose 部署方法（@devinglaw 提供）](#p-5250700-docker-compose-devinglaw-7)

*   [暴力手搓（推荐高玩尝试）](#p-5250700-h-8)

*   [效果图](#p-5250700-h-9)

*   [问题总结](#p-5250700-h-10)
    *   [服务器报 500 问题解决方案](#p-5250700-h-500-11)
    *   [其他 500 问题](#p-5250700-h-500-12)
    *   [本机地址无法获取问题（你使用了127.0.0.1）](#p-5250700-h-127001-13)
    *   [Cookie可能过期太快解决方案](#p-5250700-cookie-14)
    *   [找不到 SECURE\_1PSIDTS 解决办法](#p-5250700-secure_1psidts-15)

*   [佬友 PR 征集](#p-5250700-pr-16)

*   [部分更新日志](#p-5250700-dizzy-17)
    *   [【latest】2025-5-17](#p-5250700-latest2025-5-17-18)
    *   [2025-05-08](#p-5250700-h-2025-05-08-19)
    *   [2025-04-27](#p-5250700-h-2025-04-27-20)

跳至结尾

时间线

​

[4月 18 日](/t/topic/575699/1 "跳到第一个帖子")

1 / 346

4月 18 日

返回

[9 小时 前](/t/topic/575699/354)

热门回复 ​

时间线

[![](https://linux.do/user_avatar/linux.do/rrorange/96/242544_2.png)
](/u/RrOrange)

[RrOrange](/u/RrOrange)一元复始 ![](https://linux.do/images/emoji/twemoji/zzz.png?v=14) 

25

[4月 18 日](/t/topic/575699?u=niyan2025 "发布日期")

[](#p-5250700-h-1)来源
--------------------

![](https://linux.do/user_avatar/linux.do/blueskyxn/48/555591_2.png)
 [Gemini网页版2API，也许恰好配合今天的白嫖Google Advance](https://linux.do/t/topic/574296) [福利羊毛](/c/welfare/36)

[github.com](https://github.com/HanaokaYuzu/Gemini-API)

![](https://linux.do/uploads/default/optimized/4X/4/d/8/4d83be467691762ecdfad6ed8801b9820058e1bd_2_690x344.png)

### [GitHub - HanaokaYuzu/Gemini-API: ✨ Elegant async Python API for Google Gemini web...](https://github.com/HanaokaYuzu/Gemini-API)

✨ Elegant async Python API for Google Gemini web app

然后花了一点时间做了一个API，可以对接 Cherry Studio

* * *

[](#p-5250700-docker-2)![](https://linux.do/images/emoji/twemoji/spouting_whale.png?v=14)
 使用Docker运行（推荐）
---------------------------------------------------------------------------------------------------------

> 不用 star 纯用爱发电、纯玩，有佬友只用 Docker 所以写了 Docker Compose ![](https://linux.do/images/emoji/twemoji/nerd_face.png?v=14)

![](https://linux.do/user_avatar/linux.do/zeduwfd/48/133160_2.png)
 Zwei🚩:

> 还是希望能更方便用 docker compose

1.  克隆本项目
    
    ```
    
    
    `git clone https://github.com/zhiyu1998/Gemi2Api-Server.git` 
    ```
    
2.  创建 `.env` 文件并填入你的 Gemini Cookie 凭据 `Secure_1PSID` 和`Secure_1PSIDTS` :
    
    ```
    
    
    `cp .env.example .env
    # 用编辑器打开 .env 文件，填入你的 Cookie 值` 
    ```
    
3.  启动服务:
    
    ```
    
    
    `docker-compose up -d` 
    ```
    
4.  更新后重建命令（![](https://linux.do/images/emoji/twemoji/warning.png?v=14)
    不更新注意别使用）：
    
    ```
    
    
    `docker-compose up -d --build` 
    ```
    

* * *

[](#p-5250700-unicorn-render-3)![](https://linux.do/images/emoji/twemoji/unicorn.png?v=14)
 Render 部署（同样推荐）
-----------------------------------------------------------------------------------------------------------

### [](#p-5250700-render-4)自动 Render 部署

[![](https://linux.do/uploads/default/original/4X/f/2/3/f234871aec517f0c7776e747e4f0e0ee9bf05f28.svg)
](https://render.com/deploy?repo=https://github.com/zhiyu1998/Gemi2Api-Server)

### [](#p-5250700-render-5)手搓 Render 部署

![](https://linux.do/user_avatar/linux.do/loogle/48/337369_2.png)
 Aioooooooooo:

> *   访问 [https://dashboard.render.com](https://dashboard.render.com)
> *   Add new
> *   选择 Web Service
> *   再选择 Public Git Repository 填 [GitHub - zhiyu1998/Gemi2Api-Server: HanaokaYuzu / Gemini-API 的服务端简单实现](https://github.com/zhiyu1998/Gemi2Api-Server.git)
> *   Environment Variables 里面填变量：  
>     Secure\_1PSID = “COOKIE VALUE HERE”  
>     Secure\_1PSIDTS = “COOKIE VALUE HERE”
> *   部署完事

* * *

[](#p-5250700-face_without_mouth-6)![](https://linux.do/images/emoji/twemoji/face_without_mouth.png?v=14)
 抱脸部署（部分佬友出现问题可以使用这个克隆一下）
-----------------------------------------------------------------------------------------------------------------------------------

![](https://linux.do/letter_avatar/qqrr/48/5_d44a9b381edc88181525e3c8350177ca.png)
 qqrr:

> 你再重新复制一下 space 试试，或者替换一下 dockerfile 内容，我修改了一下 dockerfile，刚试了下，可以正常对话，现在代码仓库使用的是 [zhiyu1998/Gemi2Api-Server](https://github.com/zhiyu1998/Gemi2Api-Server)，之后更新的话，factory rebuild 一下应该就行

[https://huggingface.co/spaces/ykl45/gmn2a](https://huggingface.co/spaces/ykl45/gmn2a)

* * *

[](#p-5250700-docker-compose-devinglaw-7)![](https://linux.do/images/emoji/twemoji/whale.png?v=14)
 另外一种 Docker-Compose 部署方法（[@devinglaw![](https://linux.do/images/emoji/twemoji/secret.png?v=14)
](/u/devinglaw) 提供）
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

👉 展开：另外一种 Docker-Compose 部署方法

![](https://linux.do/user_avatar/linux.do/devinglaw/48/835378_2.png)
 devinglaw:

> **Docker-compose 教程：**   
> 一、创建.env 文件
> 
> ```null
> SECURE_1PSID=your_psid_value_here
> SECURE_1PSIDTS=your_psidts_value_here 
> 
> ```
> 
> 二、创建 docker-compose.yml 文件
> 
> ```null
> version: '3.8'
> 
> services:
>   gemini-api:
>     image: devinglaw/genmini2api:latest
>     ports:
>       - "8000:8000"
>     env_file:
>       - .env
>     restart: unless-stopped
> 
> 
> ```
> 
> 三、执行命令
> 
> ```null
> docker-compose pull && docker-compose up -d && docker-compose logs --tail=180
> 
> ```
> 
> 直接调用 [http://IP:8000](http://IP:8000) 填入 new-api
> 
> [![](https://linux.do/uploads/default/optimized/4X/8/5/9/859fe96ade191d23a99227c4de40ee405bb190ff_2_343x500.png)
> 
> image580×845 27.7 KB
> 
> ](https://linux.do/uploads/default/original/4X/8/5/9/859fe96ade191d23a99227c4de40ee405bb190ff.png "image")
> 
> [![](https://linux.do/uploads/default/optimized/4X/4/0/5/405e5c795330f5b83bc6dbccc8bd125bb17450b7_2_690x309.png)
> 
> image1113×499 15.4 KB
> 
> ](https://linux.do/uploads/default/original/4X/4/0/5/405e5c795330f5b83bc6dbccc8bd125bb17450b7.png "image")

* * *

[](#p-5250700-h-8)![](https://linux.do/images/emoji/twemoji/enraged_face.png?v=14)
 暴力手搓（推荐高玩尝试）
------------------------------------------------------------------------------------------------

 [![](https://linux.do/images/emoji/twemoji/goose.png?v=14)
 代码地址](https://raw.githubusercontent.com/zhiyu1998/Gemi2Api-Server/refs/heads/main/main.py)

0.  填入`Secure_1PSID` 和`Secure_1PSIDTS` （登录下 [Gemini](https://gemini.google.com/app) 去 Application - Cookie 里面找）

```


`Secure_1PSID = "COOKIE VALUE HERE"
Secure_1PSIDTS = "COOKIE VALUE HERE"` 
```

1.  安装一下依赖（如果存在`pyproject.toml`就使用`uv sync`）

> uv init  
> uv add fastapi uvicorn gemini-webapi

或者pip也可以

> python -m venv venv  
> pip install fastapi uvicorn gemini-webapi

2.  激活一下环境（uv 可以不用激活）

> source venv/bin/activate

3.  启动

> uvicorn main:app --reload --host 0.0.0.0 --port 8000

（uv 可选）如果使用的是uv，那么启动可以使用：

> uv run uvicorn main:app --reload --host 0.0.0.0 --port 8000

4.  如果要挂后台参考：

![](https://linux.do/user_avatar/linux.do/rrorange/48/242544_2.png)
 RrOrange:

> 要挂后台，第一次挂后台就推荐你用 screen 吧
> 
> 以 Ubuntu、Debian 为例子

> ![](https://linux.do/uploads/default/original/3X/6/8/687dca2210abafbcaaf211e27a013c1c0d7d480c.png?v=14)
>  tips: 没有任何密码，仅作为抛砖引玉

* * *

[](#p-5250700-h-9)效果图
---------------------

[![](https://linux.do/uploads/default/optimized/4X/f/5/7/f57a81c002f22d394a9a66a3a5003828a52f6092_2_592x500.jpeg)

image1828×1542 136 KB

](https://linux.do/uploads/default/original/4X/f/5/7/f57a81c002f22d394a9a66a3a5003828a52f6092.jpeg "image")

[![](https://linux.do/uploads/default/optimized/4X/0/a/b/0ab7c27a09c02f3eaf66c719641b496433bea389_2_498x500.jpeg)

image1332×1336 151 KB

](https://linux.do/uploads/default/original/4X/0/a/b/0ab7c27a09c02f3eaf66c719641b496433bea389.jpeg "image")

* * *

[](#p-5250700-h-10)问题总结
-----------------------

### [](#p-5250700-h-500-11)服务器报 `500 问题`解决方案

`500 的问题`一般是 IP 不太行 或者 请求太频繁（后者等待一段时间或者重新新建一个隐身标签登录一下重新给`Secure_1PSID` 和`Secure_1PSIDTS` 即可），见issue：

```


`"message": "500 {"detail":"Error generating completion: Failed to initialize client. SECURE_1PSIDTS could get expired frequently,` 
```

[github.com/HanaokaYuzu/Gemini-API](https://github.com/HanaokaYuzu/Gemini-API/issues/72)

#### [Failed to initialize client. SECURE\_1PSIDTS could get expired frequently](https://github.com/HanaokaYuzu/Gemini-API/issues/72)

已打开 2025年3月20日

已关闭 2025年3月27日

 [![](https://linux.do/uploads/default/original/4X/f/f/6/ff65c801ea416f8106bf02b6213668f2cc367425.png)
 akenila](https://github.com/akenila) 

i always meet this error, even i get very fast, incognito tab or not, re-login o…r not, leave SECURE\_1PSIDTS empty or not, someone help me

[github.com/HanaokaYuzu/Gemini-API](https://github.com/HanaokaYuzu/Gemini-API/issues/6)

#### [\_\_Secure-1PSIDTS](https://github.com/HanaokaYuzu/Gemini-API/issues/6)

已打开 2024年2月25日

已关闭 2024年3月18日

 [![](https://linux.do/uploads/default/original/4X/0/8/c/08cf47cf308225c0612d27e1c24df940f8205f21.jpeg)
 raymerjacque](https://github.com/raymerjacque) 

bug

the \_\_Secure-1PSIDTS expires very quickly... is there no way around this ? a sc…ript to renew it, or another method of authentication ? another cookie or token that can be used ? some google account dont even show "\_\_Secure-1PSIDTS" its not available in F12 or cookie editor, what to do in such cases ?

隐身标签解决方案：  

[![](https://linux.do/uploads/default/optimized/4X/1/e/9/1e97a9d2f9f2c4d804d5690b2f5a059e105d3c54_2_690x187.png)

image1916×520 50.8 KB

](https://linux.do/uploads/default/original/4X/1/e/9/1e97a9d2f9f2c4d804d5690b2f5a059e105d3c54.png "image")

### [](#p-5250700-h-500-12)其他 500 问题

![](https://linux.do/letter_avatar/xddd/48/5_d44a9b381edc88181525e3c8350177ca.png)
 xdd:

> VPS 的 ip 被 Google 拉黑了，我的也是部署了一个 mihomo docker 开了 tun 翻墙就好了

### [](#p-5250700-h-127001-13)本机地址无法获取问题（你使用了`127.0.0.1`）

解决方案如下：

![](https://linux.do/user_avatar/linux.do/rrorange/48/242544_2.png)
 RrOrange:

> 要运行在 0.0.0.0，不然外边获取不到
> 
> > uvicorn main:app --reload --host 0.0.0.0 --port 8000

### [](#p-5250700-cookie-14)Cookie可能过期太快解决方案

![](https://linux.do/user_avatar/linux.do/devinglaw/48/835378_2.png)
 devinglaw:

> 开无痕模式，复制数据后马上关闭，不能退出账号

### [](#p-5250700-secure_1psidts-15)找不到 SECURE\_1PSIDTS 解决办法

![](https://linux.do/letter_avatar/keung/48/5_d44a9b381edc88181525e3c8350177ca.png)
 keung:

> huggingface 部署  
> 清除 cookie 重新登入，找不到 SECURE\_1PSIDTS, 改填入\_\_Secure-1PAPISID 的值可以調用

* * *

[](#p-5250700-pr-16)佬友 PR 征集
----------------------------

PR直达：

[github.com](https://github.com/zhiyu1998/Gemi2Api-Server)

![](https://linux.do/uploads/default/optimized/4X/9/9/9/9998b7b8e8cf9f396414eb1e4d0fa19df423e4ac_2_690x344.png)

### [GitHub - zhiyu1998/Gemi2Api-Server: HanaokaYuzu / Gemini-API 的服务端简单实现](https://github.com/zhiyu1998/Gemi2Api-Server)

HanaokaYuzu / Gemini-API 的服务端简单实现

[](#p-5250700-dizzy-17)![](https://linux.do/images/emoji/twemoji/dizzy.png?v=14)
 部分更新日志
----------------------------------------------------------------------------------------

### [](#p-5250700-latest2025-5-17-18)【latest】2025-5-17

*   支持 Roo Code（[@lll9p![](https://linux.do/images/emoji/twemoji/laughing.png?v=14)
    ](/u/lll9p) 提出解决方案）

![](https://linux.do/uploads/default/original/4X/d/0/8/d0873be0d9d36c80e73205bccd199426e9a3baea.gif)

### [](#p-5250700-h-2025-05-08-19)2025-05-08

*   支持 API\_KEY 请求

```


`SECURE_1PSID=your_psid_value_here
SECURE_1PSIDTS=your_psidts_value_here
API_KEY=your_api_key_here` 
```

### [](#p-5250700-h-2025-04-27-20)2025-04-27

*   支持文件上传
*   加速镜像：Docker 镜像更新为 uv 官方 `ghcr.io/astral-sh/uv:python3.12-bookworm-slim`  
    
    [![](https://linux.do/uploads/default/optimized/4X/e/e/0/ee0bb3c7f48860ec98c6fdd27acdc3933e5d3880_2_612x500.png)
    
    image738×602 75.9 KB
    
    ](https://linux.do/uploads/default/original/4X/e/e/0/ee0bb3c7f48860ec98c6fdd27acdc3933e5d3880.png "image")
    

  

3 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/images/emoji/twemoji/+1.png?v=14)

+1

![](https://linux.do/images/emoji/twemoji/clap.png?v=14)

clap

![](https://linux.do/images/emoji/twemoji/open_mouth.png?v=14)

open\_mouth

![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14)

tieba\_087

308

​ ​ 回复

*   [兄弟们 有办法把Gemini Web端转换成API吗](https://linux.do/t/topic/575909/11)
*   [【项目重做![](https://linux.do/images/emoji/twemoji/rofl.png?v=14)
    】AIstudioProxyAPI的Python版正式发布，支持无头模式了](https://linux.do/t/topic/617542/102)
*   [求问佬们，cursor不能用gemini学生的api嘛](https://linux.do/t/topic/609467/15)
*   [Gemini成功15月！](https://linux.do/t/topic/601647/19)
*   [求gemini advanced 2api 项目](https://linux.do/t/topic/649574/3)
*   其他 11 个

8.8k 浏览量 711 赞 28 链接 116 用户

 [![](https://linux.do/user_avatar/linux.do/rrorange/96/242544_2.png)
 87](/u/RrOrange "RrOrange")

 [![](https://linux.do/user_avatar/linux.do/devinglaw/96/835378_2.png)
 22](/u/devinglaw "devinglaw")

 [![](https://linux.do/user_avatar/linux.do/manlin_liu/96/356170_2.png)
 12](/u/manlin_liu "manlin_liu")

 [![](https://linux.do/user_avatar/linux.do/lotim/96/590310_2.png)
 10](/u/LoTim "LoTim") 

 [![](https://linux.do/letter_avatar/laihaha/96/5_d44a9b381edc88181525e3c8350177ca.png)
 8](/u/laihaha "laihaha") 

阅读时间 24 分钟

热门回复

总结

[![](https://linux.do/user_avatar/linux.do/a_zhao/96/683642_2.png)
](/u/A_zhao)

[晚闻](/u/A_zhao)[A\_zhao](/u/A_zhao)文化宣导员 ![](https://linux.do/images/emoji/twemoji/eyes.png?v=14) 

[4月 18 日](/t/topic/575699/2?u=niyan2025 "发布日期")

佬友牛哇

  

1 个回复

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14)

tieba\_087

23

​ ​ 回复

[![](https://linux.do/letter_avatar/lindo/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/Lindo)

[佬友记](/u/Lindo)[Lindo](/u/Lindo)

[4月 18 日](/t/topic/575699/3?u=niyan2025 "发布日期")

假流式啊，原版好像没实现

  

1 个回复

18

​ ​ 回复

[![](https://linux.do/letter_avatar/beert/96/5_d44a9b381edc88181525e3c8350177ca.png)
](/u/Beert)

[Beert](/u/Beert)一元复始

[4月 18 日](/t/topic/575699/4?u=niyan2025 "发布日期")

牛啊牛啊

  

15

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/rrorange/96/242544_2.png)
](/u/RrOrange)

[RrOrange](/u/RrOrange)一元复始 ![](https://linux.do/images/emoji/twemoji/zzz.png?v=14) 

 ![](https://linux.do/letter_avatar/lindo/48/5_d44a9b381edc88181525e3c8350177ca.png)
 佬友记

[4月 18 日](/t/topic/575699/5?u=niyan2025 "发布日期")

原版没实现，目前就是假流式，不然 Cherry 那边没法接收![](https://linux.do/uploads/default/original/3X/f/a/fa08552ff47b7347fe769ea71e251784fe46e9c4.png?v=14)

  

14

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/whimsy_z/96/105292_2.png)
](/u/Whimsy_z)

[Whimsy\_z](/u/Whimsy_z)一元复始

[4月 18 日](/t/topic/575699/6?u=niyan2025 "发布日期")

佬来个go版

  

1 个回复

12

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/rrorange/96/242544_2.png)
](/u/RrOrange)

[RrOrange](/u/RrOrange)一元复始 ![](https://linux.do/images/emoji/twemoji/zzz.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/whimsy_z/48/105292_2.png)
 Whimsy\_z

[4月 18 日](/t/topic/575699/7?u=niyan2025 "发布日期")

go不起来 要睡觉了，佬友你来，我已经结束战斗了 ![](https://linux.do/images/emoji/twemoji/nerd_face.png?v=14)

  

1 个回复

14

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/whimsy_z/96/105292_2.png)
](/u/Whimsy_z)

[Whimsy\_z](/u/Whimsy_z)一元复始

 ![](https://linux.do/user_avatar/linux.do/rrorange/48/242544_2.png)
 RrOrange

[4月 18 日](/t/topic/575699/8?u=niyan2025 "发布日期")

我只会写bug，小内存三天两头炸，只能用go ![](https://linux.do/images/emoji/twemoji/smiling_face_with_tear.png?v=14)

  

![](https://linux.do/images/emoji/twemoji/heart.png?v=14)

heart

![](https://linux.do/uploads/default/original/3X/2/e/2e09f3a3c7b27eacbabe9e9614b06b88d5b06343.png?v=14)

tieba\_087

12

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/cocky/96/530902_2.png)
](/u/Cocky)

[考奇](/u/Cocky)[Cocky](/u/Cocky)一元复始

[4月 18 日](/t/topic/575699/9?u=niyan2025 "发布日期")

太牛了，配合今天的edu完美了

  

8

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/tafiny/96/306557_2.png)
](/u/tafiny)

[MoYu](/u/tafiny)[tafiny](/u/tafiny)蛇来运转

[4月 18 日](/t/topic/575699/10?u=niyan2025 "发布日期")

牛啊 白天再看 先mark

  

9

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/maotaozi/96/573295_2.png)
](/u/maotaozi)

[taotao](/u/maotaozi)[maotaozi](/u/maotaozi)一元复始 ![](https://linux.do/images/emoji/twemoji/fries.png?v=14) 

[4月 18 日](/t/topic/575699/11?u=niyan2025 "发布日期")

佬友，使用2.0-flash可以  

[![](https://linux.do/uploads/default/optimized/4X/4/b/c/4bc37024d9c7b70dd1265bb210a39f05e6bde37c_2_690x258.png)

图片1366×511 50.3 KB

](https://linux.do/uploads/default/original/4X/4/b/c/4bc37024d9c7b70dd1265bb210a39f05e6bde37c.png "图片")

但是2.5-exp-advanced就输出  

[![](https://linux.do/uploads/default/optimized/4X/f/6/2/f62d411b4cca81500d2332a1b3f9b0b6ac7f0a06_2_690x247.png)

图片1497×538 25.1 KB

](https://linux.do/uploads/default/original/4X/f/6/2/f62d411b4cca81500d2332a1b3f9b0b6ac7f0a06.png "图片")

  
翻译：

```


`{
  "message": "500 {\"detail\":\"生成完成时出错：无法生成内容。接收到无效的响应数据。客户端将在下次请求时尝试重新初始化。\"}",
  "status": 500,
  "error": {
    "detail": "生成完成时出错：无法生成内容。接收到无效的响应数据。客户端将在下次请求时尝试重新初始化。"
  }
}` 
```

  

1 个回复

8

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/maotaozi/96/573295_2.png)
](/u/maotaozi)

[taotao](/u/maotaozi)[maotaozi](/u/maotaozi)一元复始 ![](https://linux.do/images/emoji/twemoji/fries.png?v=14) 

[4月 18 日](/t/topic/575699/12?u=niyan2025 "发布日期")

有个日志

```


`INFO:main:Prepared conversation: System: 所有的回复请使用中文作答！

Human: 测试

Assistant: 
INFO:main:Available models: ['unspecified', 'gemini-2.0-flash', 'gemini-2.0-flash-thinking', 'gemini-2.5-pro', 'gemini-2.0-exp-advanced', 'gemini-2.5-exp-advanced']
INFO:main:Using model: Model.UNSPECIFIED
INFO:main:Sending request to Gemini...
INFO:httpx:HTTP Request: GET https://gemini.google.com/app "HTTP/2 200 OK"
ERROR:main:Error generating completion: Failed to initialize client. SECURE_1PSIDTS could get expired frequently, please make sure cookie values are up to date. (Failed initialization attempts: 1)
Traceback (most recent call last):
  File "/root/data/taozi/gemini/main.py", line 214, in create_chat_completion
    response = await gemini_client.generate_content(conversation, model=model)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/data/taozi/gemini/gemini2api/lib/python3.11/site-packages/gemini_webapi/client.py", line 40, in wrapper    await client.init(
  File "/root/data/taozi/gemini/gemini2api/lib/python3.11/site-packages/gemini_webapi/client.py", line 173, in init
    access_token, valid_cookies = await get_access_token(
                                  ^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/data/taozi/gemini/gemini2api/lib/python3.11/site-packages/gemini_webapi/utils/get_access_token.py", line 145, in get_access_token
    raise AuthError(
gemini_webapi.exceptions.AuthError: Failed to initialize client. SECURE_1PSIDTS could get expired frequently, please make sure cookie values are up to date. (Failed initialization attempts: 1)
INFO:     10.0.0.213:54185 - "POST /v1/chat/completions HTTP/1.1" 500 Internal Server Error
INFO:main:Prepared conversation: System: 所有的回复请使用中文作答！

Human: 测试

Assistant: 
INFO:main:Available models: ['unspecified', 'gemini-2.0-flash', 'gemini-2.0-flash-thinking', 'gemini-2.5-pro', 'gemini-2.0-exp-advanced', 'gemini-2.5-exp-advanced']
INFO:main:Using model: Model.UNSPECIFIED
INFO:main:Sending request to Gemini...
INFO:httpx:HTTP Request: GET https://gemini.google.com/app "HTTP/2 200 OK"
ERROR:main:Error generating completion: Failed to initialize client. SECURE_1PSIDTS could get expired frequently, please make sure cookie values are up to date. (Failed initialization attempts: 1)
Traceback (most recent call last):
  File "/root/data/taozi/gemini/main.py", line 214, in create_chat_completion
    response = await gemini_client.generate_content(conversation, model=model)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/data/taozi/gemini/gemini2api/lib/python3.11/site-packages/gemini_webapi/client.py", line 40, in wrapper    await client.init(
  File "/root/data/taozi/gemini/gemini2api/lib/python3.11/site-packages/gemini_webapi/client.py", line 173, in init
    access_token, valid_cookies = await get_access_token(
                                  ^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/data/taozi/gemini/gemini2api/lib/python3.11/site-packages/gemini_webapi/utils/get_access_token.py", line 145, in get_access_token
    raise AuthError(
gemini_webapi.exceptions.AuthError: Failed to initialize client. SECURE_1PSIDTS could get expired frequently, please make sure cookie values are up to date. (Failed initialization attempts: 1)
INFO:     10.0.0.213:54186 - "POST /v1/chat/completions HTTP/1.1" 500 Internal Server Error` 
```

  

1 个回复

10

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/qaz741wsd856/96/312935_2.png)
](/u/qaz741wsd856)

[Sora](/u/qaz741wsd856)[qaz741wsd856](/u/qaz741wsd856)

[4月 18 日](/t/topic/575699/13?u=niyan2025 "发布日期")

目前多上了几个站内大学，整的key池就自用来说完全是够了，网页版2api会有什么额外的优势吗？

  

9

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/maikade/96/653254_2.png)
](/u/MaiKaDe)

[MyCard](/u/MaiKaDe)[MaiKaDe](/u/MaiKaDe)大预言家

[4月 18 日](/t/topic/575699/14?u=niyan2025 "发布日期")

支持一下

  

9

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/rrorange/96/242544_2.png)
](/u/RrOrange)

[RrOrange](/u/RrOrange)一元复始 ![](https://linux.do/images/emoji/twemoji/zzz.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/maotaozi/48/573295_2.png)
 taotao

[4月 18 日](/t/topic/575699/15?u=niyan2025 "发布日期")

别急 佬友 昨天睡觉去了 今天我看下

  

8

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/rrorange/96/242544_2.png)
](/u/RrOrange)

[RrOrange](/u/RrOrange)一元复始 ![](https://linux.do/images/emoji/twemoji/zzz.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/maotaozi/48/573295_2.png)
 taotao

[4月 18 日](/t/topic/575699/16?u=niyan2025 "发布日期")

![](https://linux.do/user_avatar/linux.do/maotaozi/48/573295_2.png)
 taotao:

> 但是 2.5-exp-advanced 就输出

可以的哇，是你请求太快了或者你不是advance的问题吗？

[![](https://linux.do/uploads/default/optimized/4X/1/1/f/11fee67eda38396a95d9bdffaa357d0673bddb89_2_581x500.png)

image852×732 55.5 KB

](https://linux.do/uploads/default/original/4X/1/1/f/11fee67eda38396a95d9bdffaa357d0673bddb89.png "image")

  

9

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/dwl/96/9979_2.png)
](/u/dwl)

[dw](/u/dwl)[dwl](/u/dwl)

[4月 19 日](/t/topic/575699/17?u=niyan2025 "发布日期")

热佬，这玩意在huggingface或者render上能部署吗？

  

1 个回复

8

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/rrorange/96/242544_2.png)
](/u/RrOrange)

[RrOrange](/u/RrOrange)一元复始 ![](https://linux.do/images/emoji/twemoji/zzz.png?v=14) 

 ![](https://linux.do/user_avatar/linux.do/dwl/48/9979_2.png)
 dw

[4月 19 日](/t/topic/575699/18?u=niyan2025 "发布日期")

没搞过，你试试 ![](https://linux.do/images/emoji/twemoji/joy.png?v=14)

  

1 个回复

7

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/emper0r/96/462384_2.png)
](/u/emper0r)

[emper0r](/u/emper0r)海纳百川

[4月 19 日](/t/topic/575699/19?u=niyan2025 "发布日期")

mark一下

  

8

​ ​ 回复

[![](https://linux.do/user_avatar/linux.do/dwl/96/9979_2.png)
](/u/dwl)

[dw](/u/dwl)[dwl](/u/dwl)

 ![](https://linux.do/user_avatar/linux.do/rrorange/48/242544_2.png)
 RrOrange

[4月 19 日](/t/topic/575699/20?u=niyan2025 "发布日期")

我不太懂这玩意啊，以前都是直接用其他热佬的docker。。。

  

7

​ ​ 回复

Invalid date Invalid date

超级收藏夹
-----

×

从云端同步 手动备份到云端 导入 导出 云同步设置

WebDAV 云同步设置
------------

×

服务器地址:

用户名:

应用密码 (非登录密码):

当收藏变化时自动备份

测试连接保存

选择一个云端备份进行恢复
------------

×

*   正在加载备份列表...

🗂️ 超级收藏夹⭐ 收藏本页↑↓⇔⇧⇩